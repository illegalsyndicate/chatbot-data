This document contains the release notes for HyWorks v3.4. This release comes with new features, UI revamp, enhancements and bug fixes to improve quality, reliability, and performance.

Release Date: 31-Aug-2022

Last modified on: 20-Sep-2022

HyWorks Components
Module	Version	Remarks	Download location
HyWorks Controller	v3.4.0.15792	HyWorks Controller Setup with Scheduler services	The download link is available in this Support Article
HyWorks Session Host Server	v3.4.0.15780	HyWorks Session Host Server Setup, has an integrated Session Host Server agent, HyWorks Monitoring service, HyWorks DVM Tools - Lite, AUEM, Session Server Extensions, Session Recording Tools	The download link is available in this Support Article
HyWorks DVM Tools - Windows	v3.4.0.484	HyWorks DVM Tools has an integrated HyWorks Desktop Agent, Built-in USB redirection driver, Session Server Extensions, AUEM, Session Recording Tools	The download link is available in this Support Article
Ubuntu Assistive/Dependency Packages	v22022022	Setup to install dependencies needed for enabling Ubuntu VDI deliveries. The package contains Linux DVM Tools, but it is recommended to upgrade to the latest version of the DVM Tools for Linux v3.4.0.85. The package is used for both ubuntu based personal and shared hosted desktop preparation.	The download link is available in this Support Article
RHEL/CentOS Assistive/Dependency Packages	v06062022	Setup to install dependencies needed for enabling RHEL/CentOS personal desktop deliveries. Shared hosted desktop or application deliveries are not supported from RHEL. The package contains Linux DVM Tools, but it is recommended to upgrade to the latest version of the DVM Tools for Linux v3.4.0.85.	The download link is available in this Support Article
HyWorks DVM Tools for Linux	v3.4.0.85	HyWorks DVM Tools for Linux has an integrated HyWorks Desktop Agent, Built-in USB redirection driver, Session Server Extensions. Linux DVM Tools are for personal as well as shared hosted desktop environments.	The download link is available in this Support Article
Accops HyWorks Scheduler	v3.4.0.85	Supporting service for automatic power management implementation in HyWorks	The download link is available in this Support Article
Accops HyWorks Action Processor	v3.4.0.39	Supporting service for automatic power management implementation in HyWorks	The download link is available in this Support Article
HyWorks VM Scale Booster	v3.4.0.80	Recommended for large deployments of shared hosted as well as personal desktops for scalability.	The download link is available in this Support Article
HyWorks VM Scale Booster	v3.4.0.43	Must have component for session recording in v3.4.	The download link is available in this Support Article
Modules Integrated in DVM Tools and Session Host Server
Module	Version	Remarks	Download location
Built-in USB Redirection Driver	v9.2.2384	Integrated in the HyWorks DVM Tools.	Not shared separately.
Session Server Extensions	v3.3.1.17	Integrated in the HyWorks DVM Tools and session host server setup.	Not shared separately.
Session Recording Module	V1.0.2.45	Integrated in the HyWorks DVM Tools and session host server setup.	Not shared separately.
Accops User Experience Manager	V3.1.0.204	Integrated in the HyWorks DVM Tools and session host server setup.	Not shared separately.
Diagnostic Tool	v3.4.0.17	Integrated in the HyWorks DVM Tools and session host server setup.	Not shared separately.
Network Monitoring Driver	v1.2.09	Integrated in the HyWorks DVM Tools and session host server setup.	Not shared separately.
Session Recording Package	v4.1	Integrated in the HyWorks DVM Tools and session host server setup.	Not shared separately.
Important

HyWorks v3.4-GA can be used to upgrade HyWorks Controllers running v3.2-SP2 or later installed with Microsoft SQL Server.

Features & Enhancements
This section of the release notes provides details of new features and enhancements in the HyWorks v3.4-GA release.

New Feature Integrations
Changes in HyWorks
Session Host IP Virtualization for both Linux and Windows-based Session Host Servers
HyWorks v3.4 has an integration for the virtual IP address feature for multi-user Windows and Linux session host servers. This feature provides a unique IP address to each session on the session host server. The virtual IP helps in identifying separate users on the network that are all working from the same session host server.

This feature is configured through the HyWorks Controller Management Console.
This feature is supported by both Linux and Windows session host servers for shared hosted desktop and application sessions.
Virtual IP can be applied to all or to specific processes.
Administrators can choose to block the session if the virtual IP address is not available (by providing a session only when the virtual IP is available).
Virtual IPs can be temporarily or permanently assigned.
Session Recording
HyWorks v3.4 has a feature that will enable recording of sessions on shared session hosts or on personal virtual desktops. This feature can be configured using the recording profile in the HyWorks Management Console. All the recorded sessions will be listed within and can be viewed through the HyWorks Management Console.

The following controls are provided for session recording:

An option to enable or disable session recording for a specific pool, applications or users. Recording profiles are attached to HyWorks connection profiles.
An option to record only at specific intervals, at the start of a session, for a specific network IP address or at the launch of a specific application/process.
Provide sessions only when recording is possible.
An option to pause recording if the user session is found inactive for the configured minutes.
Support for MP4 and MKV formats.
Options to control framerate, recording visual (Black & White or Color), resolution (800x600 to 3840x2160), enable or disable transcription.
Controllable recording upload time.
A new system role 'Recording Auditor' has been added. Users that have a Recording Auditor role will be able to view and play recordings through the HyWorks Management Console.
Nutanix Flow Integration
Nutanix Prism Central provides an option to assign categories to different VMs. It delivers advanced network security, providing visibility into the virtual network, application-centric protection from network threats, malware, ransomware and security and compliance monitoring.

HyWorks v3.4 has an integration for the Nutanix flow, where administrators can choose to apply categories to desktop pools or desktop VMs. This will enable organizations to deploy software-defined virtual network security without the complexity of installing and managing additional products that have separate management and independent software maintenance requirements.

Integration of new cloud providers - Oracle and AWS (Amazon Web Services)
HyWorks v3.4 has integrated support for Oracle and AWS cloud service providers. Currently these providers are in Beta phase.

The integration has also been extended to HyLabs.

Support for New Linux Flavors
HyWorks v3.4 has support for new Linux OS flavors:

Red Hat Enterprize Linux v7.9
Ubuntu Boss v8
Ubuntu Gnome 20.04
User Logon using Random Password
In a workgroup environment, HyWorks can be used to provide session connection with a randomly generated password at all times. The feature will ensure:

Passwords are being generated randomly during connection
Administrators will not have access to user passwords in the HyWorks built-in directory
Site configurations and desktop pool DC-DR support
HyWorks v3.4 will provide an option to define sites through the Management Console. Desktop pools can be configured to provide access to local or remote sites. A desktop pool configured for remote site will remain inaccessible until the administrator triggers disaster recovery for the remote site. Once DR is activated, all desktop pools configured for the remote site will become accessible.

Option to make provisioned desktops members of AD group(s)
On the Desktop Pool wizard -> Customization screen, the option to mention AD groups has been provided. As part of the system customization process, the new computer object will be made a member of the AD groups mentioned here.

Installer - Session Host Installer is removed from the Controller Setup
In earlier versions of HyWorks Controllers, the Controller setup had an option to install the session host servers. With v3.4, session host servers will be installed using a separate installer.

Option to Choose Datastore Cluster (VMware) for Deployment
v3.4 of HyWorks Controller is enhancing the support for VMware object hierarchy. Earlier versions did not have the option to choose a Datastore cluster object. In v3.4, Datastore cluster objects will be shown and will be selectable through the HyWorks Management Console.

Integration of the Diagnostic Tool
The diagnostic tool can help with diagnosing problems with the system (HyWorks Controller/Session Host/Desktop VM) by evaluating overall configurations, service and system status. The diagnostic tool will also collect all system information needed by the support team that is normally asked to the customer, such as the product version, operating system etc.

v3.4 of HyWorks has an integrated diagnostic tool, which can be run through the HyWorks Controller Management Console if the agent on the target system (Session Host/ Desktop VM/HyWorks Controller) can be contacted. If this option is not working, the tool can also be located at the following location:

HyWorks Controller: \<Controller Installation Directory>/Service/DiagnosticsTool
HyWorks Session Host (Windows): \<Session Host Installation Directory>/SessionHost/DiagnosticsTool
HyWorks Desktop VM (Windows): \<DVM Tools Installation Directory>/HyWorks Desktop Agent/DiagnosticsTool
Configurable Behavior for Domain De-registration of Provisioned VMs on Recompose
The previous version of HyWorks Controller was trying to deregister provisioned VM entries from all discoverable DCs. For small deployments, this worked but for large deployments with too many DCs, the deregister calls were taking too much time, failing for unreachable DCs and also causing some conflicting results. To improve this behavior, the following configurable advanced settings have been provided:

Remove the VM from the domain controller option: Set this option as 1 to remove the VM from all discoverable domains, and set it as 2 to remove from specified domain controllers
Un-register machine from domain option: Set as 0 to disable, set as 1 for "only during pool or VM destroy (delete from disk)", and set as 2 for "unregister on VM delete (during Pool delete and in recompose/recreate)"
Domain name list to remove desktop: if the "Remove VM From Domain Controller Type" option is set to 2 (delete only Specified Domain Controller), then specified domain names will be used. This field accepts comma separated values to mention multiple DCs.
HyWorks Controller Management Console Login via HySecure SAML App
Latest HyWorks Controller supports logging into the Management Console via SAML from HySecure. This will require the latest HySecure release which has the required changes to support this feature.

The feature will be controlled via the Advance Configurations tab:

Management Console login Option: Set as 0 for "HyWorks Portal only", set as 1 for "Saml only" and set as 2 for "HyWorks Portal and SAML".
SAML-IDP Endpoint URL: URL for the application configured on IDP, Management console send SAML request for authentication.
SAML-Certificate: SAML certificate is used to validate SAML response.
SAML- Assertion Consumer Service Url: The ACS URL is an endpoint on the Management Console that the identity provider will redirect to with its authentication response.
SAML Group Attribute name: Attribute name for the group in SAML response
SAML- Issue URL: Issuer URL - Unique identifier of the IdP. Formatted as a URL containing information about the IDP so the SP can validate that the SAML assertions it receives are issued from the correct IDP.
Changes in HyWorks Management Console
HyWorks Management Console Revamp
The HyWorks Management Console is completely refurbished to make it easy to use. The changes include:

Grouping menus in a better and more logical way
Arranging menus in three levels
Themes and colors for better appearance
Separating Session Servers and connectors for easy management and visualization
Renaming of some objects and controls for better understanding such as Session Providers are renamed to Connectors
Old VIP configurations are removed from the Session provider's Add/Edit wizard. With new implementations, VIP settings are applied on Session teams and Desktop Pools/Apps.
Client group menu is renamed to Classification Rules
New Screen to View Recorded Sessions
A new screen (Monitor - Session Recordings) has been added where administrators will be able to view and play recorded sessions.

Run Diagnostic Tool from the Management Console
The HyWorks Management Console will have option to run the diagnostic tool on the following registered objects:

HyWorks Controllers: Management Console -> System -> Controllers -> Select HyWorks Controller -> Troubleshoot
HyWorks Session Host: Management Console -> VDI -> Session Servers -> Servers -> Select Session Host Server -> Troubleshoot
HyWorks Desktop VM: Management Console -> VDI -> VM -> Select VM -> Troubleshoot
New Option in Connection Profiles
The following new options have been added within the connection profiles:

Local Resources -> Allow RDP Plugins -> Accops Web Request Redirection
Additional Settings -> Session Recording Profile
Access Settings -> Window Client Session Launcher Option (Built-in, Legacy (MSTSC), Windows Desktop Client (MSRDC), PC-over-IP Protocol (PCoIP))
Enhancements in Capacity Plan
Support for DC-DR
Deployments where a shared hosted desktop pool has been configured for a remote site can be configured to have the following configurations:

Minimum % of VMs to be provisioned, when disaster recovery not active: This option will keep a minimum number of VMs provisioned for inactive DR pools.
Minimum powered on VM(%), when disaster recovery not active: This option will keep a minimum number of VMs powered on for inactive DR pools.
With DR activated, the capacity plan will takeover the remaining deployment and session host availability.

On-demand Provisioning and Capacity Management
In the earlier version, the capacity plan was triggered at pre-configured intervals only, even in cases where users were getting onboarded and capacity was not as per the objectives. Enhancements have been made in v3.4, where if users are being connected and if the capacity allows provisioning and readying new session host servers, the plan will be triggered immediately. Users will be notified of a short waiting period as the shared hosted desktops are being readied for them.

Changes in Session Host Servers - Windows
Integration of Latest Sub-modules
The following components have been integrated in HyWorks Session Host:

SessionServerExtension: 3.3.1.17
Accops User Experience Manager (AUEM): 3.1.0.204
Network Activity Monitor (Uacnde) Driver: 1.2.0.9
DiagnosticsTool: 3.4.0.17
Web Request Redirection in Windows Session Servers
A new session extension has been added to the Windows Session Servers, which can be used to redirect digital tokens and web requests. This feature integration will help enable isolated usage of digital tokens in a virtualized environment.

Integration of IP Virtualization
Windows session host server has an integration for IP virtualization.

Integration of Session Recording
Previous versions of session host server had an integrated session recording feature but it was executed and managed completely through scripts and manual intervention, with no centralized management and no viewing capabilities in the HyWorks Management Console. The new session host server has integrated session recording modules, which can be executed and managed through the HyWorks Management Console.

Diagnostic Tool Integration
HyWorks Session Host v3.4-GA has an integrated diagnostic tool, which can be executed through the HyWorks Management Console or directly at the following location on the session host server:

HyWorks Session Host (Windows): \<DVM Tools Installation Directory>/HyWorks Desktop Agent/DiagnosticsTool
Changes in HyWorks DVM Tools - Windows
Integration of the Latest Sub-modules
The following components are integrated in HyWorks DVM Tools:

SessionServerExtension: v3.3.1.17
Accops User Experience Manager (AUEM): v3.1.0.204
Network Activity Monitor (Uacnde) Driver: v1.2.0.9
DiagnosticsTool: v3.4.0.17
Built-in USB Redirection Driver: v9.2.2384.0
Integration of Session Recording
Previous versions of the DVM Tools had an integrated session recording feature, but it was executed and managed completely via scripts and manual intervention, with no centralized management and no viewing capabilities in the HyWorks Management Console. The new DVM Tools has an integrated session recording modules, which can be executed and managed through the HyWorks Management Console.

Diagnostic Tool Integration
HyWorks Session Host v3.4-GA has an integrated diagnostic tool, which can be executed through the HyWorks Management Console or directly at following location on the session host server:

HyWorks Session Host (Windows): \<Session Host Installation Directory>/SessionHost/DiagnosticsTool
Option to Remove Computer Object from Specified Domain Controllers
Earlier versions of the HyWorks Desktop Agents were attempting to delete computer object from all discoverable DCs. v3.4-GA Desktop agent has registry based configurations, which can be used to disable computer object deletion completely or remove only from the specified domain controllers.

Registry Location: HKEY_LOCAL_MACHINE\SOFTWARE\Accops\DVMAgent\ADVANCE SETTINGS
Registry Key: EnableComputerObjectDeletionFromDC, Value: True or False (If false, objects will not be deleted from DCs)
Registry Key: DeleteFromSpecifiedDC: If set as *, objects will be deleted from all discoverable DCs, Comma separated DCs: Agent will try to delete the computer object from only the specified DCs.
Configurations Optimizations
The following enhancements have been made for the HyWorks Desktop Agent and Session Hosts:

Single Registry Set for External Logging: In earlier versions, the session host and desktop agent were reading information from a different registry locations and may have caused confusion. In this version, there will be a single registry location: HKEY_LOCAL_MACHINE\SOFTWARE\Accops\DVMAgent\ADVANCE SETTINGS\EXTERNAL LOG SETTINGS
Re-arrange Registry Keys: Registry-based configurations are grouped in a logical structure:
HKEY_LOCAL_MACHINE\SOFTWARE\Accops\DVMAgent: Has global DVM agent configurations
Advance Settings: Common advance configurations
External Log Settings: For external logging configurations
Session Recording: Session recording settings
VIP Settings: All VIP related settings
DVM Push: Scale Booster Configurations
Events: Configurations of all system events, if any actions have to be configured
Suspend Process: All configurations related to process suspension
Users: User data to be stored for active/disconnected sessions
Linux VDI (Session Host/ Personal Desktops)
The following changes are integrated for Linux VDI:

IP Virtualization Integration
New Linux DVM Tools in Linux Session Host Servers has integrated support for VIP feature.

New Linux Flavor Support Added
The following new platforms are supported in HyWorks with this version:

Ubuntu BOSS
RHEL
Ubuntu Gnome 20.04
Enhancing communication between the Controller and the Linux Session Host Servers
In the earlier versions, communication between the controller and the Linux session host server was one sided i.e. from the Controller to the session hosts. Going forward, the session host server (Desktop agent) is sending updates to the HyWorks Controller.

Pre and Post HyPrep Script Execution Support
The earlier version of Linux DVM Tools did not have any pre or post HyPrep script execution support. The latest version of DVM Tools for Linux will have these implementation.

Script Path /etc/edcdvm/linuxDvm/scripts/
Script Names: HyprepPreScript.sh, HyprepPostScript.sh
Pre and Post AppLauncher Script Execution Support
The latest version of DVM Tools for Linux has implementations to support script execution before and after AppLauncher execution.

Script Path: /etc/edcdvm/linuxDVM/scripts
Script Names: AppLauncherPostScript.sh, AppLauncherPreScript.sh
Monitoring Service Integration
The latest version of Linux DVM Tools have monitoring service implementation. This feature integration will help with the following:

Monitoring resource utilization for Linux Session Host servers
Adaptive Load Balancing based on resource utilization
Support for Direct RDP and Console Block
This feature is available for Windows Session Host servers and is implemented in latest version of Linux DVM Tools. Based on the configurations, the Linux session host or personal desktop will now:

Log off any remote desktop sessions taken directly and not via Accops HyWorks Controller
Log off any console session (if enabled)
Accepting Calls from Authorized Controller
This feature is available in Windows Session Host server and DVM Tools from v3.3. V3.4 DVM Tools for Linux will have configuration where, if specified, the DVM agent will accept calls only from specified controllers. Any calls from any other controllers will be rejected.

HyLabs Features and Enhancements
The following new features and enhancements are included in v3.4:

Validating Client Groups on Reservation Connect
In previous versions of HyLabs, the client group validation happened only during user logon. In v3.4, changes are incorporated so that the client groups will be validated on reservation connect operations as well. This change also requires the latest HySecure (HyLite) to share WAN IP with the HyWorks Controller during the "Connect" operation.

Self-study Creation Control
v3.4-GA has an additional layer of control for self-study creation and access:

Creation Control: Users will be evaluated for self-study creation. If the Gold master is restricted, and the user is accessing HyLabs from outside of the permitted client group, he/she will not be allowed to create a self study.
Access Control: When the Gold master is not restricted for creation, users will be able to create a self-study from any location but control can only be provided during access. Access will only be available from specified client groups.
System Level Reservation Limits
In the earlier version, the limits were applied at the Gold master level and there was no cap at the system level. This has been fixed in v3.4-GA, where the following two additional system level limits have been provided in the HyLabs Admin Portal -> Default Reservation Settings:

Max VM Limit in System: Maximum number of VMs can be created in the whole system (across the reservations). Set value as 0 (zero) for an unlimited number of VMs.
Max Active VM Limit in System: Maximum number of active VMs for the whole system (across the reservations). Set value as 0 (zero) for an unlimited number of active VMs.

Bug Fixes
The following bugs have been fixed in the HyWorks v3.4-GA release:

#	Subject
24920	HyWorks does not support the selection of datastore cluster during deployment.
This issue is fixed and v3.4 has an integrated enhancement to select and use the datastore cluster for deployment.
24864	The selected Resource pool gets set to Default when the administrator selects "cluster" or "host" as the target location in provisioning profile.
This behavior is now improved to allow the administrator to select "host" or "cluster" and retain saved configurations.
24851	HyPrint with Linux VDI does not work when being accessed through HyLite.
The issue was due to a flag being sent incorrectly and has been fixed in v3.4-GA.
24716	License utilization limit was not working in case of a named user license.
The issue is fixed and named user licenses will now be used as per the set limits.
24390,
20333	If a Windows Session Host server provisioned via HyWorks was customized using Sysprep, the local administrator user password was getting reset and was not able to take remote of session host server.
This issue has been fixed in v3.4-GA, where in the Management Console, selecting the customization method as Sysprep will require the administrator password to be set.
24388	The Session host server or desktop agent stopped sending logs to the ARS/Syslog server, when the 'Share Client Info' flag was not set within the HyWorks Controller.
The condition has been fixed in v3.4-GA and logs will now be sent correctly to the configured ARS/Syslog server.
24387	When the "Delete the VM after every reservation" run field was set to empty for reservations imported from CSV, the feature was not working.
The empty value will be read as true and the reservations will have 'Delete VM after every reservation' as checked.
24383	Applauncher registry is not getting created on fresh installation of Session Host server and no errors are displayed.
Appropriate logs are created in installer logs and also a warning will be shown on setup wizard for AppLauncher registry creation failure.
24365	Device remained Active for a long time and did not switch to an offline state even though the "Last Seen" field displayed correct information.
This issue was identified for devices where the Active state did not have any sessions. This is fixed in v3.4-GA and devices should now show the status correctly.
24198	A Domain trust issue was observed on the VMs after recompose for deployments that had deployed Active Directory Sites and Services as well as those that had multiple DCs deployed in a single site.
This was due to duplicate actions taken by the Controller and the Desktop Agent for deleting the objects on DCs on recompose. Enhancements have been made and object deletion has been made configurable on the Controller as well as the Desktop Agent for better handling of such cases.
23999	Failed to fetch user entitlements with a 'TimeOut Error' in the Management Console for a large number of user entitlements.
This issue has been fixed in v3.4-GA.
23993	The logs downloaded from the HyWorks Controller Management Console were not in proper order.
This issue is fixed in the latest HyWorks Controller release.
23939	Disabling the "Advance Settings - User Life Span and Device life span" field was not working correctly in disabling the automatic user/device deletion.
Issue is fixed in v3.4-GA.
23894	Shared License Pool limit was set as 0 even when the Unlimited shared license pool usage is enabled for the Default org. This intermittently resulted in failure upon user logon with a license exceed error.
This issue is fixed in v3.4-GA so that at the creation of a new child organization, the default organization settings will not be affected.
23809	A "No desktop found with ID" error was being displayed when the GM that was selected had IPv6 enabled on MS Azure.
Support to handle IPv6 has been added to fix this issue in v3.4-GA.
23703	Call to deregister VM from the domain was not initiating at the Controller for the Hyper-V/SCVMM provider
Support to deregister VMs from the domain has been extended to Hyper-V and SCVMM.
23602	A confusing status message of "Successful" was being shown as a response to the DVM refresh call for VMs not having any IP Address listed.
Behavior has been improved to show an appropriate message for VMs that do not have an IP address.
23376	Cloning was failing when a vSphere user configured in HyWorks did not have adequate permissions to read the Gold master folder information.
Better handling of the issue has been implemented.
23090	HyLabs (Login via HyLite) did not work when the auth domain was configured in HyWorks as "Built-in-Built-in".
This issue is fixed. HyLabs login should now work for built-in-built-in auth domain configuration.
22865	GM connect in HyLabs was not working for Workgroup user.
Issue was associated only with #23090 and is fixed in v3.4-GA.
22019	User authentication to the RMS portal (HyWorks) failed when the authentication server was used through the parent organization.
HyLabs has not been tested in multi-organization environment, but this issue has been fixed to enable HyLabs usage and verification in a multi-organization environment.
21873	Failure to create a non-persistent pool was reported even though a restore point was created. The issue caused a failure for post VM power-on restore point creation.
This issue was fixed in v3.4-GA.
21746	Registered device data was getting lost intermittently after a controller upgrade.
A fix to this issue has been provided in v3.4-GA, where devices will not be deleted post upgrade.
21425	Accelerated networking is not working for cloned VMs on MS Azure, even after the Gold master is set to have accelerated networking.
Network acceleration is now working correctly on cloned VMs with v3.4-GA.
21327	Backup creation failed when the HyWorks database was configured using Windows authentication.
This issue has been fixed in v3.4-GA.
20887	The status message for power operation failure when the Hyper-V was unreachable was not displayed but logs were being created, causing confusion for the administrator about whether the operation was successful or not.
An appropriate error status message is now being shown in v3.4-GA.
20789	A duplicate entry was being created when editing the participant from the participant page.
This issue has been fixed in v3.4-GA.
20770	When removing controllers from HA and then re-adding them to the HA, the entry for the secondary controller was not visible on the primary.
The Controller waits for the sync to complete before adding an entry for the controller. This was failing to happen when the controller had a large amount of data to sync. This issue has been fixed by implementing another thread for adding controllers in primary and secondary respectively.
20712	Duplicate users could be added as participants, causing login failures with a grammatically incorrect error being displayed.
v3.4-GA has a fix for this issue and the error message has been corrected.
20622	In a rare condition, the controller created inumerous VM deletion jobs after the desktop pool recompose and started to respond very slowly.
v3.4-GA has a fix for handling such cases.
20392,
20298	If the administrator added the same user in 2 different groups in the Management Console, it opened in 2 different browser tabs and the user was added to the wrong group.
This issue has been fixed in v3.4-GA.
20335	Logging in with leading spaces before the username resulted in an authorization failure on the HyWorks Controller.
The Controller will be truncating leading or trailing spaces, if any are added by the client.
20185	The user search was not working in the built-in group when the group had 100+ users.
Improvisations have been made in v3.4-GA to handle this issue.
20004	Launching the browser with more than 3 arguments in the application command line was not working.
This issue has been fixed in v3.4-GA.
19995	Snapshot restore was shown as successful but the restore point (Snapshot) was not found on the provider.
It was a rare case, where the HyWorks-managed restore point was deleted by the administrator, but the condition has been handled and an appropriate status and logs will now be shown.
19989	If users continuously connect and reconnect sessions on the Linux SHD server, agent and monitoring service were going into a non-responsive state.
The HyWorks Desktop Agent and Monitoring services have been better equipped for this type of session load.
19980	The Remove button on the 'Entitlement' screen within the Application Edit wizard was not working when more than 1 group was added
It was a UI issue and has been fixed in v3.4-GA.
19918	DVM agent logs were insufficient in analyzing the cause of app/desktop session logout.
Logs before every logout in SHD are being added: e.g. "Logging-Out session as VIP attachment failed for user: {Username} and {wtsId}".
19917	Proper logs were not being displayed within the Desktop Agent when the application was not found at configured path.
Appropriate logs will now be shown within the Linux DVM Agent.
19886	Applauncher.exe was replaced if the sessions were running on the session host server during an upgrade.
Appropriate implementations have been made in v3.4 to handle upgrade cases.
19875	When switching controllers with VIP for controller was enabled, an incorrect mode was sent to the SHD.
This issue has been fixed in v3.4-GA.
19159	The built-in group name was not completely shown even through space to do so was available within the Management Console.
This was a UI issue and has been fixed.
18763	GM connect: Launch URL should have used advance config.
In previous versions, the GM connect launch URL was not configurable. Any changes made to the URL on HyLite was causing issues. GM Connect launch URL can now be configured from the HyWorks Management Console -> Advanced settings.
18681	The Controller was unable to refresh the deployed SHD desktop details from the desktop provider and was marking the VMs as missing.
Improvisations have been made to handle this case and VMs are now being appropriately refreshed.
18621,
18563	A firewall rule was created for the default RDP port 3389 when the customized RDP port was used.
The Desktop agent will now create the firewall rule for the configured RDP port only.
18572	The log deletion thread was running on the session node.
This has been improved in v3.4-GA, session nodes will not delete old logs.
18457	When under load, the broker node details were nullified and it behaved like the primary management node.
This issue has been fixed in v3.4-GA.
18414	Gold master information (CPU, Memory, HDD, OS etc.) were not displayed within the UI.
Fixes have been incorporated in v3.4-GA.
18391	The session host and controller installation logs have been improved to include details of Windows role installation, registry configurations, etc.
17976,
17974	With HyLabs under load, errors (deadlock) occurred on license checking and logout in HyLabs.
Appropriate performance improvements have been incorporated in v3.4-GA to handle these cases.
17860	The entry for an un-managed SHD pool was not removed from the DB after it's deletion, causing the controller to attempt to fetch it's details.
Fixes have been incorporated in v3.4-GA.
17843	Desktop pool cloning was failing on Azure if the desktop prefix name had a space in it
Space handling has been incorporated in v3.4-GA
17106	Recompose was not working due to a failure in the deletion of VMs on Nutanix (the provider became unreachable because of too many shutdown calls at the same time)
Advance configurations have been implemented to handle such cases. Max Concurrent Connection To Provider and Concurrent Operation, values for them can be set to 20 and 5 respectively.



Previous Releases
This document contains the link for the previous releases of HyWorks.

Previous Releases
HyWorks v3.4 is having all new user interface and major feature enhancements. Details of all previous releases can be found here: Previous Release Documentation.


Accops HyWorks 3.3 Knowledge Center
This portal provides help for Accops HyWorks 3.3 and includes topics varying from installing the product, getting started to providing detailed information on the product use. Additionally, articles related to HowTos and FAQs are also included.

Here are some details on the different tabs available in this help.

Releases
The Releases tab contains release notes of the major release along with all the Service Packs released on top of this main version. For e.g., in the current context, this tab will have release notes for 3.3 GA and related HotFixes like HF1, HF2 etc

Installation
The Installation tab provides the System Requirements for installing the product followed by installation, upgrade and uninstallation of the different components forming part of the product.

Getting Started
The Getting Started tab takes an administrator through the different tasks needed to get started with the HyWorks product.

Admin Guide
The Admin Guide tab provides details of the different features and the explanation of each of the configuration items available on the product UI.

How Tos
The How Tos section provides articles for performing various tasks in the product.

FAQs
The FAQs section provides various FAQs faced by the administrator during any of the product deployment lifecycle stages.


Known Limitations and Issues (HyWorks v3.4-GA)
Note

The Known issues list is updated with every release. These is the current list of known issues.

Known issues and limitations is a list of all the known issues in different component of HyWorks. Follow below links for module-specific known issues or limitations:

Installation and Upgrade Known Issues and Limitations
HyWorks Controller Known Issues and Limitations
Shared Hosted Desktop/App Delivery Known Issues and Limitations
Personal Desktop Delivery Known Issues and Limitations
Linux VDI Known Issues and Limitations
Connector Known Issues and Limitations
HyLabs Known Issues and Limitations



Known Limitations and Issues in Installation and Upgrade of HyWorks Modules
Last Updated Date: 22-Sept-2022

Release: HyWorks v3.4-GA

Note

The Known issues list is updated with every release. These is the current list of known issues.

Installation and Upgrade Issues
#	Subject
22548	[Controller Setup] HyWorks Controller sync (For modes with HyWorks managed database availability) will not work, if admin has installed controller with providing database address as localhost. HyWorks installer does not resolve the hostname, when only localhost is provided.
Recommendation: Database address should be provided in hostname\SQL-instance-name or IP Address\SQL-instance name format.
20149, 20147, 20155	[Controller Installer] On un-installation, HyWorks Controller setup leaves the inbound rules in firewall for 1. Accops HyWorks Reservation Management Service (port: 38868), 2. HyWorks License Server (Port: 38867), 3. HyWorks Monitoring Service (Port: 38870) 4. HyWorks Upgrade Service (Port# 38865) 5. HyWorks Management Console (Port# 443) 6. EDC Proxy Server (Port: 38861)
15006	[Controller Setup] Controller installation with SQL 2008 is not supported.
18840	[SRMS Setup] On clicking on Next on Database selection page, it goes into Not-responding state for some time.
Recommendation: Wait for installer to check database configurations.
18289	[Controller Setup] Japanese Sync framework is not getting installed on Japanese Windows Server (Japanese Sync FW is not embedded in installer)
Workaround: Install Japanese Sync Framework separately.
18287	[Controller Setup] Upgrading broker node before Management nodes will result in setup corruption (v3.3-GA-HF4 Multi-node to latest)
Workaround: Restart broker node service after upgrade of all nodes.
18026	[Controller Setup] Restore database option is disabled when database is on some other VM. As controller will not be able to move backup file to SQL Server and thus restore is not supported for configurations having SQL Server is hosted on remote server and not on controller.
Backup can be restored using SQL management studio and then controller service can be started to used backed-up database.
18002	[Controller Setup] Broker node installation will not work if any of management node is not reachable.
Recommendation: Keep management nodes installed, up and reachable, during installation of broker nodes.
15701	[Controller Setup] Controller/SHD installer gets failed, if EDC.Core.dll file and installer setup are kept in the same folder.
Recommendation: Remove edc.core.dll file, if present in same directory where setup file is kept.
15213	On upgrading to v3.3-GA (12803), incorrect RDP port is configured in desktop pool configuration. Incorrect port - 3889; Correct port - 3389.
Impact: The bug can cause connection failures to shared hosted desktops post upgrade.
14599	After upgrading to 3.3 GA, authentication server is not reachable.
Impact: User login failures. HyWorks deployments having AD group as super-administrator, admin login will also fail and whole system may become unaccessible.
Workaround:
Change Active Directory option value to 2 or 3 in database - Table Name: ClusterServerSettingsDbo, Field Name: ADGroupAccess Type, Set Value: 2 or 3 Recommended
Repair HyWorks Controller after upgrade and set super-administrator as local HyWorks user. Login into Management console with new super admin, update Active directory options value to 3 from 6 in System - Advanced Config and save or update authentication server configurations to have base DN and other new mandatory fields.
13918	[Session Host Setup] No error logs are shown, when HyWorks Session Host setup fails to install remote desktop server role and thus administrator can not know, if installation is completed successfully or not.
13778	[Controller Setup] Residual empty License Service and Upgrade service folders are getting created on HyWorks Controller installation.
10107	[Controller Setup] On upgrade or repair, if we go forth and come back, features are getting checked automatically even if they were unchecked.



HyWorks Controller Known Issues
Last Updated Date: 22-Sep-2022
Release: HyWorks v3.4
Note

The Known issues list is updated with every release. This is the current list of known issues.

#	Subject
26215	With deployment settings being kept as default, all the cloned VMs are getting cloned on a single host on which gold master is running, even when the gold master is in cluster.
Workaround: Make sure to specify deployment settings to be deployed at the cluster level.
26042	All the cloned VMs are created on the same storage container as the gold master and not on the specified storage container at the time of cloning with Nutanix.
25836	An incomplete and confusing error is logged in HyWork, when user's attempt to change password fails because of complexity requirements.
25659	Even though User initiates the Power operations on VMs, the log is getting generated again system user in the Controller logs.
25346	Controller continues to show old platform for logged in user and does not refreshes the platform information.
24997	Same users from different authentication server can be added, if configurations are changed in auth-domain, e.g. auth-domain configuration is changed from built-in/built-in to LDAP/built-in or vice versa.
Impact: The duplicate entries may confuse administrator and also may result in login or authorization failures sometimes.
Recommendations: The organization configurations should be planned well so that it does not require change. Even if it needed change, clean-up of HyWorks should be done to remove all users from previous auth-domain configurations.
24885
22968	Oracle Data Disk and OS Disk snapshot is not getting deleted in set time and in case of recompose the old snapshot may be used for provisioning causing the changes done on Gold master to be ignored.
24678	Controller creates an error log if user refreshes the app list on client side and previously some virtual apps in remote app mode are opened and then closed. Error log: No App session found to reconnect for User 'Username'.
24527	In some rare cases VM deletion was failed with error "The Object context instance has been disposed and can no longer be used for operations that require a connection", while deleting the desktop pool.
Workaround: Manually remove the VM from HyWorks and respective provider.
24380	Password change may fail with exception, if port 636 is not reachable from HyWorks Controller or appropriate certificate configurations are not done on active directory server and option 6 is used for active directory connection.
Exception: Unable to read data from the transport connection: An existing connection was forcibly closed by the remote host
24373	HyWorks Controller does not log VM image creation on AWS. There is no impact of this but eventually can create some confusion as VM image deletion logs are generated after cloning is completed.
24017	Power operations initiated by client may fail with a non-user friendly exception in multi-node cluster deployment of HyWorks Controller and broker nodes are unable to reach to Microsoft Azure.
Exception: Unable to perform 'Power-on' operation on the desktop [VM-name] for the user 'Username'. More info: Invalid Credentials.
23805	Provisioned SHDs published as physical PCs are not responding without showing error displayed.
The issue is because, all the physical VMs added with same IP address are going to have duplicate IP and in that case controller does not show agent status.
23491	HyWorks may leave some residual data of organization during deletion and may cause complete management console to be inaccessible.
Workaround: Remove the details of deleted organization from database.
23463	Controller uses VM-name to unregister from domain for deployed VMs instead of computer name (Fails in all cases where computer name is different than VM name).
Workaround: Administrators should use same name for fields VM name (Deployment screen) and Computer name (On Customization screen).
23376	Cloning fails when Gold master is created from vSphere server instead of vCenter.
Workaround: Create Gold master VM from vCenter Server wizard.
22148	Sometimes exception on HyWorks Controller is logged after service service restart for stopping scheduler service.
Exception: Cannot stop EDCSchedulerService service on computer '.'. -> System.ComponentModel.Win32Exception: The pipe has been ended.
21958	Client entry is not getting updated after updating DN for a user and so multiple client entries are created.
21829	By default for fresh controller installation, with active directory option# 6 for user authentication and authorization, built-in groups and nested groups do not work in HyWorks Controller.
If required it can be changed from HyWorks Controller > Advance Settings.
21731	Controller does not create synchronization logs for a very long period of time when the secondary server with a very large number of records has been added to a controller.
21724	SQL transactions fails on the Controller, when too many devices (100K) are registered.
21287	With small timeouts on HyWorks (< 5 minutes), sessions taken from HyLite may get logged out abruptly though user is working.
This happens because the default sync time between HyLite and Controller is 5 minutes. It is recommended to have timeouts more than 10 minutes, when delivering with HyLite.
21044	Controller access via VIP does not work, if network adapter used for VIP configuration is having space in it.
Workaround: Change network adapter name to have no spaces and same name on both controllers.
20866	Controller sets display name same as username while importing users from LDAP and does not use the actual display name configured on LDAP.
20800	On initiating sync session info action on inactive session provider, controller displays a success status but does not perform any sync operation.
The behavior is also different, when performing the same operation on session team with inactive session provider where appropriate logs will be created.
20733	Active directory server fails to be added into HyWorks, having following policy enabled:
Policy: "Domain controller: LDAP server signing requirements" enabled and configured as "Require signing"
Exception: Additional non-parsable characters are at the end of the string
20616	With too many records for synchronization (more than 100000), cluster configuration fails and primary server may go into fault mode.
Workaround: Create secondary server with backup of primary database and then add to HA, avoiding too much synchronization.
20296	Adding a deployed shared hosted desktop pool creates a team with same name as desktop pool name but updating the desktop pool name does not update the team name.
20202	Network Settings details are not integrated in CSV export from session teams page.
20129
18966	Controller does not support DVM Tools - Lite upgrade.
Provisioned SHDs shown in VMs page can be incorrectly upgraded to DVM tools instead of Lite, because of above issue and may cause functional issues.
20124	Reason of service not responding for Linux session host server is shown as "Feature not available" and may cause little confusion.
20119	If a Windows session host server configured in HyWorks is powered-off, it can create a confusing log.
Log: The Session Provider 'provider name' is not reachable. More Info :Unable to connect to the Session Provider hosted at 'Not Available'. Reason: Unable to parse URI 'http://Not Available, Reason: Invalid URI: The hostname could not be parsed..
20009	In some cases, HyWorks may log an error while deleting desktop pool, though related objects are deleted successfully.
Error: Store update, insert, or delete statement affected an unexpected number of rows (0). Entities may have been modified or deleted since entities were loaded.
19984	Configuring static IP address on Gold master may result in duplicate IPs in the network post provisioning.
19983	Controller may fail to delete a device having associated session and attempts to register into another organization. Ideally Controller should delete the associated sessions also.
19868	The shutdown operation on Linux VMs is kept on hold, if someone has logged-in to the VM from hypervisor console session.
19664	Controller lists all attached VIPs, while trying to change primary IP for the VM. Ideally VIPs should not be listed as they are not always attached to virtual machines.
19560	Saving a session team with a very long range of VIP may get stuck and cause high resource (memory/CPU) utilization by controller service.
Workaround: Create some small network range and configure it on team.
19091	Controller by default uses the primary or first IP on the network interface added on Azure VM, though VM has multiple IP addresses configured on network interface. Option to choose primary IP will not work for Azure provider VMs.
19038	If a permanent VIP is having issue, the user session will be rejected unless the issue is solved or a new VIP is assigned.
18830	Controller may intermittently show error "Error while getting device software information for EDCA00MAC000", causing some confusion.
18507	With too many users connecting a time (more than 10 users per second)
18327	Controller transactions with SQL may get failed with timeout exception if database diagram is created.
Usually database diagram is created when user clicks on it and it checks with user to create it.
18078	In case of domain controllers are deployed in child-parent configuration and HyWorks is configured with child domain, it does not fetch groups or OUs from parent domain controller.
18015	Changes to management are not forbidden from session nodes, so if any deployment is having management console installed on session nodes, changes can be done from session nodes as well.
18006	Controller displays a confusing error invalid username and password, when SAM Account Name is to be used for logon but truncate is off and user is using username@domain-name or domain-name/username to sign-in.
14404	If special characters %/\" are included in Gold Image (Source VM) name or snapshot name for vCenter, snapshot of replica is getting created every time after increasing the count of VM for Persistent pool of type linked clone
Avoid using special characters in Gold Image (Source VM) name or snapshot name.
14376	Incorrect error message is displayed in Test connection of AD, when configured admin account is locked
14375	If the user has changed password, Auth domain (AD/Built-in) and synchronization as Do not create/ Manual, connection to dedicated desktop fails.
14305	[HA] Removal of controller from HA setup leave Tracking Table in DB.
14256	With CredSSP enabled, sessions from Linux based endpoints will fail because of protocol negotiation.
Workaround: Create a separate connection profile for Linux based endpoints.
14083	Deleting a node from HyWorks Controller active-active setup requires node to be destroyed before removal as on service start the node may again get added.
13923	Controller will fail to authenticate users, who are member of "CNF" group in AD.
Exception: XML parsing: line 1, character 1744, illegal xml character.
How is CNF group created: If an object is created on one domain controller and an object with the same name is created in the same container on another domain controller before replication occurs, it creates an object name conflict. Active Directory automatically changes the relative distinguished name of the object with the earlier timestamp to a unique name.
Reference: https://learn.microsoft.com/en-us/previous-versions/windows/it-pro/windows-2000-server/bb727059(v=technet.10)?redirectedfrom=MSDN
13889	Internal configuration is displayed in the error message when user is not able to connect to the AD server.
13767	Even when the single Monitor usage is set in the Endpoint, user is able to use multiple monitors.
13667	User's are not notified about the destruction of desktops they are working on.
13256	Enable DVM reset option is not working for SHD desktop pool due to which snapshot is not created.
13189	User friendly logs are not displayed when controller tries to get the weight of SHD servers which is not in a reachable state.
12972	While performing power operation, internal configuration is displayed in the Controller logs. Due to this, Administrator may not understand which desktop is affected.
12971	Connect desktop logs are not user friendly.
12942	It is not possible to delete vCenter server with 6000 or more VMs.
12871	AD User is not able to log in to client with 256 character length password.
12792	Unpredictable behavior when Round robin load balancing is used with multiple teams.
12564	With UPN as logon attribute, following special characters do not work in username |\@`
12561	User, Group or OU with pipe | character is not supported in HyWorks so user logon fails
12547	Fetching OU in entitlements fails if search string includes bracket ( ). Workaround: Search without bracket
12539	If backslash() is included in username, user might have login issues while logging from client using UPN.
12518	Secondary controller hangs and is not able to sync if primary controller is having a large amount of data (1L rows).
12517	Authorization with built-in and nested AD group does not work when Group retrieval type is set to 6 Workaround: Add entitlement using groups created manually and specific groups only.
12458	Desktop provisioning continues even when enough resources are not available on desktop provider (VMware, Nutanix, Azure, Hyper-V).
12439	Unable to delete the AD when reservations created by AD user exists in RMS Workaround: Delete all the associated objects from database before removing AD.
12436	User friendly errors are not logged when cloning fails and Administrator has to check respective Hypervisor or cloud logs.
12434	In many cases, test connection failure may not give detailed exception and thus more analysis of controller/ AD server is required.
12432	Controller fails to fetch OU details if domain name provided in AD configuration is not same as NetBIOS name.
12406	Desktop status is shown incorrectly as Not synced instead of Missing if configured DVM is deleted from the session provider.
12403	Misleading status of desktop VM, when user initiates shutdown internally. HyWorks does not support stop with de-allocation and because power-off is equivalent to stop with de-allocation, incorrect status is displayed.
12402	Status of Desktop agent is Not Responding, when multiple VMs with different IP addresses are present in HyWorks with same IP address.
12399	HyWorks Controller Logs : Username and APPS name is not appearing in Log Details.
12384	Controller Installation on WVD: 1. IIS installation externally (Class not registered) 2. MSMQ installation externally ([RMSBackgroundWorker] while monitoring import events).
12371	[Azure] Log message incorrectly states that recreation of Desktop VM is supported when it is possible to recreate Desktop VMs
12341	Large deployments with 10000 users might fail due to application connection issues.
13334	In User Details, primary AD server details are displayed even when user is authorized from the secondary server.
12328	AD server configuration fails with error "The specified forest does not exist or cannot be contacted." Workaround: Enable Skip attribute verification.
12319	Skip Login Attribute Verification settings is not retained after updating AD server Workaround: Check this configuration every time active directory configuration is updated.
12317	Session nodes logs provide misleading information when management nodes get switched ON.
12187	Incorrect error message shown to user when user account has expired in AD and Group retrieval type is set as '3'
11950	When the Controllers in HA cluster are configured with different ports than information about different ports is not visible on client
Workaround: Use same port for both the Controllers.
11884	Controller installation on other than default port does not get updated in management console configuration. Workaround: Update Management console configuration file to point to modified ports.
11784	[Azure] FQDN of cloned VM not reflecting on desktop VM page.
11780	On user session reconnection (re-login by user), controller may give reconnect of disconnected RDS session with no app running in some rare case, where user has closed the remote app before the disconnection.
11635	Session host server resource data does not get updated in real time and thus with adaptive load balancing server score will be updated after 30 second duration and may cause session from same server for some time until score gets updated.
-	Deleting a node from HyWorks Controller active-active setup will require node to be destroyed before removal as on service start the node may again get added.
11349	External load balancers must use HyWorks health probe service to detect node health, using port reachability may cause failure in detection of node down due to reasons such as licensing or SQL connection issues.
11334	Current weighted round robin does not work in the expected manner and may end up giving more session than expected.
11330	HyWorks uses Least connection load mechanism to serve the session when multiple sessions are requested at the same time. Due to this it might happen that multiple sessions may get served by the same server.
11263	Database gets deleted incorrectly if it is pointed at the time of installing new node and the installation fails. Workaround: Installation should be done using dummy database and node should be configured in the cluster post installation.
-	Database gets deleted after session node is uninstalled. This happens because by default database is removed after uninstalling node. Workaround: Uncheck Post installation database removal permission.
10992	When LDAP server is configured over SSL, it takes time to authorize/authenticate as Controller tries to resolve additional hosts. Workaround: Add appropriate host entry to reduce host resolution interval.
10575	Sometimes power off operation does not work with Nutanix dedicated session provider.
10327	Nutanix may keep old IP cache for some time and thus may result giving two IPs to HyWorks Controller causing issues.
Workaround: Configure controller to use appropriate IP filtering.
9569	HyWorks may not fail to authorize from configuration using AD for authentication and built-in for authorization but using UPN as logon attribute.
9519	HyWorks sends logs to Accops Reporting Server or Syslog only once. Due to this, if it fails to send logs, these logs are lost and reports does not show data points of that duration.
9493	HyWorks database restore fails if the parameters - Username, password, SQL server version, location; configured in the new SQL server and the one which is to be restored are same.
8555	HyWorks may not work correctly with proxy authentication server e.g. Accops directory server.
8439	Shadow sessions are created using the connection profile of the actual user session. Due to this, it might happen that Shadow session may not have features it actually requires. E.g. In user session, connection bar is disabled but in shadow session it will be needed.
-	Base DN and User DN is mandatory for configuring directory searcher option as LDAP searcher from advance config.
-	As Controller requires FQDN to communicate with AD over SSL, if Controller needs to point to a specific AD instance, its host entries must be created otherwise Controller will continue to use first resolved AD. With multiple session manager nodes, this is required for all the nodes.
-	DVM Power Policies in DVM Pool may conflict with Auto-login (Auto-login will keep the machine powered-on whereas power policy may try to power-off the DVMs). Administrators are required to keep power policies as default or disabled in DVM pools if intending to have auto login on registered devices.
7478	Power off, Reset or suspend events are not known to DVM agent and thus controller will not be notified immediately. Power status will be updated as per timeouts in HyWorks Controller.
7466	DVM Push will not work with SQL installed in Windows authentication mode only.
7082	Virtual IP for HA script does not support Ethernet name with space.
6380	Sometimes error log 'Object reference not set to an instance of an object' are generated, while restarting session host server.
6330	Logs are not generated, when desktop is not assigned to users if they are in maintenance mode on desktop pool.
6114	HyWorks Controller requires restart to refresh time zone details.
6101	Unable to delete organization though all visible objects in organizations are deleted.
Workaround: Before deleting organization, remove all the table references mentioned in logs.
5729	In some cases, HyWorks Controller installer is unable to detect correct OS type & previous installation of controller.
5698	Sometimes, select checkpoint in desktop pool wizard does not work in single click and may require reselection.
5681	With large deployments Hyper-V connector may stop responding and communication issues may occur due to timeouts or SSL errors.
5375	No desktop VM's are seen in Desktop VM tab of management console with zoomed in browser settings.
5279	Unable to authorize using built-in group Domain Users, when controller is not in same domain as configured AD (Both as authentication and authorization server).
5278	In Desktop pools - OU with special character is shown with garbage characters and after saving changes to "on" string
5273	HyWorks Controller does not support provisioning using templates with vCenter Server dedicated session provider.
5171	Pervious entitlements with authorization AD can login into client when authorization is changed to built-in when removal of entitlements.
5105	Some threads continue to connect to dedicated session provider though its made inactive.
5083	Updated AD group membership change is not getting fetched and thus failing to assign the desktops/apps runtime.
Workaround: Use advanced settings to use alternate methods of fetching groups.
5026	Desktop pools and reservations become accessible once associated client groups are deleted.
4840	Gold master concurrent access is not restricted, and hence multiple users can access desktops which supports multi-user sessions e.g. Linux desktops.
Controller Management Console Known Issues
#	Subject
26323	A misleading error "There is no authentication server configured" is shown while searching for a user with dot and auth-domain configuration is using built-in users.
26295	Login with HySecure link becomes visible though not enabled while trying to login with invalid credentials into management Console.
25963	Option to enable DVM Reset is disabled, while adding new persistent desktop pool with dynamic provisioning.
The issue is affecting all connectors: Nutanix, vCenter, SCVMM etc.
25922	Incorrect Desktop ready count is showing on pools page when new SHD is added using copy operation.
25232	On enabling Unassign on VDI log off, warning is displayed that hybrid mode is not enabled even when the hybrid mode enabled.
24872	It is possible to add duplicate AWS connector using the same information.
24869	A non-friendly error message is displayed if AWS connector is added with invalid credentials.
24866	A misleading error "One or more error occurred" is shown when administrator tries to add Oracle as connector in HyWorks with any of the incorrect details.
24804	Management Console fails to open, where its installed on Windows 2012R2 or lower with internal error 500.19.
Workaround: Delete the following flag from web.config:


22523	HyLite does not use the portal settings of HyWorks - Organization and thus all the customization have to be run via HySecure management console or HyLite configurations.
21121	HyWorks management console UI gets distorted while searching the groups or OUs with special characters e.g. pipe "|".
20961	Saving a session team after assigning more than 2.5K applications, management console becomes inaccessible.
20959	Server page in Management console displays list of configured servers without IP address, if the ethernet card, holding the primary IP address used to configured server on HyWorks is deleted from the provider.
20051	Incorrect VIP is shown in dialog box while removing the Permanent VIP assignment for user from User details page.
18827	To play session recording using HyWorks management console, either appropriate certificate must be configured on the SRMS server or exception should be added on user's machine.
To add exception: Get the complete recording URL by inspecting recording icon, open it in browser, when warning is displayed, accept it to proceed. Now the media or recordings can be played.
18524	Files deleted from SRMS server by administrator, will not be removed from Management console list and will fail to play.
18502	Deleting a recording profile assigned to connection profile fails but displays a success message and thus causes a confusion and also functional issues.
14424	It is not possible to exit the Desktop pool wizard if the Administrator has specified VM name prefix with unsupported chars and later corrected it
14405	Fetching Gold Master at the time of recompose results in exception if Gold Master name includes special characters.
14386	Error "Value cannot be null. Parameter name: source." is shown when user not having edit permission on capacity plan, tries to edit any existing plan.
14384	Change mode reflects with quite delayed response on UI and requires manual refresh.
14371	DVM Reset option is getting enabled and editable on selecting recompose for a non-persistent pool though no function impact even when unchecked.
14368	on Re-editing the Dedicated Desktop pool, section shown below Assign Desktop "on connect" is not getting displayed.
14365	On enabling Unassign User on VDI Logoff during Desktop pool creation, it is showing warning that Hybrid mode is not enabled even when the Hybrid mode is enabled.
14324	Adaptive load balancing type option should not visible for Linux session team, as monitoring service is not implemented in Linux SHD
14314	[Licensing] License is getting allocated to child Organization after 100% utilization in parent organization if License are all shared.
14313	[Licensing] Unable update license if all the license is used (Reserved +Shared) with 100% utilized license to (all Reserved with unlimited check).
14268	Desktop VM page takes long time to sync after deleting VM from it.
14258	'Browse' option should not visible on Server team page of Linux application.
14236	In the Sessions Team page, Session mode column is not applicable for Un-managed session team but is still displayed.
14228	At times when user launchs app, SHD session is launched instead application.
14079	'Get icon automatically' option for application getting failed for Windows 2k19 server.
14060	Desktop removal on editing desktop pool is not working for Managed SHD pools.
13808	[3.2sp2+hf5/3.3 ]: Scrolling issue on left side tabs when using laptop touch pad.
13510	Select source VM test call fails in case of multiple IPs.
13235	It is possible to decrease the configured count of Maximum capacity than already deployed desktop count for SHD cloning pool. Ideally it should not possible to decrease.
13207	Controller is truncating the LDAP user, whose having leading and trailing space in it hence unable to login into Linux SHD.
12977	Manual assignment does not work when user select Group in Desktop Pool.
12874	Password field value visible, inspect and then by replacing password with text.
11861	Some labels or column values are different than their actual value in database and thus search on those columns may not work as expected.
7764	Dashboard - License section graph gets refreshed with abrupt flickering.
7439	Dedicated providers are added when they are unreachable with active flag.
7431	HyWorks management console session persists so user is able to access Console even without password by using previous and next button of the browser. .
6712	'Limit Single Instance per user' should be enabled and non-editable for Linux application.
6614	Existing Custom URL's doesn't have edit option.
6923	Same group/OU can be added multiple times while publishing applications.
6666	Device based assignment gets removed for floating pools if user from that device is logged off.
6612	Linux SHD server get added incorrectly as Windows SHD.
6125	MS Edge - Unable to scroll using mouse wheel once opened User Sessions/Logs page.
5747	Adding Application gets stuck in Loading state if size of Application Icon is greater than 3MB.
5675	With too many authentication servers or shared hosted desktops, dashboard will appear with lots of empty space.
5611	Search entry is removed on Groups wizard after clicking on enter.
5305	After enabling Use custom client window title, the Delete shortcuts on exit is out of default page size.
5288	Launch mode for application in User Details page is always shown as Remote App.
5284	Display name in User Details page displays garbage data if user belongs to OU with all special characters.
5277	Unable to add OU with pipe "|" operator in its name in Entitlements.
5276	Incorrect data is displayed in Total powered on ready desktop VMs (includes shared hosted desktops as well) in event logs produced in HyWorks Controller.
5275	In Add Desktop Pool wizard, sometimes Source VM is not getting selected in single click with Microsoft SCVMM/Hyper-V dedicated session provider.
5193	Desktop pool is saved without assigning desktop to user in desktop assignment tab when auto-assignment disabled.
5191	Group entitlements / User entitlements are not deleted from UI after deleting the group or user.
5171	Pervious entitlements with authorization AD can login into client when authorization is changed to built-in when removal of entitlements.
5149	User information from User Details page is not deleted when built-in users is deleted. Trying to view user details will show error on page.
5139	Linux app session should be removed from HyWorks manually if stuck in initializing state.
5129	Same address can be added as primary and secondary authentication server.
3142	Download logs fails with Management Console in Japanese with error-61 (Japanese OS).
Upgrade Service Known Issues
#	Subject
5027	High memory consumption by Upgrade Service with too many upgrades initiated for DVM tools.



Known Limitations and Issues in SHD and App Delivery
Last Updated Date: 22-Sep-2022
Release: HyWorks v3.4
Note

The Known issues list is updated with every release. This is the current list of known issues.

Windows Based Shared Hosted Desktops and Virtual App Delivery Known Issues
#	Subject
26461	Session host IP virtualization feature does not work in cloud deployments (Azure/AWS/Oracle).
25474	Shadow sessions are considered as direct RDP sessions and may get removed by the agent.
Workaround: Disable direct RDP block feature temporarily.
25118	Session host installation may not show any errors if the user running the setup does not have appropriate rights to add or update registries. This may result into functional failure at a later stage during the setup.
Recommendation: Session host installation logs should be verified post installation.
24995	Some exceptions are logged in session host logs, when a session host with multiple running sessions (with VIP enabled) is restarted.
Exception: The underlying provider may fail on Open.
24888	An error is logged in session host logs only after a shared hosted desktop pool is provisioned.
Error: region LastServiceForcedExit failed. Error: The media is write protected.
23964	Successful VIP removal log is not getting logged on controller, when session is logged out from within the session (SHD).
23408	Users fail to read the notification as Tray agent is getting opened in background in case of remote app session recording.
23297	Controller does not support upgrade of session host servers that have sessions running. Due to which such servers have to be manually accessed and upgraded.
22590	Windows server 2022 by default does not support multiple sessions of a single user. This can adversely affect virtual app delivery in shell mode.
Solution: Configure following group policy on server 2022:
- Computer Configuration > Administrative Templates > Windows Components > Remote Desktop Services > Remote Desktop Session Host > Connections.
- Set Restrict Remote Desktop Services user to a single Remote Desktop Services session to Disabled.
22519	Recording does not stop for the applications that are configured for it even after closing the application or even the application is not in use.
Same behaviour is observed for the configured network address.
22170	On removing the remote app sessions from controller, provider session is going into disconnected state.
Workaround: Configure the group policy to logout the remote app sessions immediately:
gpedit.msc > Computer configuration > Administrative template > Windows components > Remote desktop services > Remote desktop session host > Session Time limits > Set time limit for logoff of Remote app session.
21254	Logs are not created on HyWorks controller when local users are not created by session host server.
20938	Session recording may not start if recording is configured to be started on specific process launch and the process is initiated within 10 seconds of session start.
20725
11145	Mozilla firefox and Microsoft Internet Explorer does not work correctly when initiated in a different user's context i.e. opened as a different user. This should be avoided.
19910	In a very rare case, monitoring service database is having some garbage values and because of that the service is not responding.
The database should be replaced with empty database and monitoring service should be restarted to solve the issue.
18860	Session recording not working when SMB2 based network is accessed.
16949	Powershell upgrade to v3.1 is must for Windows 2008R2-SP1 for trust relationship repair.
16941	Messages shown to user via virtual channels are outside of remote session and thus user may find it difficult to associate it with sessions, especially when running multiple virtual apps in shell mode.
16929	Capacity plan will continue to affect managed session team even when:
1. Plan is inactive 2. Session team in removed from capacity plan. 3. Schedule has expired. 4. Capacity plan is changed from enforce to disabled.
-	Chrome browser does not get launched in multiple remote sessions of a single user on Windows session host server.
Workaround: As many deployment need to access chrome as virtual app in shell mode, which will require multiple sessions of a single users from single session host server, specifying following command line will enable accessing chrome in shell mode multiple times:
Additional Command-line: --user-data-dir=%localappdata%\Google\Chrome\%sessionname%
14208	After upgrade or fresh installation of session host server, on first logon to server, couple of powershell windows will be shown for sometime.
13922	RDS role is bot available on Windows 2019 essentials and thus can not be used for virtual application or shared hosted desktop delivery.
Power Management Known Issues
#	Subject
-	Session host server power management is applied only to the deployed managed session host server teams and will not work for existing manually created teams.
Azure configuration is required to be done manually with privileged user account.
24889	While scaling down, maximum provisioned capacity is considered instead of minimum running capacity and thus can end-up in running more servers than planned.
24868	Error observed on HyWorks controller logs, when it tries to use cordoned servers for capacity plan scale up.
Error: Team ID or desktop provider IDs can not be null.
22037	Capacity planning is checking the plan objective closest to 12.00 am/0.00 in the current plan only, even if multiple plans are applied to the single session team and thus it may fail to implement objectives from other plans.
21875	Action processor service crashes when AccopsMQ is not reachable.
21735	On-demand scaling using capacity planning is not supported for virtual application sessions and works only for shared hosted desktop sessions.
21652	In some rare cases, action processor has cordoned more servers than expected.
Running sessions will not be affected but new users may have to wait for servers to be un-cordoned.
19776	The schedule background worker CPU usage can go high while saving a session team.
17689	If a managed (deployed) session team already exists and controller has been upgraded to v3.4, to generate schedule Ids the session team must be updated at least once.
16904	Some known limitations of automatic power management in HyWorks:
1. Backend call for plan implementation will occur at minimum 10 minute interval at 00, 10, 20, 30, 40, 50.
2. Action processor is having two calls i.e. 1.Plan implementation 2.Dynamic scale, hence scale may happen in next cycle if call to scale occurs first
3. Virtual channel based notifications to end-users will work with Windows end-points only and will require virtual channels to be enabled in session using connection profiles.
4. Notification settings need to configure through appsettings.json file and service restart is also required.
5. Admin is not having control on dynamically managed teams, which essentially means even if some servers are powered-on or off may get reverted to original state as per capacity plans.
6. Actual shutdown of cordoned server may not happen on notified time and will happen on next dynamic scale trigger.
7. CPU/ RAM thresholds (if applied) can conflict with capacity plan as it only considers max sessions allowed per server.
8. Overlapping of two objectives will result in implementation of current objective and thus the previous plan objective in-progress may get affected.
13794	[Power management] Log should log on controller when power off/on operation is not required, currently no logs are logged on the controller.
13793	[power management] When SHD cloning failed, power management for session team should work according to successful cloned VMs count. It continues to use the desktop count as specified in desktop pool. Workaround: Update the desktop pool with new count or clone again to match the count.
13792	[power management] Logic App logs use session team ID and provider ID and thus admin needs to identify affected team using IDs.
13789	[power management] For every managed session team we need Azure access for creating Logic app.
13777	[Power management] When team size is getting reduced, power management should work accordingly.

Known Limitations and Issues of Personal Desktop Delivery and Windows DVM Tools
Last Updated Date: 22-Sep-2022
Release: HyWorks v3.4
Note

The Known issues list is updated with every release. These is the current list of known issues.

#	Subject
24985
19564	The HyWorks Desktop Agent logs an "An invalid argument was supplied" error after the IP address of a VM is changed.
24930	The VM scale booster does not create the required firewall rule for port 5672, which is the port used by desktop agents to communicate. The rule has to be created manually if the Windows firewall is enabled on the VM scale booster server.
24000	The latest VM scale booster v3.4.0.80 is incompatible with older versions of HyWorks controllers (v3.3-R3(13832) or lower).
23975	During installation, no appropriate logs are generated by the VM scale booster if it is unable to configure AccopsMQ.
23963	If the Desktop Agent service is restarted during a running session that has recording enabled, the recorded file may be corrupted and fails to upload.
23824	Providing a user administrative privileges does not work on VMs with a Japanese OS.
23823	The HyWorks Desktop agent is unable to process a user with Japanese characters in their username and the session logs out.
23414	When the HyWorks Windows DVM Tools is uninstalled, the firewall rules created for built-in USB redirection driver are not removed and need to be removed manually.
22385	When DVM Tools are upgraded/repaired, the same version of the built-in USB redirection driver gets uninstalled and is re-installed, requiring a reboot.
22370	While installing the latest DVM tools, the option to install the USB redirection driver is checked by default, even if the latest version of the USB redirection driver is already installed.
22027	Upgrading the DVM tools may fail or the replacement of the new binaries of integrated components e.g. AUEM, recording modules may fail, when the upgrade is performed during a running session.
Recommendations: Upgrades should be done when there are no running sessions on the VM.
18844	The DVM Tools installer enters a non-responsive mode momentarily during un-installation.
18102	The VM Scale booster logs display the customization status as not initiated even when the customization option is not enabled.



Known Limitations and Issues of Linux VDI
Last Updated Date: 22-Sept-2022
Release: HyWorks v3.4
Note

The Known issues list is updated with every release. This is the current list of known issues.

#	Subject
27265	App Delivery: Linux session host server supports application delivery only in Shell mode.
Recommendations: Though connection profile -> Access mode is overridden, and shell mode is always used, but in any case if issue occurs and RemoteApp is set as access mode, it should be changed to Shell mode.
27264	App Delivery: Only a single session per user per server is supported.
Recommendation: Publish only single application or only shared hosted desktop pool from on Linux session host server. Both applications and shared hosted desktop or multiple applications should not be published.
26270	Warning is not displayed when Linux packages are being installed on unsupported versions. Check supported Linux flavors and versions for for HyWorks.
26088	HyShell is not working with latest assistive packages (v22022022) on Linux SHD v17.3 with VIP feature enabled.
25997
25995	Multiple packages are not installing on CentOS-v7.8.2003 and there are no error logsfor the same in the package installation logs. Current or latest assistive package (v06062022) can not be used for CentOS-v7.8.2003 delivery.
#25995: HyPrint is not working on CentOS with latest assistive packages (v06062022).
24768	The newly provided customization option "to make deployed VM member of AD group" does not work for Linux based VMs and is applicable only for Windows based VMs.
24742	Linux based VMs show old display name though updated on HyWorks Controller, as controller does not send updated display name of the user in subsequent calls.
24718	Session disconnection logs sent to syslog or ARS do not have PIDs and so it is not possible to associate it with the specific session.
24572	Linux based DVM tools does not support automatic repair or replace of corrupted local database. Administrator has to replace the database to resolve the issue.
23944	HyShell is not supported on any vanilla Xubuntu OSes i.e. v16/18/20.
23335	Connection to the RHEL based desktop fails when dollar sign is the last character of the username.
22763	Though Linux DVM agent is configured to send only Process monitoring logs to ARS/Syslog, it also incorrectly sends User session monitoring logs to ARS/Syslog.
21744	IP virtualization feature is not supported with xUbuntu 16.04 or Accops SHD v1.7.3 and may cause system failures.
21729	After installing assistive packages on BOSS VM, built-in USB redirection service remains in disabled state by default.
Additional steps to be performed in BOSS for enabling services:
- Run script in assistive package "boss_os_run_after_reboot.sh"
21608	Power options are not visible for admin user in Linux SHD who is not part of "tsusers" group.
Workaround: Use commands to perform power operations.
21521	In Hyprep, at the time of joining the domain if just the Alternate DNS is configured or when both DNS are kept empty, Agent log displays AD DNS bad packet error and it is not possible to join the domain.
21420	On Xubuntu 18.4.1, Lock screen option is not working inside desktop session.
21399	IP address of BOSS VM is not getting reported on Hyper-V and thus delivery of BOSS OS based Linux desktops is not be possible from Hyper-V or SCVMM.
20476	On removing the app session from the Controller, session does not get terminated and Object ref is printed in desktop agent logs. The issue is observed intermittently on Xubuntu 16.
20057
20033	App/desktop session status is not getting updated on Controller and session host, when session gets disconnected because of network disconnection of SHD; even after SHD's network gets restored
20012	If the application session exists on controller even after the user has logged out of the application session and agent is down, user has to re-login to HyWorks.
19876	Instead of logging off, sessions are disconnected when 'Force user logoff' is configured in session team of non-persistent session host servers.
19583	HyPrep in Linux by default removes the network and recreates it and gets IP from DHCP, which means even if a deployment uses static IP of Gold master, it may get preserved on the cloned VMs post provisioning and customization in Accops.
18804	Domain joining GUI script is not working for Xubuntu 20.4.3 Non-HWE kernel (VM created from uploaded VHD).
17091	Additional limitations of Power management for Managed Linux SHD pool:
1. No notification is displayed to the user, when servers are cordoned or shutdown.
2. User will not be able to save the work before shutdown and results in data loss.
14576	Lag is observed while streaming video on Linux VDI compared to Windows Remote Desktops.
14567	When Proxy is enabled while installing DVM Tools assistive package, few packages are not getting installed.
Workaround: Provide direct internet access on VM where package needs to be installed.
14508	Intermittently built-in USB redirection driver goes into unreachable state resulting in USB redirection failure on Linux Virtual desktops when user logs in and logs out multiple times from VDI.
Workaround: Reboot Linux Virtual Desktop
14417	Intermittently error is logged in Desktop agent log of Linux SHD, while calling API..' log logged in.
14406	Centos 7.5 Linux VDI upgrade failed from version 04102018 to latest 20201110 version(offline package). CentOS 7.8.2003 is supported, thus upgrade of OS is expected.
14402	Controller settings in Database is not getting updated in case of upgrading latest DVM Tools (Via offline package)on Linux SHD v1.6
Workaround: Delete old database file and restart edcdvm service
14372	[LDAP] : Colon sign is not working with LDAP user.
14367	[LDAP] * Asterisk character is not supported in username (mid and last position).
14366	[LDAP] User sync is failing when username starts '!'.
14343	[workgroup] Display name is not getting updated in SHD for Linux SHD desktop session.
14325	[Workgroup]Application shortcut is not getting created on desktop if user having $ and ` character in username.
14309	GUI script to configure Active Directory in Linux VDI gives incorrect error. Message display 'The computer is not joined to domain'
14227	Session ID is not getting when user launches Linux SHD/app with AD user [SHD v 1.7.1] with connection mode set as Remote App
14185	Upgrade from Linux DVM tools v3.3.1.12 and older version is not supported, and pools should be redeployed after upgrading Gold master with latest offline packages
12756	In USB network gate previous USB device entries are not getting removed, Creating confusion for end user
12532	Caps lock is not working correctly on reconnect with HyLite. More options to be evaluated for the same.




Known Limitations and Issues of Connectors or Session Providers
Last Updated Date: 22-Sep-2022
Release: HyWorks v3.4
Note

The Known issues list is updated with every release. These is the current list of known issues.

Hyper-V Connector (Hyper-V/ SCVMM) Known Issues
#	Subject
23613	Controller is unable to process, Hyper-V VMs having special character sequence "<?" or "[]" in the name. An example of process failure can be unable to get IP address.
15298
15330	Hyper-V or SCVMM (Hyper-V connector) may intermittently go into unreachable state, without providing relevant logs on HyWorks Controller. Sometimes timeouts are observed.
15249	While deleting a provisioned desktop pool from an inactive Hyper-V connector, the actual VMs from Hyper-V or SCVMM are not deleted and also the administrator is not warned.
14574	Operational failures may occur if parallel operations (Delete VMs and Provisioning) is initiated on Hyper-V 2012R2 or 2016.
Recommendations: While working with Hyper-V, careful provisioning and operations should be done.
14501	Hyper-V 2012 - Cloning will fail with object reference error if source VM name is having following special characters: ` ~ ! $ % ^ & ( ) [ ] { } \
14422	[Hyper-V Connector - SCVMM] Replica is not deleted during recompose when clone type changed from Linked Clone to Full Clone
Workaround: Cleanup of replica can be done manually.A separate controller patch can be availed. Kindly contact Accops Support team for the same.
14420	Linked clone or clone with Snapshot fails with SCVMM is gold image name is having more than 20 characters
Workaround: Gold VM or Source VM name should be less than 18 characters.A separate controller patch can be availed. Kindly contact Accops Support team for the same.
14419	[Hyper-V/ SCVMM] Cloning failures due to special chars in Gold Image (Source VM) name or Snapshot name (Feature: Clone from Snapshot)
Recommendations: Following special characters should not be used in Hyper-V or SCVMM source VM name or snapshot name.
[For SCVMM] Chararacters not supported in - VM name: space,,?,:,<,>,/,|,\,",',{,} Characterss not supported in Snapshot name: `,&,\,",'
[For Hyper-V] Chars not supported in VM name: ,?,:,<,>,/,|,\,",',{,},[,]
14383	Sometimes cloning fails on Hyper-V with error: Creating the disk at location failed. .
Workaround: Reboot Hyper-V server.
14382	Installer cancellation fails with inappropriate error when Hyper-V Connector setup is cancelled from Platform Configuration Window.
14381	Hyper-V connector installer proceeds with local system account even when credentials are given as administrator without domain name
(Workaround: Provide credentials as hostname\username).
14380	Hyper-V connector installer takes time when setting credentials (not using Local System Account).
14345	Hyper-V cloning will not happen parallelly , because we are taking lock in clone task keep as known.
14629	Clone from Snapshot fails with an error as Unable to acquire a 'Delete' lock on object of type 'VirtualDVDDrive'.
14624	Sometimes SCVMM provider goes in Not Reachable state with error "The connection to the VMM management server localhost was lost". This happens due to heavy load on SCVMM and is not able to accept test connections from the connector.
14316	Installing Hyper-V connector with wrong platform (e.g. Selecting SCVMM while installing on Hyper-V) and configuring on controller results in errors on the Controller.
8953	Preserve MAC address on recompose feature is not supported with Hyper-V or SCVMM.
6877	Direct upgrade of Hyper-V connector is not supported and requires un-installation of previous version
Recommendation: Uninstall any previous version and install new version. Hyper-V connector does not keep any information and thus data will be not be lost on un-installation and re-installation. Take backup of custom configuration before un-installation.
6874	Known Issues - Hyper-V/SCVMM
6873	With Hyper-V 2016 VM, DNS name is always shown as hostname of Hyper-V server.
5420	Cloning fails if communication with Hyper-V Connector (SCVMM) fails.
3294	Cloning fails on SCVMM 2016 due to task lock issue. Issue occurs whe Gold Image is modified from Hyper-V and local DVD drive is attached.
Recommendation: Use gold master with no local DVD drive attached.
Azure Connector Known Issues
#	Subject
16160	Limitations of disk encryption with HyWorks on Azure:
1. If controller service goes down, when encryption is running, then status will not get updated and only workaround is to recreate the VM.
2. Disk encryption with Linux VMs are not yet supported on MS Azure.
3. SSE (CMK / CMK+PMK) based encryption is done after customization.



Known Limitations and Issues of HyLabs
Last Updated Date: 22-Sep-2022
Release: HyWorks v3.4
Note

The Known issues list is updated with every release. This is the current list of known issues.

#	Subject
27266	HyLabs(HyLite) is not supported with authentication domain having following configurations: authentication server - built-in, authorization server - built-in and user credentials for remote server - User provided credentials.
AD/LDAP based authentication configurations should be used.
14403	Reservation Redeployment is getting stuck when snapshot setting is changed.
13393	Daily reservation is shown to run after one month after editing (4 schedules are there with daily recurrence even past dates). Workaround: Update the schedules again.
12973	Incorrect log is displayed for fix course self-study operation of powered off reserved VMs.
12970	Self-study - Events that are not required to be logged are also logged.
12884	No conflict occurs if Self-study is created simultaneously by the participant and admin.
10916	With Reuse VMs.. disabled in reservation, course self-studies scheduled near to course reservation end-time may fail. Recommendation: Create self-studies after some time of course reservation end so that course reservation can be ended.
10891	CSV import fails for Unicode file format. Workaround: Use other supported formats like UTF-8, Shift-JIS etc.
10881	Machine keys in IIS configuration for HyWorks web application resets on upgrade and login from HyLite results in error page 'Server Error in '/' Application.' => Error occurred during a cryptographic operation. Workaround: HyWorks Management Console web application Machine keys should be backed-up before upgrade and should be restored after the upgrade.
10879	Schedule code accepts special character ` and Code validation error occurs if administrator continues to schedule reservation with provided code. Recommendation: The mentioned special character should not be used.
10877	No warning or information of associated course self-study is shown while redeploying course reservation.
10874	Course reservation with higher limits can be created if gold master is modified to reduce the previous allowed set limit.
Recommendation: Delete and recreate the Gold Master instead of modifying the existing one.
10868	Audit announcement is shown to the users, even when inactive Workaround: Delete audit announcement if not needed.
10806	Running reservation time can change after editing and re importing CSV. Recommendation: Do not update running reservations using CSV.
10794	Unable to import users when realm name is mentioned in CSV.
10771	Users not part of any course will not be able to access self-study reservations made by reservation admin for them. Workaround: Create a dummy course for such users.
10757	Allow Connect option works only when preparation time is higher than the allow connect time. Reservations must be in running state for allow connect function to work.
10716	Pool creation types gets reset to 0 for RMS created desktop pools -> Leaves existing desktop pool, replica, resource pool as unmanaged. Recommendation: RMS desktop pools should not be altered from HyWorks Management Console.
10676	Course Self-Study reservation option should not be present in management for assistant user.
Recommendation: This is a duplicate option in HyLabs screen for assistant user. If needed, add reservation option itself can be disabled for assistant user from HyWorks Management Console.
10643	If RMS admin and the Participant creates Self-study for the conflicting time, Participant is unable to create more reservations.
Recommendation: Delete one of the self-study reservations for user.
10640	If RMS admin creates one self-study for participant, participant's count for "Max Self-Studies Allowed" remains intact. Recommendation: Self-study should be initiated by end-users only and thus administrators should not create self-study reservations for them.
10603	On deleting Reservation Pool manually, its resource pool does not get deleted from vCenter.
Recommendation: RMS desktop pools should not be altered from HyWorks Management Console.
10027	"Number of connections exceeded" error is displayed in the Schedule tab instead of Self-Study Reservation.
10026	CSV Import: Reservation is getting added, even when self-study enabled has duration set as 0.
Recommendation: Self-study duration should not be kept as 0 while being imported from CSV.
9044	MMC and RMS service config details should be restored post upgrade.
Recommendation: Backup should be taken before upgrade for smooth and faster restoration of configurations.
8854	Incorrect Japanese translation in Deployment options dialog. Recommendation: Use Chrome or Firefox for administration.
8709	Course self-study is getting failed when "Assign network ready desktops" is enabled on Gold master.
Recommendation: Keep the flag as disabled in provisioning profiles.
8648	Reservation should be highlighted using some mechanism if they have some recommended deployment options pending.
8384	Admin, incharge can create self-study with same time as existing user self-study.
8192	Calendar should show all reservation assigned to Participant/ Incharge / assistant.
7976	Audio and Mic cannot be controlled from HyWorks Controller Connection Profiles in session from HyLite.
Workaround: Additional Command Line Params can be used
7975	Course extension by admin are not reflected on calendar view and hence, course self-study can be created by admin in extended period of course reservation.
7962	RMS logs-out user session though it has been disconnected from HyWorks Controller by admin.
7959	In some cases, immediately after system start DVM agent may not get updated as powered-on due to failure in connecting to AccopsMQ.
7943	Updating an existing schedule shows conflicts with expired schedule.
Workaround: Update schedule and change start date as today.
7880	On changing default reservation settings, changes are not reflected on running self-study reservation
7863	Are you sure you want to shut down the selected reservation? confirm action dialog box is not hidden and page is stuck.
7850	Mail comes on start event even when the reservation is failed.
7825	Importing .txt file via CSV Import results in Object reference error.
7814	Extension is allowed for course reservation schedules which results in conflicting of schedules of same reservation.
7805	Reservation status is not updated as failed when creation of VMs failed during redeploy.
7803	Session change of connect is not updated if DVM Agent counters error like [#7802].
7789	Timezone Issues: Reservation creation may not work correctly when users are working from different timezone as HyLabs portal displays current time of client machine whereas reservation scheduling uses server time for calculations.
7786	[Gap/ Limitation for Kyoto] While creating self-study reservation, extension of existing reservation is not considered, Participant is able to add reservation in conflicting schedule
7771	Refresh button is displayed for course default GM when only admin access flag is enabled
7693	Numbering by RMS is not getting used for newly created VMs after deleting the VMs from the reservation.
7538	Session change event for lock and unlock are not generated thus, max concurrent connection count is un-managed with Desktop concurrent connection check option as 1.
7522	Agent status is not displayed for cloned VMs on reserved VMs wizard.
7518	GM Limits will not get applied on existing reservations schedules post upgrade from v3.2 to v3.3.
7503	Keeping End time of schedule1 and start time of schedule2 shows conflict e.g. two schedules (schedule1 ending at 5:30 and schedule2 starting at 5:30) cannot be created Workaround: Create schedule1 with end time as 5:29 or schedule2 with start date as 5:31.
7471	Deployment setting are not considered for all kinds of GM limits.
7445	Enter value less than 99999 validation message is not displayed for Max Active VMs field while adding gold master.
7257	RMS: Incharge able to remove himself from the course.
6336	Assistants can edit incharge list in reservation.
6251	Disabling course self-study in course reservation settings after course self-study reservations creation, does not show any error and course self-studies are accessible.
6090	[GAP] Object available through all applicable roles should be displayed for a user.
5495	Sometimes even after logging out of RMS portal, the next logon with user having different role causes mix-up of roles and presents improper interface to user.
4872	[Kyoto] Reservation edit should show the redeploy settings as saved from Gold Master.
4840	Same CentOS and Ubuntu VDI gold master can be accessed by reservation admin, incharge, assistant.
4810	Computer account deletion from AD will get failed if provisioning profile has been modified to use different domain user account.
4226	Connect button gets enabled even when reserved VMs are still in configuring state.
4216	Multi-Schedule reservation is not displayed properly in received mails as per in E-mail Notification Settings.
4101	Deleting participant from self-study reservation created by admin, will come into effect only in next schedule.


About Accops HyWorks
Accops HyWorks is an application and desktop virtualization solution suite used to deliver virtualized desktops and applications to authenticated and authorized users.

With Thin client integration and single pane for managing and monitoring capabilities of VDI End-points, the solution delivers the virtualized desktops and applications from various supported infrastructure to remote users.

Various on-premise as well as cloud deployments are supported including leading hypervisors, HCI vendors and public cloud vendors.

Supported Functionalities
The core functionality of the product involves workspace virtualization. The supported workspace virtualization methods are:

Application Virtualization (also referred to as Pooled Virtual Applications)

Application virtualization is used where the user is expected to have access to the application only. With this form of virtualization, users are able to see the application UI only.

Shared Hosted Desktops (also referred to as Pooled Virtual Desktops)

Shared Hosted Desktop virtualization is used where the user is not expected to have heavy resource requirements. In such cases, the desktop can be shared. With this form of virtualization, users are able to see the desktop of a shared OS, for example, the RDSH or LinuxTS.

Hosted Virtual Desktops (also referred to as Personal Virtual Desktops)

Hosted Virtual Desktop virtualization is used where the user is expected to have heavy dedicated resource requirements and are considered power users. With this form of virtualization, users get desktop access to a client OS like the Win 7/8/10 or the Linux one.

Physical Desktops

Physical desktops located in offices can be configured to be delivered as remote PCs to end-users, working from home. Thus utilizing the same hardware available in office premises.

Other key functionalities of Accops HyWorks are:

Zero client & Thin Client Management

Connection Broking & Load Balancing

Device based Virtual Desktop Assignment

Virtual Desktop Power Management

RDS Farm Management

Role Based Access

Application & Desktop Session Management

Peripheral Management (Printer, Scanner, Drive Re-direction)


Components
HyWorks has a number of core architectural components. For more information about these components, see components details.

Depending on your requirement, install the required components. You can find installation procedure here. The following table lists all the components of the HyWorks, whether its installation is optional, where to find them and their hardware requirements.

Platform components
Component	Required	Installer	Installation Platforms
HyWorks Controller
Service	Yes	HyWorks Controller	Windows Server 2022/2019/2016/2012R2/2008R2-SP1,
Windows 10 Multi-Session (Azure)
HyWorks Controller
Management Console	Yes
Option to explicitly Installed during HyWorks Controller Installation
HyWorks Controller	Same as for HyWorks Controller Service
HyWorks License Service	Automatically installed with HyWorks Controller Service	HyWorks Controller	Same as for HyWorks Controller Service
HyWorks Upgrade Service	Automatically installed with HyWorks Controller Service

Required for automatic upgrade of HyWorks DVM Tools	HyWorks Controller	Same as for HyWorks Controller Service
HyWorks Monitoring Service	Automatically installed with HyWorks Controller Service

Required for Adaptive load balancing.	HyWorks Controller	Same as for HyWorks Controller Service
HyWorks Session Host Server	Required for application and shared hosted desktop delivery.	HyWorks Session Host Installer	Windows Server 2022/2019/2016/2012R2/2008R2-SP1,
Windows Server 2003 (limited),
Windows 10 Multi-Session (Azure)
HyWorks Reservation Management Service	Required for HyLabs (Labs automation and virtualization).
Must be installed with HyWorks management console.	HyWorks Controller	Same as HyWorks Controller Service.
HyDesk Devices Components
Component	Required	Installer	Installation Platforms
HyDesk Devices	Thin Client Devices
Pre-built	HyDesk Thin clients with integrated HyWorks Client
HyWorks Clients Components
Component	Required	Installer	Installation Platforms
HyWorks Clients	Yes
Required if a generic device is to be used	HyWorks Client for Windows/Linux/MAC	Client software installed on supported Windows/ Linux / MAC platforms
HyWorks Hypervisor Components
Component	Required	Installer	Installation Platforms
Accops HyWorks Hyper-V Connector	Yes
Required if Hyper-V or SCVMM server is to be used as dedicated session provider	Accops HyWorks Hyper-V Connector Installer	Hyper-V Server 2019/2016/2012R2
SCVMM Server 2019/2016
Virtual Machine and Session Server Components
Component	Required	Installer	Installation Platforms
HyWorks DVM Agent	Yes
Required for configuring remote access and policy managements	HyWorks DVM Tools Windows Installer

OR

Linux package	On all virtual machines
USB Redirection Software	Optional
Required for USB device sharing	HyWorks DVM Tools Windows Installer

OR

Linux package	On all virtual machines
Accops User Experience Manager (AUEM)	Optional
Required for System Monitoring, user experience management, user notification and event monitoring	HyWorks DVM Tools Windows Installer or Accops HyWorks Session Host Installer for Windows	On all virtual machines and session host server
Accops USB Cleaner	Optional
Required for Cleaning USBs on logout	HyWorks DVM Tools Windows Installer	On all virtual machines
Dvmtool Assistive Package

Yes
Required for configuring vanilla Ubuntu/CentOS VM to use them for desktop/app session delivery	Dvmtool Assistive Package	On all virtual machines
Accops Session Recording	Automatically installed with "Session Host" installer or "DVM Tools" installer
Required for User Session Recording	HyWorks DVM Tools Windows Installer

OR

Session Host Installer	On all virtual machines
Accops Session Server Extension	Automatically installed with "Session Host" installer
Option to explicitly installed from DVM Tools

Required for Accops Printing	HyWorks DVM Tools Windows Installer OR Linux package

OR

Session Host Installer	On all virtual machines
Accops Network Monitoring Driver	Automatically installed with "Session Host" installer
Option to explicitly installed from DVM Tools

Required for monitoring network activities from virtual desktops	HyWorks DVM Tools Windows Installer OR Linux package

OR

Session Host Installer	On all virtual desktops
Additional Components for Scaling or Special Features
Component	Required	Installer	Installation Platforms
HyWorks VM Scale Booster	Optional Required for boosting VM scale handling	VM Scale Booster Installer	Independent Windows Servers. External load balancer is needed for having Scale booster high availability.
Accops HyWorks Scheduler and Action Processor	Required for automatic provisioning and power management of shared hosted desktops. Important for saving costs for VDI on cloud.	HyWorks Scheduler
HyWorks Action Processor	On HyWorks Controller Management nodes
Accops HyWorks Session Recording Manager [SRMS]	Required for recording and viewing of sessions in HyWorks deployments	SRMS Installer	Independent Windows Servers. External load balancer is needed for having Scale booster high availability.


Supported Versions Matrix
HyWorks Platform Components
Components page provides information about supported platform and versions for various HyWorks Platform Components.

HyWorks Clients
Latest HyWorks desktop clients are listed here on Accops official website: https://www.accops.com/product-software > Download Clients > HyWorks Clients (Latest Versions)

Below given table lists the versions of the currently available HyWorks Clients and supported platform, operating system and their version required for installing Clients.

HyWorks Client Version	Supported Platform / OS	Supported Platform / OS Version
328222	Windows	Windows 10
Windows 7-SP1
329150	Linux (64-bit)
- Ubuntu / xUbuntu	Ubuntu LTS 20.04
Ubuntu LTS 18.04
Ubuntu LTS 16.04
Ubuntu Mate 16.04.6
Ubuntu Boss 8.0
xUbuntu 18
329151	Linux (32-bit)
- Ubuntu / xUbuntu	Ubuntu LTS 18.04
Ubuntu LTS 16.04
Ubuntu Mate 18.04.4
xUbuntu 18.04
xUbuntu 16.04
329015	MAC	Monterey 12.4,
Big Sur 11.4,
Catalina 10.15
Supported Virtualization Platforms
HyWorks supports following types of delivery modes. Below given are the supported platform, operating system and their version for each of these delivery modes.

Pooled Virtual Applications

Pooled Virtual Desktops

Personal Virtual Desktops

Pooled Virtual Applications
HyWorks can be used to virtualize and deliver applications to end-users from both Windows and Linux platforms. Listed below are the supported Windows and Linux servers and versions:

Windows - Pooled Apps

-   Windows Server 2022

-   Windows Server 2019 (essential not supported)

-   Windows Server 2016

-   Windows Server 2012 R2

-   Windows Server 2008 R2-SP1

-   Windows Server 2003 (limited features supported)

-   Windows 10 Multi-session
Note

Sometimes multiple connections to Windows server 2022 does not work and the same can be resolved using steps provided in the article HyWorks - 3.4 Webhelp > Knowledge Base Articles > Application Delivery > Resolve Unable to Connect Multiple Users on Windows 2022.
Linux - Pooled Apps

-   Xubuntu 20.04.0/1 (Legacy Kernel)

-   Xubuntu 18.04.0/1 (Legacy Kernel)

-   Xubuntu 16.04.0/1 (Legacy Kernel)
Note

HyWorks supports OS versions with point 0/1 only, having Non-HWE kernel. OS versions with HWE kernel are not supported.

Make sure to install only point 0/1, any other version may cause package/tools installation issues and will result in apps/desktop delivery failure.

Pooled Virtual Desktops
This delivery mode is also popularly known as Shared Hosted Desktop (SHD). HyWorks can be used to virtualize and deliver shared hosted desktops to end-users from Linux and Windows servers. Listed below are the supported Windows and Linux servers and versions:

Windows - Pooled Desktops

-   Windows Server 2022

-   Windows Server 2019 (essential not supported)

-   Windows Server 2016

-   Windows Server 2012 R2

-   Windows Server 2008 R2-SP1

-   Windows Server 2003 (limited features supported)

-   Windows 10 Multi-session
Note

Sometimes multiple connections to Windows server 2022 does not work and the same can be resolved using steps provided in the article HyWorks - 3.4 Webhelp > Knowledge Base Articles > Application Delivery > Resolve Unable to Connect Multiple Users on Windows 2022.
Linux - Pooled Desktops

-   Xubuntu 20.04.0/1 (Legacy Kernel)

-   Xubuntu 18.04.0/1 (Legacy Kernel)

-   Xubuntu 16.04.0/1 (Legacy Kernel)
Note

HyWorks supports OS versions with point 0/1 only, having Non-HWE kernel. OS versions with HWE kernel are not supported.

Make sure to install only point 0/1, any other version may cause package/tools installation issues and will result in apps/desktop delivery failure.

Personal Virtual Desktops
This delivery mode is also popularly known as Dedicated Desktop. HyWorks can be used to virtualize and deliver personal desktops to end-users. These can either be Windows or Linux based desktops. Personal virtual desktop deliveries can be done from the following hypervisors:

Hypervisor Platforms - Personal Desktops

-   VMware ESXi/vCenter Server 5.5/6.0/6.5/7.0

-   Microsoft Hyper-V 2012 R2, 2016, 2019

-   Microsoft SCVMM - 2016, 2019

-   Nutanix AHV PE 6.5, PE 5.8.2, PE 5.10, PE 5.11

-   Nutanix Prism Central PC 2022.4.0.2, PC 5.8.2
Cloud Providers - Personal Desktops

-   Microsoft Azure

-   Amazon Web Services (AWS)

-   Oracle Cloud Infrastructure (OCI) [Beta]
HyWorks supports following Linux and Windows desktop OSes as personal virtual desktops:

Windows - Personal Desktops

-   Windows 11

-   Windows 10 (32-bit and 64-bit)

-   Windows 10 Multi-Session (Azure)

-   Windows 8.1 (32-bit and 64-bit)

-   Windows 7 SP1 (32-bit and 64-bit)

-   Windows Server 2022

-   Windows Server 2019

-   Windows Server 2016

-   Windows Server 2012 R2

-   Windows Server 2008 R2-SP1
Note

Windows 7 SP1 (32-bit and 64-bit) requires some additional pre-requisites Windows security patch to be configured as a Gold image.

Linux - Personal Desktops

-  Xubuntu 20.04.0/1 (Legacy Kernel)

-  Xubuntu 18.04.0/1 (Legacy Kernel)

-  Xubuntu 16.04/1  (Legacy Kernel)

-  Ubuntu-GNOME 20.04/1-x64

-  Ubuntu-GNOME 18.04/1-x64

-  Ubuntu-GNOME 16.04/1-x64

-  Ubuntu BOSS v8

-  RHEL 7.9
Note

HyWorks supports only listed Linux flavors and OS versions, any other version or flavor will result in installation and delivery issues.
Physical Desktops

- Physical PCs

- Virtual desktops other than the supported virtualization platforms
HySecure Clients
Latest HyWorks desktop clients are listed here on Accops official website: https://www.accops.com/product-software > Download Clients > HySecure Clients (Latest Versions) Below given table lists the versions of the currently available HySecure Clients and supported platform, operating system and their version required for installing Clients.

HySecure Client Version	Supported Platform / OS	Supported Platform / OS Version
5.2.3.8112	Windows	Windows 10,
Windows 7-SP1
5.1.4.16	Linux (32-bit / 64-bit)	Same as for HyWorks Clients
5.1.6.0	MAC	Monterey 12.4,
Big Sur 11.1,
Catalina 10.15


Quick Start Workflow
To start using HyWorks to deliver virtual applications and desktops, you will need to understand and plan to install and enable server- and client-side components, install third-party software to meet prerequisites and finally configure session delivery mechanism.

Understanding
Understanding Components
Planning
Preparing your environment

There are several prerequisites and configurations that you must consider before deployment. Pre-requisites lists the software that you must install before installing HyWorks.

Capacity Planning and sizing

Determining required capacity for implementation of HyWorks is crucial to achieve performance and smoothly running VDI systems. Planning a deployment with scale in mind is the first step and the typical approach is to estimate the concurrent user load on servers.

Sizing provides guidance for estimating the hardware requirement for each component.

Required configuration describes the operating system and other software requirements.

Planning for High Availability

Decide Deployment Type

Decide Authentication mode. If you decide not to use built-in authentication mode, make sure Active Directory or LDAP is installed.

Choose Session Delivery method

Application Delivery (Pooled Virtual Application)

Decide the OS on which applications need to be delivered: Windows or Linux

Shared Hosted Desktop (Pooled Virtual Desktop)

Decide the OS which needs to be delivered: Window or Linux

Dedicated Desktop (Personal Virtual Desktop)

Decide the hosting platform: Hyper-V, VMWare or Nutanix

Decide the OS which needs to be delivered: Windows or Linux

Installation
Ensure that all the relevant HyWorks components are installed.

Session Delivery
Once the product is installed, check the Session Delivery Workflow and follow the OS-specific steps for configuration:

Windows Based Delivery
Linux Based Delivery

Accops HyWorks Deployment Options
Accops HyWorks v3.3 can deliver applications, shared hosted desktops or dedicated desktops in:

LAN - Users can directly reach control layer and data layer

WAN - recommended when users have to access resources over the internet

Deployment in LAN Environment
Deployment of HyWorks in LAN, MPLS WAN or P2P WAN requires:

HyWorks Controller installed and available in the LAN

Firewall or third-party software should not be blocking HyWorks Controller.

HyDesk or HyWorks Clients are installed and running in the same network and should be able to:

Detect and connect HyWorks Controller using UDP discovery method

Connect to a HyWorks Controller through configured IP address

Dedicated Desktops:

HyWorks Controller and Session Providers like VMware vCenter Server or Microsoft SCVMM Server and authentication servers like Microsoft Active Directory or LDAP must be in the same network and reachable.

DVMs running on Session Providers must be reachable to HyDesk/HyWorks Client devices.

Shared Hosted or Desktops:

HyWorks Session Host server must be installed on Microsoft RDS server and is configured in HyWorks.

HyWorks Session Host server must be directly accessible from HyWorks/HyDesk client.

Below given deployment image shows the placement of Accops HyWorks. The device should be able to talk to the Accops HyWorks Controller on port 38866 and to the virtual machine on TCP port 3389.

A screenshot of a cell phone Description generated with very high
confidence

Deployment in WAN Environment
To access applications, shared hosted desktops or dedicated desktops it is ncessary to connect with Accops HyWorks Controller, Session host and DVMs. This is not possible when users access resources over the internet (WAN) or are not part of your . To provide access in such scenarios HyWorks needs to be integrated with Accops HySecure. You can also use your own VPN but certain security features and single sign-on offered by HySecure will not be available.

Once HyWorks and HySecure are integrated:

HySecure acts as an gateway and users can connect to the VM through the HySecure gateway

Devices over the internet can directly access HySecure Gateway using Public IP address

HySecure Gateway is configured to have applications as

HyWorks Controller (Port:38866). HyWorks Controller has pre-set configuration i.e. Session host Servers, Authentication servers, Session Teams, Applications, Desktop Pools, assignments etc.

HyWorks Application Servers (3389) for applications and shared desktop access

Below given deployment diagram showing how HySecure and HyWorks can be integrated.

A screenshot of a cell phone Description generated with very high
confidence




Sizing
The size of hardware, on which HyWorks is to be installed, is determined based on HyWorks components that are required to be installed and their performance like login time, device operations, management console performance. Below give tables will help you estimate the size.

HyWorks Controller
Concurrent Users	Units	vCPU	Cores per CPU	RAM	HDD	Local DB
250	2	4	1	4	100	SQL Express
500	2	4	1	8	100	SQL Express
1000	2	8	2	16	100	SQL Express
2000	2	8	2	16	100	External
4000	3	8	3	16	100	External
5000	4	8	4	16	100	External
10000	6	8	5	16	100	External
HyWorks Database
Concurrent Users	Units	vCPU	Cores per CPU	RAM	HDD	DB
Up to 2000	2	8	4	16	100	SQL Express or higher (Local)
4000	3	8	4	16	100	SQL Advanced or higher (External)
5000	3	8	6	16	100	SQL Always ON Cluster (External)
10000	3	16	6	16	100	SQL Always ON Cluster (External)
HyWorks USB Redirection
Concurrent Users	Units	vCPU	Cores per CPU	RAM	HDD
500	1	2	0.5	4	100
1000	1	4	1	8	100
2000	1	8	2	16	100
4000	1	8	4	16	100
5000	1	8	6	16	100
10000	1	8	8	16	100
Accops Reporting Server
Concurrent Users	Units	vCPU	Cores per CPU	RAM	HDD
500	1	4	0.5	8	100
1000	1	4	1	8	150
2000	1	8	2	16	200
4000	1	8	4	16	500
5000	1	8	6	32	750
10000	1	8	8	16	1536
File Server
Concurrent Users	Units	vCPU	Core	RAM	HDD
1	2	2	0.5	4	100
250	2	4	1	4	100
500	2	8	2	8	100
1000	2	8	4	16	100
2000	2	8	6	24	100
4000	2	8	8	32	100
5000	2	8	8	32	100
10000	2	8	8	32	100
Note:

Minimum recommended configuration for HyWorks Controller is 4GB RAM/ 4 vCPUs and then can be configured as per requirement.
Parallel user onboarding rate also affects overall performance of the system and thus the attribute of login per second must be considered during planning phase. For deployments, having higher login per second e.g., 6 user per second or greater, should consider having premium SSDs and higher resource configurations for database servers.
It is recommended to configure VM Scale Booster, when Managed SHDs are more than 50 or powered ON DVMs are more than 500.




Pre-requisites
System Requirements
Ensure that the following system requirements are met and the necessary software are already installed.

Hardware Requirements

Software Requirements

Database Requirements

Port Requirements
Different HyWorks modules use different ports to deliver application and desktop sessions to the users. HyWorks uses designated ports for communication. Below given table lists default ports that are required for communication which functionalities might not work if those ports are not open for communication.

From	To	Purpose	Port No.	Protocol	Customizable	Mandatory	If port not open
HyWorks Controller Management Node - 1	HyWorks Controller Management Node - 2	Clustering	38866	TCP	No	Yes	Cluster and high availability will not work.
HyWorks Controller Management Node - 1	HyWorks Controller Management Node - 2	Monitoring	38870	TCP	No	Yes	Resource consumption of other nodes will not be visible
HyWorks Controller Management Node - 2	HyWorks Controller Management Node - 1	Clustering	38866	TCP	No	Yes	Cluster and high availability will not work.
HyWorks Controller Management Node - 2	HyWorks Controller Management Node - 1	Monitoring	38870	TCP	No	Yes	Resource consumption of other nodes will not be visible
HyWorks Management Nodes	HyWorks Session or Broker Nodes	Clustering	38866	TCP	No	Yes	Controller clusering will not work.
HyWorks Management Nodes	HyWorks Session or Broker Nodes	Monitoring	38870	TCP	No	Yes	Resource consumption of other nodes will not be visible
HyWorks Session or Broker Nodes	HyWorks Management Nodes	Clustering	38866	TCP	No	Yes	Controller clusering will not work.
HyWorks Controller Management Nodes	SQL Server	Service Database (R/W)	1433	TCP	Yes	Yes	HyWorks controller will not work without database connectivity
HyWorks Controller Broker Nodes	SQL Server	Service Database (R/W)	1433	TCP	Yes	Yes	HyWorks controller will not work without database connectivity
HyWorks Controller Management Nodes	SQL Server (Logs)	Log database (R/W)	1433	TCP	Yes	Yes	Logs will not be pushed to SQL server and will not be visible on management console
HyWorks Controller Broker Nodes	SQL Server (Logs)	Log database (R/W)	1433	TCP	Yes	Yes	Logs will not be pushed to SQL server and will not be visible on management console
HyWorks Controller Management Node - 1	SQL Server (Management Node -2 )	Database syncing	1433	TCP	Yes	Yes	Database syncing will not work. Applicable in case of HyWorks managed database high availability.
HyWorks Controller Management Node - 2	SQL Server (Management Node -1 )	Database syncing	1433	TCP	Yes	Yes	Database syncing will not work. Applicable in case of HyWorks managed database high availability.
HyWorks Controller Management Nodes	AD/LDAP	User authentication, authorization	389, 636	LDAP	No	Yes	Management node will not be able to communicate with AD and/ or authenticate/authorize users.
HyWorks Controller Broker Nodes	AD/LDAP	User authentication, authorization	389, 636	LDAP	No	Yes	Broker nodes will not be able to communicate with AD and/ or authenticate/authorize users.
HyWorks Controller	HyWorks Session Host	Session Info	38871	HTTPS	No	Yes	SHD and application will fail to launch or will be rendered slowly
HyWorks Controller	HyWorks Session Host	Load Info	38870	HTTPS	No	Yes	Resource based load balancing functionality will not work
HyWorks Controller	HyWorks Session Host	RDP Service check	3389	TCP	No	Yes	Status of RDS service will not checked
HyWorks Controller	HyWorks Session Host	Desktop agent communication	38863	TCP	No	Yes	For system customization and agent communication
HyWorks Session Host	HyWorks Controller	Session Status	38866	HTTPS	No	Yes	Application will fail to launch
HyWorks Controller	Desktop Virtual Machines (DVMs)	Agent communication: DVM Status, Sysprep	38863	HTTPS	No	Yes	Sysprep of clone VM will fail, Workgroup login will not work
HyWorks Controller	Desktop Virtual Machines (DVMs)	Remote Connection Availability check	3389	TCP	Yes	Yes	RDP readiness of VM will not be checked
Virtual Desktop VMs	HyWorks Upgrade Service	DVM Tools Upgrade	38865	HTTPS	No	No	DVM Tools will not upgrad
Virtual Desktop VMs	HyWorks Controller Server	Response to Controller Communication	38866	HTTPS	No	No	Response from DVM agents will not be received and functional failures may occur
HyWorks Controller	Hyper-V Connector	Hyper-V VM Management	38864	HTTPS	No	Yes	Hyper-V VM will not be connected
HyWorks Controller	VMWare vCenter/ESX	VMWare VM Management	443	HTTPS	On VMWare	Yes	VMWare VMs will not be connected
HyWorks Controller	Nutanix AHV Server	Nutanix Management	9440	HTTPS	On Nutanix	Yes	Nutanix VMs cannot be connected
HyWorks Controller	Azure Portal	Azure Integration	443	HTTPS	No	Yes	Azure connector can not be used for app or desktop delivery
HyWorks Controller	AWS Portal	AWS Integration	443	HTTPS	No	Yes	AWS can not be used for app or desktop delivery
HyWorks Controller	Oracle Cloud Infrastructure	Oracle Integration	443	HTTPS	No	Yes	Oracle can not be used for app or desktop delivery
HyWorks Controller	SMTP Servers	Mail notification	25,587,465	TCP	Yes	Yes	Mail notification will not be forwarded
Admin Browser	HyWorks Management Console Server	Web Management	443	HTTPS	No	Yes	Admin cannot do management
HyLabs (RMS Service/ Management Console)	HyWorks Controller Management Nodes	HyLabs	38866	HTTPS	No	Yes	For HyLabs delivery, HyLabs (RMS service) is deployed on separate Windows server with Management Console
User Browser	HyWorks Management Console Server (HyLabs portal)	HyLabs Web Portal	443	HTTPS	No	No	User will not be able to use browser to login and will have to login through Client
Virtual Desktop VMs	Accops MQ	Faster VM Status Updates	5672	HTTPS	No	No	Events will not be pushed to Accops MQ and VM Scale Booster functionality will not work
HyWorks VM Scale Booster	SQL Server	Service Database access	1433	TCP	No	Yes	Scale booster will not be able to update VM status in DB
HyWorks Client	HyWorks Controller	User login, Device management	38866	HTTPS	No	Yes	User will not be able to login, device management fails
HyWorks Client	HyWorks Controller	Access over WAN/Internet via Accops Proxy	38861	RDP	Yes	No	User will not be able to launch desktop/Applications over Internet/WAN when using HyWorks proxy
HyWorks Client	RDS Server Host	Remote Session login	3389	RDP	No	Yes	User will not be able to launch desktop/Applications
HyWorks Client	Hyper-V	Console Connect	2179	TCP	No	Yes	Hyper-V will not be able to connect to Console
HyWorks Client	vCenter/ ESXi Host	Console Connect/ Authentication	443	HTTPS	No	Yes	VMware will be able to connect to Console
HyWorks Client	ESXi Host	Console Connect/ Authentication	902	TCP	No	Yes	VMware will not be able to connect to Console
HySecure Gateway	HyWorks Controller	User login, app launch	38866	HTTPS	No	Yes	User app list fails, user app launch fails
HySecure Gateway	AD / LDAP	User authentication	389	LDAP	No	Yes	User authentication will fail
HySecure Gateway	AD / LDAP	Password Change	636	LDAP	No	No	Password change not possible
HySecure Client	HySecure Gateway	User login, app launch	443	HTTPS	Yes	Yes	User login fails
HyLite Portal	HySecure Gateway	User login, app launch	443	HTTPS	Yes	Yes	User login fails
HySecure Gateway	DVMs	RDP	3389	TCP	Yes	Yes	User will not be able to connect to reserved VMs
HySecure Gateway	HyWorks Web Server (HyLabs)	Connection to HyLabs	443	HTTPS	Yes	Yes	HyLite will not be able to get HyLabs Data
Desktop Virtual Machines	Session Recording Management Server (SRMS)	Recording upload	38893	TCP	No	Yes	Session recordings will not be uploaded to SRMS. Mandatory if session recordings to be done.
Session Recording Management Server (SRMS)	Accops MQ	HyWorks HA Status	5672	TCP	No	Yes	For HA of SRMS to get HyWorks Controller primary address. Mandatory if session recordings to be done.
Admin Browser	Session Recording Management Server (SRMS)	Streaming the recording.	38893	HTTPS	No	Yes	Streaming or viewing recordings. Mandatory if session recordings to be done.
Session Recording Management Server (SRMS)	SQL Server (Management Node -1 )	Read/ Write the recording details into HyWorks Controller DB	1433	TCP	No	Yes	Recording details will not be saved or fetched. Mandatory if session recordings to be done.
Session Recording Management Server (SRMS)	SQL Server (Management Node -2 )	Read/ Write the recording details into HyWorks Controller DB	1433	TCP	No	Yes	Recording details will not be saved or fetched. Mandatory if session recordings to be done.
Desktop Virtual Machines	Accops Reporting Server or Syslog Server	Sending network monitoring, file transfer logs to Syslog server	514	UDP	Yes	No	Data will not be sent to ARS server and logs can not be used for reporting or visulizations.
Desktop Virtual Machines	Accops Reporting Server	Sending AUEM and event details to ARS	9200	TCP	No	No	Relevant visulizations can not be created on ARS.
HyLabs Server-1 (Management Console + RMS Service)	HyLabs Server-2 (Management Console + RMS Service)	High availability of RMS Service	38868	TCP	No	No	For HyLabs delivery and high availability of HyLabs services
HyLabs Server-2 (Management Console + RMS Service)	HyLabs Server-1 (Management Console + RMS Service)	High availability of RMS Service	38868	TCP	No



Installation
Install all the necessary components

Controller

Session Host

DVM Tools

Hyper-V Connector

Ensure Session Providers such as VMware (ESXi or vCenter Server), Microsoft (Hyper-V or SCVMM), Nutanix (Prism Element or Central) are already installed and ready for use.

Make sure devices can connect to the HyWorks Controller on port 38866 and target DVM on port 3389.

Refer Prepare Windows Desktop VM section and Prepare Linux Desktop VM section for detailed instructions on prepare virtual machines for deployment in HyWorks Suite.


Prepare VMWare ESXi / vCenter
For smooth integration of VMWare ESXi or vCenter platform with the HyWorks Controller use the below given guidance:

Supported Versions

Supported Features Matrix

Pre-requisites

Installation of VMware Tools

Supported Versions
Provider	Supported Versions
VMware ESXi	7.0, 6.7, 6.5, 6.0, 5.5
5.0 (May require additional patching)
VMware vCenter Server	7.0, 6.7, 6.5, 6.0, 5.5
5.0 (May require additional patching)
Supported Features Matrix
Feature	Sub Feature Category	Sub Feature	vCenter Server	ESXi
Deploy pool with existing VMs	-	-	Yes	Yes
Desktop VM Provisioning	Clone Type	Linked Clone	Yes	No
Full Clone	Yes	No
Clone from Snapshot	-	Yes	No
Disk persistence	Persistent VM Deployment	Yes	No
Non-persistent VM Deployment	Yes	No
MAC Address Preserve		Yes	No
Desktop Power Operations	-	-	Yes	Yes
Operating Systems Support on Provider	Windows Desktops	Windows 7	Yes	Yes
Windows 8.1	Yes	Yes
Windows 10	Yes	Yes
Windows 11	Yes	Yes
Windows Servers	Windows Server 2008 R2-SP1	Yes	Yes
Windows Server 2012 R2	Yes	Yes
Windows Server 2016	Yes	Yes
Windows Server 2019	Yes	Yes
Windows Server 2022	Yes	Yes
Linux Desktops	CentOS 7	Yes	Yes
Ubuntu 16	Yes	Yes
Ubuntu 18	Yes	Yes
Ubuntu 20	Yes	Yes
BOSS OS v8	Yes	Yes
RHEL 7.9	Yes	Yes
HyLabs			Yes	No
Feature support matrix comparison between all Accops supported hypervisors.

Pre-requisites
Supported version of VMware/ vCenter Server is installed. Port 443 is used to connect to VMware servers

User account with required privileges of VMware servers is created. User must have permission to read all VMs information, create and delete resource pools, virtual machines and snapshot creation.

Important

If the configured user is not having enough privileges then the process of getting desktop details may fail, power operations and provisioning might get affected.

Install VMware Tools
For management of the VMWare vCenter based resources, install VMWare tools on the VMs which are to be delivered as dedicated desktops.

To configure VMWare management tools on Linux VM follow the steps given in section Linux VDI on VMWare vCenter.



Prepare Microsoft Hyper-V (Core / GUI) OR SCVMM
For smooth integration of Microsoft Hyper-v (Core / GUI) OR SCVMM platform with the HyWorks Controller use the below given guidance:

Supported Versions

Supported Features Matrix

Installation of SCVMM Tools

Pre-requisites

Supported Versions
Provider	Supported Versions
Microsoft Hyper-V (Core)	Windows Server 2016
Microsoft Hyper-V (GUI)	Windows Server 2012 R2
Windows Server 2016
Windows Server 2019
Microsoft SCVMM	Windows Server 2012 R2
Windows Server 2016
Windows Server 2019
Supported Features Matrix
Feature	Sub Feature Category	Sub Feature	SCVMM 2016/2019	Hyper-V 2016/2019
Deploy pool with existing VMs	-	-	Yes	Yes
Desktop VM Provisioning	Clone Type	Linked Clone	Yes	No
Full Clone	Yes	Yes
Clone from Snapshot	-	Yes	No
Disk persistence	Persistent VM Deployment	Yes	Yes
Non-persistent VM Deployment	Yes	No
MAC Address Preserve		No	No
Desktop Power Operations	-	-	Yes	Yes
Operating Systems Support on Provider	Windows Desktops	Windows 7	Yes	Yes
Windows 8.1	Yes	Yes
Windows 10	Yes	Yes
Windows 11	Yes	Yes
Windows Servers	Windows Server 2008 R2	Yes	Yes
Windows Server 2012 R2	Yes	Yes
Windows Server 2016	Yes	Yes
Windows Server 2019	Yes	Yes
Windows Server 2022	Yes	Yes
Linux Desktops	CentOS 7	Yes	Yes
Ubuntu 16.04/1	Yes	Yes
Ubuntu 18.04/1	Yes	Yes
Ubuntu 20.04/1	Yes	Yes
BOSS OS v8	Yes	Yes
Feature support matrix comparison between all Accops supported hypervisors.

Install SCVMM Tools
For the management of Microsoft Hyper-V based resources, install "Integration Services Setup" on the VMs, which are to be delivered as dedicated desktops.

Pre-requisites
Hyper-V Server:

Supported Hyper-V Server is installed

Accops Hyper-V Connector is installed on Hyper-V server in Hyper-V mode, configured and reachable from HyWorks Controller. Refer Hyper-V Connector Installation for details.

Port 38864 is used to connect to Hyper-V connector.
SCVMM Server:

Supported SCVMM Server is installed

Accops Hyper-V Connector is installed on SCVMM server in SCVMM mode, configured and reachable from HyWorks Controller. Refer Hyper-V Connector Installation on SCVMM for details.

Port 38864 is used to connect to Hyper-V connector.




Prepare Nutanix AHV
For smooth integration of Nutanix AHV Prism Element / Prism Central platform with the HyWorks Controller use the below given guidance:

Supported Versions

Supported Features Matrix

Installation of Nutanix Guest Tools

Pre-requisites

Supported Versions
Provider	<------------- Supported Versions ----------->
Nutanix AHV	PE v6.5(LTS), PE v5.11, PE v5.10, PE v5.8.2
Nutanix Prism Central	PC.2022.4.0.2, PCv5.8.2
Supported Features Matrix
Feature	Sub Feature Category	Sub Feature	Prism Central	Prism Element
Deploy pool with existing VMs	-	-	Yes	Yes
Desktop VM Provisioning	Clone Type	Linked Clone	Not Applicable	Not Applicable
Full Clone	Yes	Yes
Clone from Snapshot	-	Yes	Yes
Disk persistence	Persistent VM Deployment	Yes	Yes
Non-persistent VM Deployment	Yes	Yes
MAC Address Preserve	-	Yes	Yes
Desktop Power Operations	-	-	Yes	Yes
Operating Systems Support on Provider	Windows Desktops	Windows 7	Yes	Yes
Windows 8.1	Yes	Yes
Windows 10	Yes	Yes
Windows 11	Yes	Yes
Windows Servers	Windows Server 2008 R2	Yes	Yes
Windows Server 2012 R2	Yes	Yes
Windows Server 2016	Yes	Yes
Windows Server 2019	Yes	Yes
Windows Server 2022	Yes	Yes
Linux Desktops	Ubuntu 16.04/1	Yes	Yes
Ubuntu 18.04/1	Yes	Yes
Ubuntu 20.04/1	Yes	Yes
BOSS OS v8	Yes	Yes
RHEL 7.9	Yes	Yes
Nutanix Flow and categories	-	-	Yes	No
HyLabs			Yes	Yes
Feature support matrix comparison between all Accops supported hypervisors.

Install Nutanix Guest Tools
For better management of the Nutanix based resources, install Nutanix Guest tools on the VMs which are to be delivered as dedicated desktops.

Pre-requisites
Supported version of Nutanix prism central or prism elements already installed and configured. Port 9440 used to connect Nutanix servers should be reachable.

User account with required privileges of Nutanix servers is created. User must have permission to read all VMs information, create and delete resource pools and virtual machine.

If the configured user is not having enough privileges then the process of getting desktop details may fail, power operations and provisioning might get affected.



Prepare Azure
For smooth integration of Azure platform with the HyWorks Controller use the following guidance:

Supported Feature Matrix

Pre-requisites

Add URLs to whitelist in Firewall or Proxy server

Configure Controller for Domain Account Authentication in Proxy server

Desktop Operation Support

Limitation with Azure handler

Supported Feature Matrix
Feature	Sub Feature Category	Sub Feature	Azure
Deploy pool with existing VMs	-	-	Yes
Desktop VM Provisioning	Clone Type	Linked Clone	Not Applicable
Full Clone	Yes
Clone from Snapshot	-	No
Network Preserve	-	Yes
Disk Encryption	-	Yes
Disk persistence	Persistent VM Deployment	Yes
Non-persistent VM Deployment	No
Enable DVM Reset	No
Deployment Setting	Only resource group, not Location
Customization	Both (Sysprep and Hyprep)
IP Address Filter	Yes
Shared hosted desktop provisioning and automated deployment	Yes
Automated power management and scaling	Yes
Desktop Power Operations	-	-	Yes
Operating Systems Support on Provider	Windows Desktops	Windows 7	Yes
Windows 8.1	Yes
Windows 10	Yes
Windows 11	Yes
Windows Servers	Windows Server 2008 R2	Yes
Windows Server 2012 R2	Yes
Windows Server 2016	Yes
Windows Server 2019	Yes
Windows Server 2022	Yes
Linux Desktops	CentOS 7	Yes
Ubuntu 16.04/1	Yes
Ubuntu 18.04/1	Yes
Ubuntu 20.04/1	Yes
RHEL v7.9	Yes
Pre-requisites
Application ID:Application Id is unique identifier (GUID) of application which created and granted under tenant.

Secret:A client secret is a secret known only to your application and the authorization server. It protects your resources by only granting tokens to authorized requestors.

Tenant ID:tenant ID is a globally unique identifier (GUID) that is different than your tenant name or domain

Subscription ID:The subscription ID is a GUID that uniquely identifies your subscription to use Azure services

Configure Azure App
Sign in to your Azure Account through the Azure portal https://portal.azure.com/.

Select Azure Active Directory:https://portal.azure.com/#blade/Microsoft_AAD_IAM/ActiveDirectoryMenuBlade/Overview

Select App Registrations followed by New registration.

After setting the values, select Register.

Select your registered application followed by Certificates and secretc and create new secret and copy it.

Go to app overview and copy application ID, tenant Id, secret key and subscription ID.

Reference: https://docs.microsoft.com/en-us/azure/active-directory/develop/howto-create-service-principal-portal



Create Secret
Follow the below given steps to create secret for the configured app:

Select Azure Active Directory
From App registrations in Azure AD, select your application

Select Certificates & secret

Select Client secret > New client secrete

Provide description, check expiry and click Add.

After saving the client secret, the value of the client secret is displayed. Copy this value because you will not be able to retrieve the key later. Make copy (Save) of auto generated client secret key in personal vault.



Configure Access Control
To access resources in your subscription, you must assign a role to the application.

Select your Subscription on the Home page.
Select Access Control (IAM)

Go to Role Assignment and click Add. Select Role assignment.

Select Role as Contributor and set Assign access to as Azure Ad user, group and Service principle

Select your app

Select Save to finish assigning the role.



Note

It may take around 30 minutes for the above application Id to become active. If we configure application in HyWorks before it gets active, it will give Invalid credentials error in HyWorks.

Add URLs to whitelist in Firewall or Proxy server
If Firewall is used to control internet access and HyWorks is deployed behind an Firewall or proxy server, HyWorks controller will not have internet access. In this case you will have to whitelist following URLs in your firewall or allow access via proxy server:

https://login.microsoftonline.com
https://management.azure.com
Following URL to integrate with Azure automation

https://<workspaceId>.agentsvc.azure-automation.net
*.azure-automation.net
Port: Only TCP 443 required for outbound internet access
Configure Controller for Domain Account Authentication in Proxy server
Following configurations is required in Controller when proxy server is configured on the Controller and Azure-based Desktop Provider is used:

Install controller service using this account (not Local system account)
The account should configure as "Logon as Service"
Configuration can be done while installation or later
Specified account will be used to authenticate in proxy server
Whitelist URLs mentioned above.


Fig : Configuration post installation


<system.net>
    <defaultProxy> 
    <proxy usesystemdefault="true" /> 
    </defaultProxy> 
</system.net>
Verify above configuration in HyWorks controller
x:\Program Files (x86)\Accops\HyWorks\Service\EDC.Service.exe.config


Fig : Configuration file change

Note

You need to re-login to apply above changes.

Desktop Operation Support
Operation	Support	Status on Azure	Status on HyWorks
Power On	Yes	Powered On	Powered On
Power Off	Yes (Deallocated)	Deallocated	powered Off
Shutdown	Yes (Deallocated)	Deallocated	powered Off
Restart	Yes	Restart	Restart
De-allocate	Yes (Use power off)	Deallocated	powered Off
Reset	No	-	-
Refresh (Desktop Information on HyWorks)	Yes	-	Update VM details, call DVM agent
Re-Create (single VM from Desktop VMs page)	Yes	-	-
Limitation with Azure Handler
Non-deallocated Shutdown VM is shown as Powered Off. There is no difference between Non-deallocated vs Deallocated VM.

Change Location (current VM will be cloned in source VM location)

Gold Master Disk should be Managed disk.



Prepare AWS
To assist with a smooth integration of your AWS platform with the HyWorks Controller, use the following references:

Supported Feature Matrix

Pre-requisites

Configure Controller for Domain Account Authentication in Proxy server

Desktop Operation Support

Limitation with AWS Handler

Supported Feature Matrix
Feature	Sub Feature Category	Sub Feature	AWS
Deploy pool with existing VMs	-	-	Yes
Desktop VM Provisioning	Clone Type	Linked Clone	Not Applicable
Full Clone	Yes
Clone from Snapshot	-	No
Disk persistence	Persistent VM Deployment	Yes
Non-persistent VM Deployment	No
Enable DVM Reset	No
Deployment Setting	Only resource group, not Location
Customization	Both (Sysprep and Hyprep)
IP Address Filter	Yes
Shared hosted desktop provisioning and automated deployment	Yes
Automated power management and scaling	Yes
Desktop Power Operations	-	-	Yes
Operating Systems Support on Provider	Windows Desktops	Windows 7	Yes
Windows 8.1	Yes
Windows 10	Yes
Windows 11	Yes
Windows Servers	Windows Server 2008 R2	Yes
Windows Server 2012 R2	Yes
Windows Server 2016	Yes
Windows Server 2019	Yes
Windows Server 2022	Yes
Linux Desktops	CentOS 7	Yes
Ubuntu 16.04/1	Yes
Ubuntu 18.04/1	Yes
Ubuntu 20.04/1	Yes
RHEL v7.9	Yes
Pre-requisites
AWS Account ID: AWS Account ID is unique identifier of account which created and granted as an IAM User.

AWS Secret Key: A AWS secret is a password known only to your IAM User. It protects your resources by only granting tokens to authorized requestor.

AWS Access ID: Access key ID is part of Access keys.Access keys are long-term credentials for an IAM user. AWS Secret Key and AWS Access ID together form Access keys.

Region: Region is a physical location around the world where virtual Desktops will be stored.

Configure AWS IAM User
Log in here with your credentials: https://console.AWS.amazon.com/

Find the Identity and Access Management (IAM): https://console.AWS.amazon.com/iamv2/home?#/home

Go to Identity and Access Management (IAM)

Go to Users and click Add Users 

Add Username and Password and click "Next" 

Add User Permission:

AmazonEC2FullAccess
AWSConnector
ResourceGroupsandTagsEditorFullAccess


Save the Credentials and download the csv. 

Downloaded csv will contain the User Name (Application Id), Secret access key (Secret) and Access key ID (TenantId). 

Reference: https://docs.AWS.amazon.com/IAM/latest/UserGuide/id_users_create.html

Configure Controller for Domain Account Authentication in Proxy server
Make the following configurations in the Controller when you configure the proxy server on the Controller and AWS-based Desktop Provider is being used

Install the controller service using this account (not Local system account)

The account should configure as "Logon as Service"
Configuration can be done at the time of installation or later
The specified account will be used to authenticate through the proxy server
Whitelist URLs are mentioned above.


Fig : Configuration post-installation


<system.net>
    <defaultProxy> 
    <proxy usesystemdefault="true" /> 
    </defaultProxy> 
</system.net>
Verify above configuration in HyWorks controller
x:\Program Files (x86)\Accops\HyWorks\Service\EDC.Service.exe.config


Fig : Configuration file change

Note

You need to login again to apply the above mentioned changes.
Desktop Operation Support
Operation	Support	Status on AWS	Status on HyWorks
Power On	Yes	Powered On	Powered On
Power Off	Yes	powered Off	powered Off
Shutdown	Yes	powered Off	powered Off
Restart	Yes	Restart	Restart
Reset	No	-	-
Refresh (Desktop Information on HyWorks)	Yes	-	Update VM details, call DVM agent
Re-Create (single VM from Desktop VMs page)	Yes	-	-
Limitation with AWS Handler
Change the Location (the current VM will be cloned in the source VM location)

The Gold Master Disk should be a managed disk.




Prepare Oracle
To assist with a smooth integration of your Oracle platform with the HyWorks Controller, use the following references:

Supported Feature Matrix

Pre-requisites

Configure Controller for Domain Account Authentication in Proxy server

Desktop Operation Support

Limitation with Oracle handler

Supported Feature Matrix
Feature	Sub Feature Category	Sub Feature	Oracle
Deploy pool with existing VMs	-	-	Yes
Desktop VM Provisioning	Clone Type	Linked Clone	Not Applicable
Full Clone	Yes
Clone from Snapshot	-	No
Disk persistence	Persistent VM Deployment	Yes
Non-persistent VM Deployment	No
Enable DVM Reset	No
Deployment Setting	Only resource group, not Location
Customization	Both (Sysprep and Hyprep)
IP Address Filter	Yes
Shared hosted desktop provisioning and automated deployment	Yes
Automated power management and scaling	Yes
Desktop Power Operations	-	-	Yes
Operating Systems Support on Provider	Windows Desktops	Windows 7	Yes
Windows 8.1	Yes
Windows 10	Yes
Windows Servers	Windows Server 2008 R2	Yes
Windows Server 2012 R2	Yes
Windows Server 2016	Yes
Windows Server 2019	Yes
Linux Desktops	CentOS 7	Yes
Ubuntu 16	Yes
Ubuntu 16	Yes
Pre-requisites
Oracle Account ID: The Oracle Account ID is a unique identifier for your account, which is granted as an IAM user right.

Oracle Secret Key: The Oracle secret is a Fingerprint of the IAM User. It protects your resources by only granting tokens to authorized requestors.

Oracle Tenant ID: The Tenant ID is a globally unique identifier which is different than the tenant name or domain.

Provider Pem File: Provider Pem File is an RSA key in a PEM format used for signing API requests.

Region: The Region is a physical location around the world where the virtual desktops will be stored.

Configure Oracle IAM User
Log in here with your credentials: https://cloud.oracle.com/?tenant=ro***

Search for "Users" and click "Users" once you find it: 

Click "Create Users" 

Enter the User Name and Password 

Select "Created User" 

Click "API Keys" followed by "Add API Key" 

Download the Private Key and click "Add" 

Save the Configuration File Preview in Notepad for future reference 

Adding Users in Group
Search for "Groups" and click "Groups" once you find it: 

Click "Administrator Group" 

Click "Add User to Group" 

Add the User to Group 

Click on "IdP Mapped Groups and OCI_Administrator" 

Click "IDCS Group" 

Add the User to Group 

Click "Manage Service" 

Click "Manage service access" 

Update the Role Selections and Apply Role Setting 

Reference: https://docs.oracle.com/en-us/iaas/Content/GSG/Tasks/addingusers.htm

Configure Controller for Domain Account Authentication in Proxy server
Make the following configurations in the Controller when you configure the proxy server on the Controller and Oracle-based Desktop Provider is being used:

Install the controller service using this account (not Local system account)
The account should configure as "Logon as Service"
Configuration can be done at the time of installation or later
The specified account will be used to authenticate through the proxy server
Whitelist URLs are mentioned above.


Fig : Configuration post-installation


<system.net>
    <defaultProxy> 
    <proxy usesystemdefault="true" /> 
    </defaultProxy> 
</system.net>
Verify the above configuration within the HyWorks controller
x:\Program Files (x86)\Accops\HyWorks\Service\EDC.Service.exe.config


Fig : Configuration file change

Note

You need to re-login to apply above changes.
Desktop Operation Support
Operation	Support	Status on Oracle	Status on HyWorks
Power On	Yes	Powered On	Powered On
Power Off	Yes	powered Off	powered Off
Shutdown	Yes	powered Off	powered Off
Restart	Yes	Restart	Restart
Reset	No	-	-
Refresh (Desktop Information on HyWorks)	Yes	-	Update VM details, call DVM agent
Re-Create (single VM from Desktop VMs page)	Yes	-	-
Limitation with the Oracle Handler
Change the Location (the current VM will be cloned at the source VM location)

The latest Gold Master changes require manual intervention. Recompose and cloning uses Snapshot for ExpireSnapshotAfterLastUseInMin.

The old Snapshot is deleted when the time interval between current the Time and LastUsedTimeForCloning exceeds Time to Live (ExpireSnapshotAfterLastUseInMin). The old Snapshot deletion occurs with every new clone job.

Oracle Disk Snapshot Time To Live
In Oracle, a snapshot is used to clone the OS Disk and Data Disk. These Disks are deleted according to their time to live after cloning is complete. This deletion process depends on three Tags - two on the Gold Master Disk and one on Snapshot.
Gold Master Tags : 1. ExpireSnapshotAfterLastUseInMin (In min) (Default 48 hours): Reduce this time interval to reflect the latest Gold master changes applicable on Recompose and fresh cloning. 2. CreateNewSnapshot (Default False): This tag will force create a new snapshot with every cloning. Recommended to keep this tag set to "False".

SnapShot Tags : 1. LastUsedTimeForCloning (In Epoc): This is updated for the Snapshot every time a clone is created from this snapshot.

The Gold Master tag and snapshot tag are created at the first call of cloning the VM with the Default value. The Admin can change ExpireSnapshotAfterLastUseInMin and CreateNewSnapshot based on their requirements. The Admin can also add the ExpireSnapshotAfterLastUseInMin and CreateNewSnapshot tags before cloning with a desired value to the fresh Gold Master.



Supported Operating Systems
Supported Windows flavors in HyWorks

Windows 11

Windows 10 (32-bit and 64-bit)

Windows 10 Multi-Session (Azure)

Windows 8.1 (32-bit and 64-bit)

Windows 7 SP1 (32-bit and 64-bit)

Windows Server 2022

Windows Server 2019

Windows Server 2016

Windows Server 2012 R2

Windows Server 2008 R2-SP1

Note

Windows 7 SP1 (32-bit and 64-bit) requires some additional pre-requisites Windows security patch to be configured as a Gold image.


Software Installation
In order to deploy an existing DVM in HyWorks, some tools are required to be installed and a few software are required for better performance. Depending on your requirements you can choose to install all or specific applications.

Hypervisor Tools: Required, By Hypervisor tools, which means installing guest tools baed on the Hypervisor where the VMs reside. HyWorks fetches some critical details (such as the network configurations of VMs, etc.) from Hypervisors directly and these Hypervisor tools are required to enable that information.

VMware Tools: If you are using VMWare as the Session Provider, you must install VMware Tools on the DVMs (Desktop Virtual Machines) from VMware ESXi/vCenter Server.

Nutanix Guest Tools: If you are using Nutanix as the Session Provider, you must install Nutanix Guest Tools on the DVMs.

Hyper-V Integration Tools: If you are using DVMs from the Hyper-V, you must install Hyper-V Integration Tools on the DVMs.

Feature-specific Tools: Must

HyWorks DVM Agent: A critical HyWorks component which must be installed on the DVMs to avoid manual RDP configurations and enabling the DVM power policies.

Built-In USB Redirection Driver (Server Component): Integrated with HyWorks Tools and must be installed on DVMs, if USB redirection is required, and built-in USB Redirection Driver is used.

Enhanced USB Redirection Driver (Server): Must be installed, if the Enhanced USB Redirection Driver is used for USB redirection. It requires to be installed separately on remote desktop servers.

RDP8.0 Updates on Windows7 DVMs: Performance of a remote session can be improved by using the RDP8 protocol for session. To use the RDP8 protocol in the remote session, RDP8 patches must be installed and configured correctly. It must be installed if the following deployment configuration is used:

Target DVM is on Windows 7 OS

HyDesk devices are configured with the RDP8 Protocol

Connection profiles are using the RDP8 optimized options such as graphics accelerations.

Refer to the Install and Enable RDP8 on DVMs section for details.

Enable Audio and Audio Recording Devices
Enable Audio and Audio Recording Devices setting if the users are required to use audio and audio recording devices. To do so, appropriate settings must be configured on the target DVM. Refer to the Enabling Audio in Remote Session section for details.

Performance Improvement Recommendation

HyWorks USB Cleaner: Integrated in HyWorks Tools and must be installed if USB redirection is used. HyWorks USB Cleaner utility gracefully disconnects all the plugged-in USB devices, ensuring that in the next session, these USB devices will be shared correctly.
System Performance Improvements: System tweaks to improve overall performance of the system in order to support better remote session experience. Refer to the Customizations to Improve System Performance section for details.
Hypervisor Settings: A few Hypervisor settings can also be modified to have a better performance. Refer to the Hypervisor Settings to Improve Performance section for details.


Configuration Changes
This page describes configuration changes that are required to be done on the DVMs for performance enhancements or HyWorks deployment.

Enabling Audio in a Remote Session
Though audio is enabled in the HyWorks Controller Connection Profile and Device Settings, audio will not work until the following configurations are enabled on the virtual machine:

STEP 1: Starting the Windows Audio Service

The Windows audio service should be running.

To open Services, at the Run prompt, type Services.msc and press Enter

Make sure the status of the Windows Audio service is Started.



If the Windows Audio service is not running, change the Startup type option to Automatic and start the service.



STEP 2: Enabling the Audio and configuring the Audio playback quality in the remote session from the Group policy

Open the Run prompt, type mmc, and press Enter.

Add the Group Policy Object Editor snap-in.

Go to the Local Computer Policy > Computer Configuration > Administrative Templates > Windows Components > Remote Desktop Services > Remote Desktop Session Host.

In the Device and Resource redirection, enable the Allow Audio and Video Playback Redirection setting.

Enable Limit audio playback quality setting as per the requirement. The Playback Quality should be configured according to the HyWorks Controller Connection Profile.

Restart the virtual machine.

For details on the Audio configuration, refer to the Microsoft KB articles:

Enable Audio: VMware KB-1004839

Configure Audio Quality: Microsoft

Enabling the Microphone (Audio Recording Devices) in a Remote session
Open the Run prompt, type mmc, and press Enter.

Add the Group Policy Object Editor snap-in.

Go to Local Computer Policy > Computer Configuration > Administrative Templates > Windows Components > Remote Desktop Services > Remote Desktop Session Host.

In the Device and Resource redirection, Enable the Allow audio recording redirection setting.

Restart the virtual machine.

Enable the RDP 8 on DVMs
By default, HyWorks 3.3 uses the RDP 8 protocol. Therefore, for best performance all the DVMs should have the RDP 8 installed and enabled. A of operating systems and their respective processes to enable the RDP 8 in them has been given below:

Installing the RDP 8.0 on DVMs and supported Windows platform
Follow the steps given below to enable the RDP 8 on Windows 7x86 and Windows 7x64

Install the required updates/service packs on the target virtual machine

Install the pre-requisite hot-fix (KB2574819) using the Windows update (Refer to the following Microsoft KB article for the download details or for more information)

RDP 8.0 Hotfix: http://support.microsoft.com/en-us/kb/2574819

Install the RDP 8.0 update on Windows 7 using the Windows update (KB2592687)

RDP 8.0 Update: http://support.microsoft.com/en-us/kb/2592687

Windows Server 2008 R2 x64

RDP 8.0 Hot fixes (KB2574819 and KB2592687) are available for the Windows Server 2008 R2 also, but the server side enhancements are not applicable for the same. As such, remote session performance improvements will not be available when connecting to the Windows 2008 R2.

Windows 8, Windows 8.1, Windows 10 and Windows Server 2012 R2

The operating systems Windows 8, 8.1, Windows 10 and Windows Server 2012 R2 do not require any manual configurations and can be used with the default RDP configurations.

Enabling the RDP 8.0 on DVM
To enable the RDP 8.0 on a remote computer that's running Windows 7 SP1, follow the steps given below:

Install the appropriate version of the update package by running the Windows6.1-KB2592687 update file. (Refer to the above section: INSTALLING RDP 8.0 ON TARGET MACHINE for details)

Restart the computer.

Open the Local Group Policy Editor.

Enable the Remote Desktop Protocol policy. The setting for this policy is under the following node:

Computer Configuration\Administrative Templates\Windows Components\Remote Desktop Services\Remote Desktop Session Host\Remote Session Environment

Enabling UDP with TCP in a remote session can improve session performance significantly. To enable UDP, the RDP Transport policy must be enabled, and the value should be set to Use both TCP and UDP. The setting for the RDP Transport policy is under the following node:

Computer Configuration\Administrative Templates\Windows Components\ Remote Desktop Services\Remote Desktop Session Host\Connections

Important

Configuring the RDP Transport policy also lets the firewall allow UDP port 3389.

Currently HyWorks supports UDP packets only in remote sessions between Windows clients and Windows servers.

Restart the computer.



System Performance Improvements
Customizations to Improve System Performance
To improve overall system performance enable or disable the features listed below. These customizations should be used carefully, as disabling/enabling one or many features may conflict with user requirements.

Disable the Screen Saver on DVMs (Desktop Virtual Machines)
Disabling the screen saver on DVMs will help in improving the overall performance of the DVM and might improve the RDP performance as well. To disable the screen saver, go to Start > Control Panel > Appearance and Personalization > Change screen saver and select None from the Screen saver drop-down list.

Disable IPv6
IPv6 is enabled by default on VMs and can be disabled if the processes or applications are not using IPv6 schema. Disabling the IPv6 may help in improving the overall DVM performance. To disable the IPv6, refer to the following Microsoft KB article: https://support.microsoft.com/en-us/kb/929852

Disable Windows Updates
Keeping the Windows updates off can help in improving the overall performance. To disable Windows updates (Windows 7 or Windows 8.1) VMs:

Go to Start > Control Panel > System and Security > Windows Update > Change settings and click Never check for updates.

Note

The above steps are specific to Windows 7 and Windows 8.1 operating systems. For newer operating systems, it's respective configurations have to be configured.
The purpose of disabling the Windows updates is not to stop important and critical updates on the system. But these should be managed in a way, the updates are being pushed in non-working hours without affecting the system performance.
Disable Power Management
Power management should be kept disabled in order to improve overall performance of the system. To disable power management, go to Control Panel > Hardware and Sound > Power Options > Show Additional plans and choose High Performance.

Disable Auto Sleep
Auto Sleep should be kept disabled in order to improve the overall performance of the system. To disable power management, go to Windows Settings > System > Power & sleep and choose Never in Sleep drop-down.

Increase Virtual Memory
Virtual memory is used by Windows as RAM. As such, increasing it can help in improving the overall VM performance. Follow the steps given below to increase the virtual memory:

Go to Start > Control Panel > System and Security > System.

Click Advanced system settings.

Go to Performance > Advanced and click Settings.

Go to Virtual Memory > Advanced and click Change.

Specify the Custom size for the virtual desktop's virtual memory.

Disable Remote Assistance
If the feature is not being used, then keeping it disabled can help in improving the overall VM performance. Follow the steps given below to disable remote assistance:

Go to Start > Control Panel > System and Security > System.

Click Remote Settings link.

In the Remote Assistance > System Properties, clear the Allow Remote Assistance connections to this computer check box and click OK.

Using a mix of Visual Effects and Performance
The Windows operating systems come with many visual components, and the users may not be using all or any of them and as such, these configurations should be wisely configured so that a balanced performance and visual experience can be achieved. Follow the steps given below to change the visual experience configurations:

Open Start Menu, right-click on Computer and select Properties.

Click Advanced System Settings.

Go to System Properties > Advanced and click Settings.



To disable all the visual experience features, select the option Adjust for Best Performance or click Custom to choose your settings.

Disable Network Discovery
Follow the steps given below to disable the network discovery:

Go to Start > Control Panel > Network and Internet > Network and Sharing Center.

Click Change advanced sharing setting link.

Select the Turn off network discovery.

Disable Windows Defender
If the system is using a different Anti-virus than the Windows defender, the Windows Defender should be disabled in order to have only one such program scanning the system. Follow the steps given below to disable the Windows Defender:

Go to the Start menu and type Defender to search for the Windows Defender.

Click the Windows Defender application

Select Tools > Options from the Settings section.

Select the Administrator and clear the Use this program.

Click Save and Yes when prompted to make the change.

Disable Scheduled Disk Defragmentation
Follow the steps given below to disable the scheduled disk defragmentation to improving the overall performance of the system.

Go to the Start menu and type dfrgui to locate the defragmentation utility.

In the Optimize Drives window

Select the drive - click the Change Settings Configure schedule

In another Optimize Drives window, clear the Run on a schedule and click OK.

Note

We recommend to disable Scheduled defragmentation for the Linked Clones. Refer to the VMware article for details:

https://docs.vmware.com/en/VMware-Horizon-7/7.3/horizon-virtual-desktops/GUID-4CC1DFBC-A01A-4CC7-9A1F-09AD1A2C233A.html

Disable 'NOT REQUIRED' Services
Many of the system and application services are not used frequently and it is advisable to disable them. This helps in improving system performance.

Disable Indexing Service
Indexing service makes the Windows search faster. If the Windows search is not being used often, it's better to disable it and improve the overall performance of the VM.

Click Start, type services.msc and press Enter.

Locate the Windows Search service in the list of services, right click it and choose Properties.

In the General > Startup type, select the Disabled" from the dropdown list. Click Apply > OK to save the setting.

If the service it already running, you will have to stop the service.

Reboot the system.

Smart Card Device Enumeration Service
Locate and disable the Smart Card Device Enumeration Service using the same process as described to Disable the Indexing Service.

Other Services
As specified in the above sections, the user should identify services which are not used and should disable them manually to improve system performance.



HyperVisor Settings to Improve Performance
The virtual machine settings on the host Hypervisors can aid in achieving better performance.

Network Configuration -- Using VMXNET3
Configuring the virtual machines to use VMXNET3 network adapters instead of EI3000 improves the performance significantly and should be used for all the guest OS unless it causes any driver-specific issues.

Refer to the VMware KB Article for details:

VMware KB Article - 1001805

For changing the existing network adapter of a VM to VMXNET3, refer to the article:

Change the Network Adapter to VMXNET3 for the Windows Guest

Reserved Video Memory
For running videos in a remote session of the VMs on VMware, allocating the appropriate video memory helps significantly in improving the video performance.

Follow the steps listed below to change the video memory:

Connect to the ESXi or the vCenter Server from the vSphere client using Admin credentials.

Shutdown the virtual machine.

Right click the virtual machine and select the Edit Settings.

Click Hardware > Video Card and select the Specify custom settings and specify:

Number of Displays

Total Video Memory (as per the recommendations given in the VMware wizard)

Click OK.

Power On the virtual machine.




HyWorks Controller Changes
The HyWorks Controller is a feature rich product with the number of configurations to configure user- and device- specific settings to support specific features. Such settings can be enabled or disabled to improvise the performance of session.

Connection Profiles
Connection Profiles are powerful configurations that can be used to customize the overall remote session performance.

As such, it is important to use appropriate connection profiles according to the capabilities of the client/server systems and deployment needs.

The HyWorks Controller provides system defined connection profile templates, which can be used in specific environments for optimized performance and stable remote sessions.

For example, RDP10 For Low/Good Bandwidth Profile: Recommended connection profile for Windows10 or Windows Server 2k16 connected from HY4k/HY5k or Ubuntu Client with RDP10.

Refer to the Connection Profiles section for details.


Supported Operating Systems
Supported Linux OS Flavors in HyWorks for Pooled Apps and Shared Hosted Desktops

-   Xubuntu 20.04.0/1 (Legacy Kernel)

-   Xubuntu 18.04.0/1 (Legacy Kernel)

-   Xubuntu 16.04.0/1 (Legacy Kernel)
Note

HyWorks supports OS versions with point 0/1 only, having Non-HWE kernel. OS versions with HWE kernel are not supported.

Make sure to install only point 0/1, any other version may cause package/tools installation issues and will result in apps/desktop delivery failure.

Supported Linux OS Flavors in HyWorks for Personal Virtual Desktops

-  Xubuntu 20.04.0/1 (Legacy Kernel)

-  Xubuntu 18.04.0/1 (Legacy Kernel)

-  Xubuntu 16.04/1  (Legacy Kernel)

-  Ubuntu-GNOME 20.04/1-x64

-  Ubuntu-GNOME 18.04/1-x64

-  Ubuntu-GNOME 16.04/1-x64

-  Ubuntu BOSS v8

-  RHEL 7.9
Note

HyWorks supports only listed Linux flavors and OS versions, any other version or flavor will result in installation and delivery issues.


Prepare an Ubuntu-based Shared Session Provider
This page describes the details of preparing an Ubuntu-based Shared Session Host provider, which can be used to deliver Virtual Ubuntu-based desktops and applications via the HyWorks Controller.

The following steps are involved to setup and configure a Linux Server for Shared Hosted Desktop delivery.

Required Packages

Linux SHD - OS Installation Process

Dependency Package Installation - Conditional

Configurations and Environment Preparation

Troubleshooting

Required Packages
The deployment of Linux-based desktops or applications will require the following packages to be installed and configured:

Linux Shared Hosted Desktops and Applications

Appropriate Linux OS Flavor Installation: HyWorks supports delivery of apps and pooled desktops from the Linux flavors listed here

DVM Tools Dependency/Assistive Package Installation Must be installed after successful installation of a supported Linux flavor and version. The package installs the following components:

All dependency packages required for HyWorks deployments

HyWorks DVM Tools for Linux

Note

The dependency package installation requires internet access to download dependencies. Any issues with package installation may result in a faulty setup, causing failures in the delivery of virtual apps and pooled desktops.
Optional - HyWorks DVM Tools for Linux: The Dependency package contains the DVM Tools. However if new DVM tools are available, then it is recommended to upgrade DVM Tools to the latest version available.
Refer sections How to Get Linux SHD Packages and Getting Version of HyWorks DVM Tools - Linux to check for the latest available versions and currently running versions on the Linux server.

Step#1: Getting Linux OS and Installation
Download the supported Linux OS ISO from official websites.

Follow standard installation procedure to get base server ready for apps and pooled desktops delivery

Step#2: Getting Linux SHD Packages
Refer to the information about the latest HyWorks release on the Accops official website or Accops Support portal to download the following:

Linux Dependency Packages for Ubuntu

Latest DVM Tools for Linux

Step#3: Accops Dependency Package Installation
Refer to the Accops website and Accops support portal for the latest releases of the Accops Linux Dependency packages.

To see the details for the current installed packages, execute the following commands:

\~\$ cat /opt/Accops/linuxVDIVersion.txt

Output will be shown in the following format:

[LinuxVDI]

OSname=AccopsLinuxVDI

Version=u9

BuildDate=09122020

The tag BuildDate indicates the dependency package version.

If the latest dependency package is available and needs to be installed, refer to Accops Dependency Package Installation to install dependency packages on the Linux server.

Step#4: Configurations and Environment Preparation
Basic Configuration
Follow the steps provided in Basic Configuration Environment Preparation for performing basic configuration steps for authentication.

Advance Configurations
Some deployment-specific or feature-specific configurations are provided within Linux VDI Advance Configuration Document. These configurations are not mandatory but can be configured based on the requirements.

Troubleshooting
Refer to the Troubleshooting and basic HowTos section for detailed debugging steps and log file paths.


Ubuntu Gold Master Preparation
This page describes the steps to prepare a Gold Master image for cloning an Ubuntu server. The Gold Master image can be used to deliver Virtual Ubuntu-based desktops.

Refer to the sections below to setup and configure a Linux Server for desktop delivery:

Required Packages

Getting Ubuntu OS Image

Ubuntu OS VM Installation

Post OS Installation Configuration

Offline Package Installation

Configurations and Environment Preparation

Troubleshooting

Required Packages
A deployment of Linux-based desktops will require the following packages to be installed and configured:

Linux-based Dedicated Virtual Desktops

Linux OS ISO for OS Installation

Accops DVM Tools Dependency Packages:

Must have all the dependency packages for HyWorks deployments

HyWorks DVM Tools for Linux

Optional - HyWorks DVM Tools for Linux: If the dependency package does not contain the latest HyWorks DVM Tools for Linux

Step#1: Getting Ubuntu OS
For Ubuntu-based dedicated desktops: Download any of the following supported ISOs from their official websites. Below is the list of supported Ubuntu-based Linux OSes:


-  Xubuntu 20.04.0/1 (Legacy Kernel)

-  Xubuntu 18.04.0/1 (Legacy Kernel)

-  Xubuntu 16.04/1  (Legacy Kernel)

-  Ubuntu-GNOME 20.04/1-x64

-  Ubuntu-GNOME 18.04/1-x64

-  Ubuntu-GNOME 16.04/1-x64

-  Ubuntu BOSS v8
Note

HyWorks supports only listed Linux flavors and OS versions, any other version or flavor will result in installation and delivery issues.
Step#2: Brief Ubuntu OS Installation Process
For Linux dedicated VDI deployments, Ubuntu or CentOS can be installed as a VM on hypervisors supported by HyWorks. Follow the steps included below to install the Ubuntu-GNOME ISO that was downloaded in Step# 1 on any hypervisor:

After booting the VM with installation media (Image downloaded in step 1), select the Install Ubuntu-GNOME option

Choose the language for the setup UI

Do not change the default option on the Preparing to install ubuntu screen

Select Installation Type: Erase disk and install Ubuntu GNOME

Select the Time zone and Keyboard layout

Enter the username, machine and password in the fields for Who are you?

Once installation is complete, restart the VM

When the VM reboots, a prompt to remove media will be displayed. Press Enter and follow the instructions displayed on the screen.

Step#3: Post OS-Installation Configurations
Follow the steps provided in the Post OS-Installation Configurations section for configurations needed post-OS installation.

Step#4: Accops Assistive Package Installation
Follow the steps provided in the Accops Assistive Package Installation section to install offline packages on an Ubuntu server.

Step#5: Configurations and Environment Preparation
Follow the steps provided in the Basic Configuration for Environment Preparation section for basic configuration steps for authentication.

Troubleshooting
Refer to the Troubleshooting and basic HowTos section for detailed debugging steps and the paths for the log file.


RHEL/Cent OS Gold Master Preparation
This page describes the steps to prepare a Gold Master image for a Cent OS server for cloning. The Gold Master image can be used to deliver Virtual Cent OS-based desktops.

Refer to the sections below to setup and configure a Linux Server for desktop delivery:

Required Packages

Getting OS Image

RHEL/CentOS VM Installation

Post OS Installation Configurations

Accops Dependency Package Installation

Configurations and Environment Preparation

Troubleshooting

Required Packages
A deployment of Linux-based desktops will require the following packages to be installed and configured:

Installing Linux-based Dedicated Virtual Desktops

Assistive/Dependency Packages:

Must have the dependency packages for HyWorks deployments

HyWorks DVM Tools for Linux

Optional - HyWorks DVM Tools for Linux: If the assistive package does not contain the latest HyWorks DVM Tools for Linux

Step 1: Getting RHEL/CentOS
Visit the official website for RHEL or CentOS to download ISOs of the supported versions. The supported versions are listed below:


-  RHEL v7.9
Note

HyWorks supports only listed Linux flavors and OS versions, any other version or flavor will result in installation and delivery issues.
Step 2: RHEL/CentOS VM Installation
RHEL Installation
There are no special instructions involved in the installation of RHEL. The standard steps provided on the official RHEL website should be followed.

CentOS Installation - Package Selection and Configuration during OS Installation
The following packages must be selected during the installation of the CentOS image as HyWorks package has dependencies with them. To change the selected package, contact the Accops team.



Network Configuration
It has been observed that the CentOS network is not connected by default. The network will have to be enabled to connect automatically during installation. Follow the steps listed below to enable the network to connect automatically:

Click Network & Hostname



In the Hostname field, specify your system's FQDN (Fully Qualified Domain Name). Click the Ethernet toggle switch to turn it ON. It will enable your Network interface.



If you have a functional DHCP server on your network, it will automatically configure all your network setting for enabled NIC, which should appear under your active interface.

Click Configure to change the network configuration

Select the checkbox Connect Automatically, under the General tab



Save the settings

Step 3: Post OS-Installation Configurations
Follow the steps provided in the Post OS-Installation Configurations section for configuration needed post-OS installation.

If CentOS VMs are used, disable libvirtd.service using these commands:

systemctl stop libvirtd.service
systemctl disable libvirtd.service

For RHEL/CentOS 6,7 systems interfaces, virbr0 has an IP address of range 192.168.x.x assigned to it. When this image is used in VMware, multiple IPs are reported.

Having multiple IPs can affect the functioning of HyWorks and HyLabs. It is required to disable the virbr0 interface. The steps listed below will disable the virbr0 interface:

Open terminal and run command:

sudo systemctl stop libvirtd.service

sudo systemctl disable libvirtd.service

Reboot the system to save the configurations.

Step 4: Accops Dependency Package Installation
Follow the steps provided in the Accops Assistive/Dependency Package Installation section to install dependency packages on the Ubuntu server.

Step 5: Configurations and Environment Preparation
Basic Configuration
Follow the steps provided in the Basic Configuration For Environment Preparation section for basic configuration steps for authentication.

The RHEL subscription must be set on prepared machines. Follow the standard RHEL process to update subscription details. Example steps are given here

Troubleshooting
Refer to the Troubleshooting and basic HowTos section for detailed debugging steps and the paths for the log file.



Pooled Apps & Desktops
As of date, delivery of pooled desktops and virtual apps are not supported from CentOS or RHEL based OSes.


Post OS-Installation Configurations
Following configurations should be done on Linux VDI servers:

Install Hypervisor Tools for Linux VDI as a VM
If the Linux VDI server is installed as a virtual machine running over hypervisor, install hypervisor tools on server.

Important

For name and procedure of installation, refer hypervisor documentation.

Make sure to install tools for Ubuntu-based VDI servers (i.e., Linux SHD server and Ubuntu-GNOME). Procedure for VMware and Hyper-V are listed below for reference.

For installation of Linux SHD on physical servers, this step is not required.

Linux VDI on VMware
Install Open VM tools to support VMware functioning. Refer KB article on how to install Open VM tools on Ubuntu: Install VMware Tools

Linux VDI on Microsoft Hyper-V or SCVMM Servers
Administrators can choose to install Hyper-V specific tools on Linux VMs using either of the two methods:

Accops Provided Script
By Manually Executing Commands
Using Accops Provided Script
Make sure Internet is accessible on the target Ubuntu VM

Open Terminal and change the directory to extracted dependency packages directory

cd Desktop/ubuntu16_dvmtool_assistive_online_installer_22022022_linuxvdi/

Locate the directory vm_tools

cd vm_tools/

Run the following script to install Hyper-V tools

sudo ./install_hyperv_tools.sh

The script automatically locates the appropriate version over the Internet and installs the tools.

Note

The machine will shut down automatically after the installation.
Use method Verify Hyper-V Tools Installation to confirm Hyper-V tools are running appropriately on VM.
By Manually Executing Commands
Use below specified commands to install Hyper-V tools:

Make sure Internet is available on target Ubuntu VM

Open Terminal and execute below given commands:

sudo apt-get clean

sudo apt-get update

sudo apt-get install --reinstall linux-tools-\$(uname -r) linux-cloud-tools-\$(uname -r) -y

sudo apt-get install -f

sudo shutdown -h now

VM will be powered off.

Use method Verify Hyper-V Tools Installation to confirm Hyper-V tools are running appropriately on VM.

Verify Hyper-V Tools Installation
Once the tools are installed, VM will be powered off.

Once it is powered on, appropriate tool versions will be available on VM. To verify execute the following command

ps -ef \ | grep hv

Check the output, it should have appropriate process running for hv_kvp_daemon, hv_vss_daemon:

root 148 2 0 Oct06 ? 00:00:00 [hv_vmbus_con]

root 421 2 0 Oct06 ? 00:00:08 [hv_balloon]

root 744 1 0 Oct06 ? 00:00:02 /usr/lib/linux-tools/4.4.0-130-generic/hv_kvp_daemon -n

root 831 1 0 Oct06 ? 00:00:00 /usr/lib/linux-tools/4.4.0-130-generic/hv_vss_daemon -n

admin 38341 37997 0 16:21 pts/2 00:00:00 grep --color=auto hv

Installing Accops Assistive Package
This is mandatory step for Linux VDI server preparation for Linux dedicated/session host VM preparation.

To view the details of the currently installed packages, run the following command:

~$ cat /opt/Accops/linuxVDIVersion.txt

[LinuxVDI]

OSname=AccopsLinuxVDI

Version=u9

BuildDate=15022022

Tag BuildDate indicates the Assistive package version.

Download OS-specific Packages
It is critical to download packages specific to the OS being deployed:

Assistive packages of Ubuntu: Applicable for Ubuntu based VMs and Accops Linux SHD Servers.

Assistive packages of RHEL/CentOS: Applicable for RHEL and CentOS-GNOME VMs.

Package name format:

OSName_assistive_online_installer_VersionNumber_LinuxVDI_Tag.tgz e.g.,

ubuntu16_assistive_online_installer_22022022_linuxvdi.tgz for Ubuntu/ Linux SHD Server

redhat+centos_dvmtool_assitive_online_installer_06062022_linuxvdi.tgz for RHEL/CentOS

Assistive Package Installation process
Note

Accops Dependency package installation process is same for both Ubuntu and RHEL/CentOS.
Prerequisites
Appropriate 7zip packages must be installed on the system. To install 7zip packages follow the below method (Ubuntu-Gnome and Xubuntu usually comes with pre-installed p7zip-full package)
sudo apt-get update sudo apt-get install p7zip-full

Internet must be enabled and should be able to reach OS specific repositories for dependency packages installation
Installation Steps
Follow the below given steps for installing Accops Dependency Package:

Enable Internet on the Linux VDI machine to update cache and download packages while installing assistive package

Copy Assistive package to user's home directory

Open Terminal and execute below commands in terminal: > cd /home/[USER]/

Execute below given commands to extract all the required packages in a directory with package name:

tar -xvf \<*OSName_assistive_online_installer_VersionNumber_LinuxVDI_Tag.tgz> e.g. tar -xvf ubuntu16_assistive_online_installer_22022022_linuxvdi.tgz

Execute Command:

cd \<Accops Package Name> e.g. cd ubuntu16_assistive_online_installer_22022022_linuxvdi

Execute the following command:

For Ubuntu based VMs
sudo ./execute_installer.sh

For RHEL/CentOS VMs:
sudo ./runme_installer.sh

Once the Package installation starts, user will be prompted to choose some options as described below:

Installation script will verify if the available packages are enough for the base Ubuntu VM (Applicable for Ubuntu-based OS only). If additional packages are required you will be prompted to confirm the Internet connection so that packages can be downloaded via Internet. Click OK to proceed with download.



Select the possible deployment environment for the VM.

Active Directory: If this VMs to be cloned from it; should be joined to active directory

LDAP to install dependency packages while joining machine in LDAP

Workgroup: If VM or cloned VMs to be kept in workgroup



Note

It is important to choose this option carefully as per the target environment, choosing a conflicting configuration may cause failures.

Scripts are provided, to switch the environments post installation and recommended to be used as per the deployment environment.

IMPORTANT CONFIGURATION to decide delivery mode as for personal desktop or shared hosted desktop. Choose carefully as per deployment mode in the environment.

If deployment is for shared hosted desktop or app virtualization, choose option SHD Mode [Multi user]

If deployment is for personal/ dedicated desktops choose option VDI Mode [Single user]



Choose whether you want to enable/disable SSH service as per the requirements



You will be prompted to reboot once the installation is complete.

Important

Though you are prompted for reboot wait for few minutes before rebooting. There are chances of some background tasks still under process.

Click OK and reboot the machine. This completes upgrade/installation of Ubuntu assistive/dependency package is completed

Note

While upgrading from previous assistive packages, ldap and nfs configuration will be retained.
If you want to configure the deployment environment in LDAP, Accops assistive package should be installed as above procedure selecting LDAP from displayed list in point b.
Additional Steps for BOSS OS
After installing assistive packages on BOSS VM, built-in USB redirection service remains in disabled state by default. Additional steps to be performed in BOSS for enabling services:

Run script in assistive package **boss_os_run_after_reboot.sh*.
Upgrade HyWorks DVM Tools for Linux
Skip this section if the latest version of DVM Tools is already installed as a part of the assistive package.

Check the version installed by executing following command on the Terminal:

cat /etc/edcdvm/linuxDVM/productInfo.txt

Follow the below given steps to install/upgrade Linux DVM Tools on Ubuntu-GNOME or CentOS-GNOME VM:

Download latest HyWorks DVM Tools for Linux from the Accops official website/Support portal. It is provided with following name format:
format: HyWorksDvmTools_Linux_merged_[VERSION].tgz

Copy the DVM tools file on user's home directory

Open Terminal

Change the directory

cd /home/[USER]/

To extract the DVM files in the directory linuxDvmAgentInstaller and start installation, execute following commands:

tar -xvf \<LinuxDVMTools.tgz>

e.g. HyWorksDvmTools_Linux_merged _3.3.1.12.tgz cd linuxDvmAgentInstaller sudo ./linux_Exec_Installer.py

Desktop will reboot automatically once installation is complete and admin can start configuring it.

If required check the DVM Tools installation logs, by executing command can be run on the Terminal:

vi /etc/edcdvm/linuxDVM/Logs/linuxDvmAgentInstallerLog.txt



Configurations and Environment Preparation
Authentication Configuration of Linux SHD/DVM Servers
Once all the required packages are installed, the next step is to configure Linux VDI for authentication. Three types of authentications are supported: Microsoft Active Directory, LDAP and Workgroup.

Join AD Domain
Active directory domain can be joined using:

Accops Custom Script (Recommended Process)
Accops GUI Script
Using DomainJoin - CLI (Command Lines)
Important

The assistive packages must be installed for active directory environment. If not the environment switch scripts should be used to set the machine for AD environment.
Accops Custom Script (Recommended Process)
Follow the below given steps to join the Linux SHD/DVM to AD:

Open Terminal on Ubuntu VM and execute the following command to join the machine to the specified AD.

sudo /usr/bin/edcdvm/scripts/active_directory_join.py <JSON-INPUT>

JSON-INPUT:


    "{

            "\"JoinDomainType"\":1,

            "\"ComputerName"\":"\"<ComputerName>"\",

            "\"DomainName"\":"\"<DomainName>"\",

            "\"DomainUserNme"\":"\"<DomainUserName>"\",

            "\"DomainUserPassword"\":"\"<DomainUserPassword>"\",

            "\"PreferredDns"\":"\"<PreferredDNS>"\",

            "\"AlternateDns"\":"\"<AlternateDNS>"\"

    }"
In the above command, replace the following parameters with the required values:

<ComputerName>: Name to be assigned to the machine.

<DomainName>: Domain name of your organization. Machine will be joined to this domain.

<DomainUserName>: User having rights to add/update objects in Active directory for joining the machine to domain.

<DomainUserPassword>: Password of the domain user

<PreferredDNS>: IP address of preferred DNS server

<AlternateDNS>: IP address of alternate DNS server

If the machine has joined domain successfully, success message will be displayed in command output. Alternatively use the below given command to verify:


> sudo domainjoin-cli query
The output of this command will display the new machine name and domain information.

Joining Machine to Domain using GUI Script
Open Terminal and go to directory


>   cd /usr/bin/edcdvm/scripts
Run command


>   sudo ./active_directory_join_GUI.py
Provide root password if prompted

Domain join window will be displayed



Provide the details and click on OK button to proceed.

Computer Name: New hostname for the machine e.g., itubuntu-001

Preferred DNS: Primary DNS server address

Alternate DNS: Secondary DNS server address

Domain Admin Username: Username of AD user having appropriate rights on AD to join machine to domain

Domain Admin Password: Password of AD user provided above

Domain Name: Domain name to which this machine to be joined e.g., example.local

Machine will be joined to the domain. Reboot the machine once it is configured correctly to domain.

Join AD using DomainJoin using Command line
Prerequisites:

Offline package and DVM Tools are installed

Appropriate DNS entries are added into VM network configuration settings

Change Hostname: It is important to have a unique hostname of Linux SHD/DVM (specially if you're trying to join VM to AD), as having the same hostname in network may drop the connection. To change hostname of Linux SHD, follow the below steps:

Open Terminal on Ubuntu VM and execute the following command:

sudo domainjoin-cli setname \<new hostname>

Reboot the machine

Join Domain:

Make sure date/time is correctly synced with active directory machine

Open Terminal on Ubuntu VM and execute the following command:

sudo domainjoin-cli join 'domain_name' 'domain_user' 'domain_password'

If the machine has joined domain successfully, success message will be displayed.

Reboot the machine

Configure to Authenticate with LDAP
Important

The assistive packages must be installed for LDAP environment. If not the environment switch scripts should be used to set the machine for LDAP environment.
Follow the steps given below to join the Linux SHD/VM to LDAP:

Open Terminal and go to the directory where offline package is extracted

cd /home/\<Username>)

Find LDAP configuration template file at \<assistive package root>/ templates/ldap_templates

cd \<assistive package path>/templates/ldap_templates

Make the following changes in ldap.conf and sssd.conf,:

Ldap.conf changes:

Change BASE with the Base DN details of your organization

Change URI with address of LDAP server in format ldaps://\<LDAP Server IP>



sssd.conf changes:

ldap_uri in format ldaps://\<LDAP server IP address>

ldap_search_base: base DN of LDAP server; e.g. dc=example,dc=mylabs,dc=com

ldap_user_search_base = OU or container in which the specific user should be searched e.g. ou=IT,ou=Pune,ou=india,dc=example,dc=mylabs,dc=com

ldap_group_search_base = OU or container in which the specific group should be searched e.g. ou=IT,ou=Pune,ou=india,dc=example,dc=mylabs,dc=com



Save the config files

Run the script from same folder

./script+readme.sh

After the script execution is completed successfully, reboot the machine. The machine is not ready for user authentication and access with configured LDAP server.

Note

In Centos7-Everything-1708/1804 to run script+readme.sh it requires "openldap-clients" package which needs to be installed manually otherwise it will throw an error as "ldapsearch command not found".

Deployment in Workgroup Environment
Make sure to install dependency packages for workgroup or use switch scripts later for configuring machine for specific environments.

Switch the Deployment Mode of Machine
Use the script mentioned below to change the deployment from AD to LDAP:

Go to location where DVM Tools Assistive Online Package is extracted
Now go to extracted folder and locate script and run following command
sudo ./switch_ldap_AD_workgroup.sh [Option], where [Option] is target environment.

Examples:

To remove previous configurations and make it ready for LDAP environment


>   sudo  ./switch_ldap_AD_workgroup.sh LDAP =>
To remove previous configurations and make it ready for AD environment


>   sudo  ./switch_ldap_AD_workgroup.sh AD
To remove previous configurations and make it ready for Workgroup environment


>   sudo  ./switch_ldap_AD_workgroup.sh WG
This will remove all the previous configuration and admin need to add new configuration as per the requirement.

RHEL Subscription Configurations
Accops HyWorks does not update the subscription details of RHEL machine being prepared by installing packages or using dynamic provisioning and thus all such VMs prepared have to update the subscription details.

Follow the steps given below to update subscription details:

Open terminal and use below commands:

>   sudo subscription-manager clean
>   sudo subscription-manager register --username <Username> --password <password>
>   sudo subscription-manager attach --auto
>   sudo yum update



Advance Configurations for Linux Session Host Servers
Session Host IP Virtualization
Latest Linux Session host servers support IP virtualization, where each remote session can be provided a unique IP. Having a unique IP in session, enables user identification on the Internet and Internet isolation if required.

If it is needed to enable session host IP virtualization, refer document Session Host IP Virtualization for all relevant configurations on Linux session servers.

The configurations done on Linux gold master will be reflected on all cloned VMs and hence, the Linux server team deployed with pool will be having all session host servers with identical session host IP virtualization configurations.

Direct RDP /Console Block
In some deployments, direct access (console/RDP) needs to be blocked for the users and only connection through HyWorks are to be supported. Direct access can be blocked by configuring settings as given below in the vmInfo.json file of Linux server:

File Path: /etc/edcdvm/linuxDVM/vminfo.json

Available Configurations:

DirectRdpBlock: Set this flag to True to block direct remote connections. Default value is false.

DirectRdpAdminBlock: Set this flag to True for blocking direct remote connections by admin users. Default value is false.

DirectConsoleBlock: Enable the setting for blocking the direct connection via console. By default it is disabled.

DirectConsoleAdminBlock: Enable the setting for Direct console block for admin users. By default it is disabled.

DirectRdpBlockTimeoutSec: Update the time for Direct RDP/console block session. (Default:10sec).

Note

The direct RDP block timeout configuration must be set as per the profile loading and overall connection time. If timeout is kept as very less, DVM agent may throw out valid sessions as well.
Pre and Post HyPrep Script Execution Support
Latest version of DVM Tools for Linux supports execution of pre or post HyPrep scripts. These scripts are added to customize files accordingly e.g., hosts or hostanme after hyprep.

Script Path: /etc/edcdvm/linuxDvm/scripts/

Script Names: HyprepPreScript.sh, HyprepPostScript.sh

Pre and Post AppLauncher Script Execution Support
Latest version of DVM Tools for Linux supports pre and post Applauncher script execution.

Script Path: /etc/edcdvm/linuxDVM/scripts

Script Names: AppLauncherPostScript.sh, AppLauncherPreScript.sh

Note

Update the given script with custom tasks if required.
Set isWaitTillCompletion flag as True, if you want AppLauncher to wait for completion of this script execution.
Accepting calls from Authorized controller only
Latest Linux DVM agent can be configured accept calls from specified controller only. Call from any other controller can be rejected.

Follow the steps given below to configure the Authorized controller entry:

Connect to Linux SHD Server via SSH Client or Terminal
Go to the /etc/edcdvm/linuxDVM directory
Edit the appsettings.json file and set appropriate controller IP for flag AllowedControllerList
Restart the edcdvm service.
Now this server will accept call from provided HyWorks Controller address only.
HyShell Configurations for Linux SHD Servers
Note

HyShell is supported only the Linux SHD OS that is provided by Accops and does not work for vanilla images.
HyShell is desktop customization utility which can be used to change the configuration on the Shared Hosted Desktops:

Create Allowed applications shortcuts on Start Menu and Desktop.

Restrict user access for any other applications.

Due to application usage limitations, it is recommended to use HyShell enabled Linux Shared Hosted desktops, so that the users can be given a restricted access to full desktop with the allowed applications only.

The customizations include restricting native applications from adding access points for published apps assigned to the user in SHD as application menu and desktop icons.

Various set of configurations are possible and below table details these combinations and their impact in behavior.

Configured in Controller	Enabled in SHD	Impact
No	No	User gets desktop with no restrictions
Yes	No	User gets desktop with no restrictions
No	Yes	User gets restricted desktop with no application (neither assigned apps nor native apps)
Yes	Yes	User gets restricted desktop only with assigned applications (no native applications will be available.
Note

When desktop is restricted:

User gets access to only those applications that are assigned by HyWorks.

If HyWorks is configured to show desktop shortcuts in SHD, desktop displays icons for assigned applications only

If HyWorks is configured to pin applications on Start menu in SHD, Application menu will show only hosted applications along with the disconnect option

User is not allowed to personalize desktop

HyShell can also be configured to execute user scripts in both system and user context before and after HyShell execution.

How to enable HyShell in Linux Session Host Server
Follow the steps given below to enable HyShell in Linux SHD:

Connect to linux SHD server via SSH Client(if ssh enabled) or console session

Open HyShell configuration file

sudo vi /etc/edcdvm/linuxDVM/hyShell/hyshell.config

Set the value for IS_HYSHELL_ENABLED to 1.



Desktop restriction is not applicable to all the users in included in EXCLUDE_USERS_LIST

Restart DVM Agent Service by executing following command

sudo systemctl restart edcdvm

Linux SHD is now enabled with HyShell.

Note

HyShell configuration is a server level configuration and applicable for all the users accessing Linux SHD Desktops.

Once enabled, HyShell provides access to only those applications, that are assigned to the user and published from that server. In other words if a user is not having any applications assigned then the customized Linux SHD desktop will not show any application or shortcuts.

HyShell configuration may take 3 to 5 seconds to load.

Enable Published Applications for HyShell
Once HyShell is enabled in Linux Session Host Server, applications must also be configured to be shown in the user session.

Follow the steps given below to publish applications for Linux Shared hosted desktops:

Follow the steps mentioned in section Application Publishing in HyWorks

In Application Add/ Edit wizard > Additional Settings > Access Settings section

Uncheck option Publish the application on > Portal and client: This will stop showing application on the client screen.

Configure Create Desktop Shortcut

On User PC option - Uncheck (this will not create Desktop shortcuts on User PCs)

On Shared Hosted Desktop option - Check

Configure Pin Application to Start Menu

On User PC option - Uncheck (This will not pin Application on User PCs)

On Shared Hosted Desktop option - Check



Above configuration will create all the applications' shortcut on the desktop or Start menu for the user session.

Run Custom Shell Scripts in User Session
Follow the steps given below to run the custom shell script if required:

Connect to Linux SHD Server via SSH Client or Terminal

Go to HyShell directory to locate scripts you want to run by executing following command:

cd /etc/edcdvm/linuxDVM/HyShell/

Modify and save the following scripts as per the requirement:

HyShellLauncherPreScript.sh: This script executes before HyShell is launched.

HyShellLauncherPostScript.sh: This script executes after HyShell is launched successfully.

Scripts will execute from next logon to SHD from server.

Syslog configuration for forwarding Audit Logs to Syslog Server
Linux SHD integrated HyWorks DVM tools supports sending user session logs to Syslog server.

Desktop Agent Logs Format
<Date time of event>, <OS Type>, <Hostname>, <IP Address>, <Username>, <Display Port>, <Process ID>, <Event Message>

OS Type: Possible values:

Windows
Linux
Event Message: Possible values:

User logged in
User session disconnected
User logged out
Sample Logs
26-03-2018 15:55:29,Linux,prod-linshd-5,10.0.7.91,sd.sid1,-,-,User logged in.

26-03-2018 15:56:56,Linux,prod-linshd-5,10.0.7.91,sd.sid1,11,18418,User session reconnected.

26-03-2018 15:57:29,Linux,prod-linshd-5,10.0.7.91,sd.sid1,11,18418,User logged out.

AVAILABLE STATES
Windows: Login, Disconnect, Logout

Linux: Login, Reconnect, Logout

Note

On Logon, information of 'Display_Port' and 'PID' is not available and hence DASH (-) is displayed in syslog.
Syslog Configuration Process
Follow the below steps to configure logs forwarding to syslog server:

Take console or RDP session of Linux VDI Gold Master VM with user having sudo permission

Create a file with name EventTypedataPath.txt at /etc/edcdvm/linuxDVM by executing command

cd /etc/edcdvm/linuxDVM

Update file with following contents with sudo access:

{

"EventType":3,

"LogType":3,

"SyslogHost":"<Syslog server IP>",

"SyslogPort":"514",

}

Save the file and restart DVM Agent Service by executing following command

systemctl restart edcdvm

Verify configuration by connecting to the VM using HyWorks client and check syslog server if appropriate log entries are added.

Troubleshooting
Refer section Troubleshooting and basic HowTos for debugging steps and log file paths.


Troubleshooting and Basic HowTos
Identify Application path on Linux SHD Server
To identify the application path in Linux SHD Server, you will need the console access of the Linux SHD. Open the Terminal and execute command which <Application name> e.g. which gedit

Application path on Linux SHD servers will be displayed.



Checking DVM Service status
To check the status of desktop agent service, open terminal and execute following commands:

For desktop agent service

sudo systemctl status edcdvm

For desktop agent monitoring service

sudo systemctl status edcdvmmon

Check Version of HyWorks DVM Tools - Linux
To check the version of HyWorks DVM tool, open terminal with user having sudo rights and execute the command

cat /etc/edcdvm/linuxDVM/productInfo.txt

Check Installation Logs of DVM Agent
To view the installation logs of DVM agent, open terminal with user having sudo rights and execute the command

vi /etc/edcdvm/linuxDVM/Logs/linuxDvmAgentInstaller.txt

Get location of Desktop Agent Logs
To get the location of desktop agent logs, execute command

vi /etc/edcdvm/linuxDVM/Logs/DesktopAgentLog.txt

Get location of Service Status Logs
To get the service logs, execute command

vi /etc/edcdvm/linuxDVM/Logs/services_status.txt

Checking HWE/ Non-HWE Kernel
As HyWorks supports only Non-HWE kernel OS, it's important to check using below methods:

Open terminal and run below command

dpkg -l xserver-xorg-core

In output

If version, architecture and description is none it means kernel is HWE

If version, architecture and description information is available then it means kernel is Non-HWE.

Note

Accops HyWorks does not support personal/pooled desktops or virtual app delivery on HWE kernel OS.

Usually released versions with point 0 and point 1 have Non-HWE kernel.

Verification of Packages Installation (USB redirection not working)
To check packages are correctly installed or not:

Go to the location where extracted packages are available

Locate and verify assistive package installation logs
Go to deb_packages_verify directory > logs. On this location 2 lists are present.
Package installed logs and package not installed logs. From that you will get to know which packages are installed and which packages are not installed.
Verifying if Built-in USB redirection driver is installed correctly:
Open terminal

Run command > eveusb.

USB network gate window should get open.

If it does not open, then reason may be internet availability or error while extracting packages.

Please refer below screenshot. If below prompt occurs, then user needs to restart the Linux machine.



Verify internet is available or not and then re-install the packages. Your issue will get resolved


Prepare Azure Desktop VM
Azure licensing benefit on Gold Master
You can save a lot in Azure with Windows Server Software Assurance by using Azure Hybrid Benefit. If your organization is eligible, you can enable benefit while creation of Windows Servers VM.

More information: https://docs.microsoft.com/en-us/azure/virtual-machines/windows/hybrid-use-benefit-licensing

Apply following configurations either while creating VM or post-creation.

Windows Server

Option while VM creation on Azure portal - Enable Windows License while creating VM



Verify using power shell for Windows Server



Windows 10

Option while VM creation on Azure portal - Enable Windows License while creating Windows 10 VMs

More information: https://docs.microsoft.com/en-us/azure/virtual-machines/windows/windows-desktop-multitenant-hosting-deployment

Apply following configurations either while creating VM or post-creation.

Windows 10 option while VM creation on Azure portal



Verify using power shell for Windows 10



Basic HyWorks Configuration
Basic HyWorks configuration is for organizations with a Single Organization structure, in which logical separation of resources is not required. It also includes configuration of the authentication mode.

Refer to the configuration steps mentioned in the Multi-Organization Deployment section in case a logical separation of resources is required.

HyWorks Deployment in a Single Organization
While this flowchart depicts the entire configuration, this section describes steps of the basic configuration only.



Step 1: Install the HyWorks Controller service and Management console
HyWorks Controller supports two types of deployments:

Standalone (HyWorks without High Availability)

The HyWorks Controller must be installed with the SQL Servers. Refer to the HyWork Controller Installation section for details.

Cluster

HyWorks Controllers must be installed with the SQL Server with some additional prerequisites. Refer to the HyWorks Controller Installation For Cluster section for details.

Use the Installation Wizard to install the HyWorks Controller and Management console. Refer to the HyWorks Installation section for the entire flow of installation.

Step 2 Add the Authentication server and the Authentication Domain configuration
Once the installation process is complete, the next step is to add the authentication server and configure the authentication domain to specify the authorization and authentication servers.

HyWorks supports the following authentication servers:

Microsoft Active Directory
Novell Directory/Open LDAP
Built-in (available by default)
Configure Authentication Server:

Go to Settings > Configure > Authentication and click Add

In the Authentication Server window, select the Server Type, for example Microsoft Active Directory, Novell Directory/Open LDAP and specify the following information:

Enter the display name for the authentication server. This is to uniquely identify the server.

Provide the server address, for example, 192.168.1.1 or Accops.com

Provide an appropriate Domain name which could be the NetBIOS Name for domain (this domain name information will be used for signing into the remote sessions).

The Port Number to be used to communicate with the authentication server (default is 389).

Enable SSL: Check this checkbox if the configured Active Directory supports secure communication (the default port for SSL communication is 636).

Provide the Base DN information (mandatory for LDAP type authentication server and for Active Directory configurations, when the Active Directory options value under System -> Advance Config is set as 6, which uses the LDAP search method to communicate with AD).

All the users, groups and OUs will be fetched if the Base DN information is not provided.

On providing the specific Base DN information, users, groups or OUs will be fetched accordingly.

The User DN (mandatory for LDAP type authentication server and for Active Directory configurations, when the Active directory options value under System > Advance Config is set as 6, which uses the LDAP search method to communicate with AD ). This is the user that will be used to communicate with the Active Directory server. The user should have privileges to fetch the user, group, OU information under the specified base DN.

Username: The username of the user from authentication to be used to communicate with the Active Directory server, the user should have privileges to fetch user, group, OU information. This field is available for Active Directory type authentication server configuration only.

A valid Password for the user configured in step# 7-8.

Select an appropriate Login Attribute: User Id, User Principal Name, Mail Id, Phone number. The selected attribute will be used to authenticate user the on logon.

User Id: Map the username entered by the user with the User Id field of HyWorks

User Principal Name: Map the username entered by the user with the User Principal Name field of HyWorks. HyWorks will form the User Principal Name using the following methods:

User logon using only the username without a domain name: HyWorks will generate the UPN using the domain name configured in the authentication server configuration. For example, the user logs-in using john.test => john.test@domain.com

User logon using the domain name\username: HyWorks will generate the UPN using the domain name and the username provided by the user. For example, the user logs-in using domain.com\john.test => john.test@domain.com

User logon using the full UPN in format username@domain-name: HyWorks will use the credentials as provided. For example, the user logs in using john.test@domain.com => john.test@domain.com

Mail Id: Map the username entered by the user with the Mail Id field of HyWorks

Phone Number: Map the username entered by the user with the Phone Number field of HyWorks

Note

Default login attribute for configuring the Active directory is SAMAccountName and for configuring the LDAP is CN. These attributes (SAMAccountName with AD and CN with LDAP server) are most commonly the user login attribute.
Log Attributes in Login: Optional, specify the AD attributes that will be logged in logs along with each user login event. This field can be used to create additional information in the log file to generate a customer report.

Skip Login Attribute Verification: By default is enabled but when unchecked, all four underlying attributes will be checked on the AD, whether they are present or not when configuring the AD. If checked and it is found that any attribute is missing in the AD, then an error will be reported during user login. For example, if the "Phone Number" attribute is specified as the "telephoneNumber" AD attribute and this attribute does not exist in the AD, an error will be reported during login.

Add secondary authentication server: By default is unchecked, select and provide details of the secondary authentication server for Active Directory failover conditions. The provided secondary authentication server must be in sync with the primary Active Directory server.

Click Test Connection.

If the connection is established successfully, click Add.

This completes the Authentication Server configuration. For detailed information, refer to the Authentication Server Configuration Section in Admin Guide.

Configure Authentication Domain:

Authentication domain defines the server to be used for authentication and the server to be used for authorization (entitlements).
Authentication and authorization servers can be the same or different, based on the requirement.
The Domain name to be used for connections, etc.
To configure the Authentication domain, follow the steps given below:

Go to Settings > Configure > Organizations

Select default or child organization and click Edit.

In the Edit Organization wizard, go to the Authentication Domain section and specify:

Authentication Server: This server will authenticate the user on logon.

Authorization Server: All assignments and entitlements will be done from this server.

The Domain Name will be fetched from:

Authentication Server
Authorization Server
Custom Domain
If you are using the Built-in Authorization server, provide the following information:

User creation on RDS: Choose Manual synchronization to synchronize manually or set as Automatically on logon or Do not create.

User credentials for RDS: Select Built-in directory credential if you want to connect to HyWorks using the built-in credentials. If you do not select this option, the connection will be made using the logged-in user credentials (user-provided credentials).

Populate users into the built-in directory : Define how users will be populated in the Built-in directory.

Create Users in the Built-in Directory - If you choose this option, the Administrator will have to add users manually or by importing them from CSV files.
Import Users from the Authentication Server - If you choose this option, you will be able to import users from other authentication servers into the Built-in directory.
Note

If the authentication and authorization servers are using different search attributes, it may result in logon failure or authorization issues.
Go to the Desktop Client Settings and click Save.

This completes the configuration of the Authentication domain.

The subsequent steps will depend on the kind of session delivery mechanism.

Resource configurations in Shared VDI
HyWorks supports delivery of applications and Shared Hosted Desktops from the following platforms:

Windows

Windows Server 2022

Windows Server 2019 (essential not supported)

Windows Server 2016

Windows Server 2012 R2

Windows Server 2008 R2-SP1

Windows Server 2003 (limited features supported)

Windows 10 Multi-session

Note

Sometimes multiple connections to Windows server 2022 does not work and the same can be resolved using steps provided in the article HyWorks - 3.4 Webhelp > Knowledge Base Articles > Application Delivery > Resolve Unable to Connect Multiple Users on Windows 2022.
Linux SHD Server

Xubuntu 20.04.0/1 (Legacy Kernel)

Xubuntu 18.04.0/1 (Legacy Kernel)

Xubuntu 16.04.0/1 (Legacy Kernel)

Note

HyWorks supports OS versions with point 0/1 only, having Non-HWE kernel. OS versions with HWE kernel are not supported.

Make sure to install only point 0/1, any other version may cause package/tools installation issues and will result in apps/desktop delivery failure.

Add Session Providers
Go to VDI > Session Servers > Servers and click Add.

In the Add Session Provider wizard,

Select the Type as Microsoft RDS Server or Linux RDS Server.

Provide an appropriate Name for the session provider, enter the IP address or Hostname of the RDS server in the Host Address field.

Note

The Windows Remote Desktop Session Host role must be installed with the Accops HyWorks Session Host Server module.
Enter the RDP Port number to connect from the client.

Select the Session Team. Session Teams are created for load balancing among the Session Host Servers. By default, two session teams - one for Windows configuration and one for Linux configuration, are created that cannot be deleted. Linux SHD Servers and Windows SHD Servers should be created in the Linux Session teams and Windows Session teams respectively.

As per the session team selection, the Weight field can be enabled, which represents the respective weight of the server and should be set as per the server capabilities, as compared to other servers in the team.
Set the Max Session count to restrict the maximum number of sessions to be given from this Session Host Server. Set Zero for unlimited sessions.

Select the Active to enable the Session Host Server for session delivery. Inactive Session Host Servers are not used for giving sessions.

Set the Advance Configuration as per the requirement

Enable Diagnostics
Enable Remote Control
Enable Virtual-IP
Select the Assign Applications to display options to associate already published applications in HyWorks with the Session Host Servers. Ignore if the Session Host Server is added for Shared Hosted Desktop delivery only or if applications have to be published later.

Click Add. The Session Host Server should now be configured and should be ready for the Shared Hosted Desktop or application deliveries.

Personal Virtual Desktop
Pre-requisites
Dedicated VDI will require one of following session providers to be available:


-   VMware ESXi/vCenter Server 5.5/6.0/6.5/7.0

-   Microsoft Hyper-V 2012 R2, 2016, 2019

-   Microsoft SCVMM - 2016, 2019

-   Nutanix AHV PE 6.5, PE 5.8.2, PE 5.10, PE 5.11

-   Nutanix Prism Central PC 2022.4.0.2, PC 5.8.2

-   Microsoft Azure

-   Amazon Web Services (AWS)

-   Oracle Cloud Infrastructure (OCI) [Beta]

-   Physical Desktops
Resource configurations in Dedicated VDI
Add Session Providers
Go to Settings > Configure > Connectors section and click Add.

In Add Session Provider wizard,

Select Type as either of

Microsoft Hyper-V/ SCVMM
VMware/ vCenter
Nutanix
Physical PC
Azure
AWS
Oracle
Provide appropriate Name for session provider, enter IP address or Hostname of the session provider server in Host Address.

Enter Login credentials

VMware/ vCenter and Nutanix: provide username, password and other relevant information.
Azure: provide Application ID, Secret, Tenant ID, Subscription ID.
Microsoft Hyper-V/ SCVMM and Physical PC: no credentials are required.
AWS: AWS Account ID, AWS Secret Key, AWS Access ID, Region
Oracle: Oracle Account ID, Oracle Secret Key, Oracle Tenant ID, Provider Pem File, Region
Links to prepare specific connectors as per deployment need and infrastructure availability are provided below:

Virtualization Platforms: VMWare ESXi/vCenter, Microsoft Hyper-V/SCVMM, Nutanix Prism Element / Central

Cloud Services: Microsoft Azure, Amazon Web Services (AWS) (Beta), Oracle Cloud Infrastructure (OCI) (Beta)

Click Test Connection to validate credentials and server availability.

Click Add to save configuration.

This completes Session provider configuration and is ready for dedicated desktop deliveries.

Important

To enable Microsoft Hyper-V or SCVMM server as Session Provider, additional module Accops HyWorks Hyper-V Connector must be installed and running on Hyper-V or SCVMM servers.

Configure Desktop Pools and Assignments
To deliver desktops from the Session Provider and assign them to desired users, groups or devices (HyDesk), follow the below given steps:

Go to VDI > Pools

Click Add New Pool

In Add Desktop Pool wizard, in General section

Provide logical name, Display Name and Description for desktop pool

Select Entitlement Type as

Device based - if HyDesk devices are to be assigned with dedicated desktop
User based - if assignments are be given to be users, groups or OUs
Select Desktop Pool Type as

Persistent Virtual Desktop: For persistent disk virtual desktops i.e. user changes will be retained after user logs out.

Non-persistent Virtual Desktop: Desktop VM disks will revert to fresh state after user logs out.

Physical Desktop: physical Pcs or desktops which are not managed by hypervisor, can be added as physical desktops in HyWorks.

Select Session Provider of category Dedicated Session provider.

Select Provisioning as

None - if existing VMs from Session providers are to be used
Dynamic - if new VMs are to be provisioned on the Session provider. It will enable Deployment and Customization tabs and will require appropriate inputs from administrator.
Select Assignment Life Span as

Personal - assignments will be saved and the same desktop will be provided to the client on next logon
Floating - if it is required to create non-persistent assignments which will get removed after the user logs out. Floating Type desktops can be assigned at the time of logging in or on connect request. This configuration can be done from Advanced Configurations of Desktop Pool wizard.
Click Next

For Provisioning Type as

None: In Desktops > Add Desktops to add the desktops. Click Next to proceed.

Dynamic:

From Deployment tab - configure new VMs deployment - Linked or Full clone; using source image

From Customization tab - customize the cloned desktops as required

In Devices/ Users screen, add appropriate Users/ Devices as per Entitlement Type selected in General screen and click Next to proceed.

In Classification Rules screen, add any classification rule to restrict pool access to classified endpoints. Leave configurations unchanged for pool to be accessed from any endpoints by authenticated and authorized users.

From Desktop Assignment tab, configure the assignments for the desktops. (This page will not be displayed for dynamically provisioned desktops, as it does assignment automatically.)

Configure Advance Settings as per the requirement and click Next to navigate to Summary page.

Click Finish.

This creates desktop pool and user will be navigated to Desktop Pools screen displaying recently added pool.

Important

All the DVMs except RDS type Session provider should have HyWorks Tools installed to configure remote desktop services and power policies.
In case of Dynamic provisioning, the source DVM must have the latest HyWorks DVM Tools installed so that it will get pre-installed on all the newly cloned DVMs.
Change Assignments from Desktops VMs Page
Once the desktop pool is added, all the configured desktops can be managed from VDI > VMs screen of Management console.

Section VMs can be used for assignment changes, power operations or removing the VM from the desktop pool.

Different Types of Desktops Pools based on requirements
Entitlement Type
User based: If desktop VMs should be associated with users

Device based: If desktop VMs should be associated with registered devices; binding desktop VMs with specific devices

Provisioning Type
None: Using existing desktops from dedicated session provider

Dynamic: Deploying new desktop VMs on dedicated session providers, which can be further based on cloning type as

Linked Clone

Full Clone

Disk Persistence Type
Persistent: Disk will not be reverted, and user changes will remain on the desktops
Non-persistent: Disk will be reverted to fresh state post log out
Assignment Life Span
Personal Desktops: Client assignment will be retained until changed and the same desktop will be delivered to the client on every log on

Floating Desktops: Desktop assignment will be erased once the user session is completed

Assignment Logic can be on-login or on-connect
User Logon For Verification
Use the steps provided on page User Logon to verify configuration.


Pooled Virtual Applications
Prerequisites
Shared VDI or application delivery will require Windows Server 2008R2 or later to be installed with Accops HyWorks Session Host Server Module.

Refer section Accops HyWorks Session Host Server Installation for the installation process.

Refer section Resource Configurations in Shared VDI & Add Session Providers for the Session Providers configuration into HyWorks.

Publish Applications
Until now the deployment has following configurations:

Authentication Domain configured with appropriate authentication servers

Appropriate Shared Session Host Server configured to server applications to end users.

Publish Applications and Make Entitlements
Go to Apps > Virtual Apps section

Click Add to invoke the Add Application wizard

In Add Application wizard,

In Application Information tab:

Select Application Platform as Windows or Linux as per deployment type

Select Session Team using dropdown in Browse Application Details section

Select RDS Server from next dropdown screen

Click Browse and to the folder where application executable file is saved and select the application.exe.

Click Get Details to go back to Add Application wizard

Application Path and Application Internal Name will get filled automatically for windows, for Linux this information has to be provided by administrator.

Provide appropriate entry for Application Display Name

Click Next to proceed to Additional Settings tab and configure following settings if required.
1. In User Context section, select Run As option and provide required information.
2. In Folder Information section, select folder option as per the requirements. The folder is just a logical grouping of applications. 3. In Launch Settings section, configure setting which is to be used to launch application.
4. In Access Settings section, configure settings which will determine where to show application for access.

Click Next to proceed

In Select Teams and Server tab, select the displayed server team or specific session server.

Click Next to proceed to add users or group OUs from Entitlements tab.

Click Save.

This completes adding of application and now it will be listed in the Applications section.

Assign Entitlements
Assign entitlements once applications are published as follows:

Go to Policies > Entitlements

Click User to view, add or update entitlements assigned to Users.

Click Groups to view, add or update entitlements assigned to Groups.

Click OUs to view, add or update entitlements assigned to OUs.

Click on Pools to view, add or update entitlements assigned to user-based pools.

To add new entitlements e.g. Users Entitlements, click Add Entitlement

In Add Entitlements wizard,

Click Add Users, search and select required users. Users are searched from configured the authorization server.

Click Next to proceed to Applications tab to select the applications to be assigned to the selected users.

Click Next and proceed to Connection Profiles to select the connection profile to be assigned to users. Select None if you do not want to assign user-specific connection profile.

Click Save.

All selected Users will now be shown in the Entitlements > Users section with the applications assigned to them.

Use the above process to configure Group-, OU-, or Pool- based entitlements.

Once the entitlements are assigned, when users log in they will be displayed apps and desktops assigned to them.

User Logon For Verification
Use the steps provided on page User Logon to verify configuration.



Pooled Virtual Desktops
Pre-requisites
Shared VDI or application delivery will require Windows Server 2008R2 or later to be installed with Accops HyWorks Session Host Server Module.

Refer section Accops HyWorks Session Host Server Installation for the installation process.

Refer section Resource Configurations in Shared VDI & Add Session Providers for the Session Providers configuration into HyWorks.

Configure Shared Hosted Desktop pools
Until now the deployment has following configurations:

Authentication Domain configured with appropriate authentication servers

Appropriate Shared Session Host Server configured to server shared hosted desktops to end users.

Create Shared Hosted Desktop pool
Go to VDI > Pools section.

Click Add New Pool > In Add Desktop Pool wizard,

Provide logical name, Display Name and description for desktop pool

Select Entitlement Type as

Device based - if HyDesk devices are to be assigned with Shared Hosted Desktop

User based - if assignments are for users, groups or OUs.

Select Desktop Pool Type as Shared Hosted Desktop.

Select Server Team as the session team, in which target session host server is added.

Select Provisioning as


1.  None: Use existing configured Session Host Server.

2.  Dynamic: Provision Session Host Server with help of hypervisor.
Select Connection Profile for this desktop pool. You can select None of you do not want to assign.

Specify Remote Desktop Connection Port number to connect the session from HyWorks Client. Default: 3389

Select Active checkbox.

Clear Maintenance Mode checkbox.

Click Next to proceed to add clients -users, groups or devices; as per selected Entitlement Type.

Click Next to proceed and select Classification Rules to restrict access of the pool.

Click Next to navigate to Advanced configurations:

Desktop display name that will show on endpoint.

Site Association Type: Set as Local Site if the pool is intended for local site or set as Remote Site to configure this server for remote site, which can be used only when DR is activated for the configured site.

SignIn Settings to login into Virtual Desktop: Set as per the requirements, for shared hosted desktop pool only domain name can be specified. The provided configurations will be used for remote sessions from endpoints.

Click Next to proceed to Virtual IP Address screen. Leave configurations unchanged unless virtual IP addresses have to be configured.

Click Finish. This will save the desktop pool and you will be navigated back to the Desktop Pools screen, showing the recently added desktop pool.

When users log in they will be displayed apps and shared hosted desktops assigned to them.

User Logon For Verification
Use the steps provided on page User Logon to verify configuration.


Publish Dedicated Desktops using Ubuntu-GNOME and CentOS-GNOME
Once Ubuntu or RHEL/CentOS based VMs are ready, they can be used in HyWorks deployments in following different ways:

Create a Dedicated Desktop pool using existing Linux VMs
From HyWorks Controller Management Console, go to VDI > Pools and open Add New Pool wizard.

In General tab

Provide appropriate pool name, Display Name and description

Select Entitlement Type as Device based or User based

Select Desktop Pool Type as Persistent Virtual Desktop

Select Session Provider as the one, which is hosting the target Linux VMs

Keep Provisioning as None

Select Assignment Life Span as Personal Desktop or Floating Desktop

Select Connection Profile for this pool. You can select None you do not want to assign connection profile for the pool

Set Remote Desktop Connection Port as being used by Linux VMs (Default is 3389).

Keep the Active flag as checked and Maintenance Mode as unchecked for pool to be available for end-users.

Go to Desktops tab and add the Linux VMs prepared with appropriate packages, DVM tools and configurations.

From Clients (Devices/Users) add users or devices

From Desktop Assignment tab, assign desktops to users or devices or keep it automatic for automatic assignment

Configure Classification Rules for restricting pool usage to classified client groups.

In Advance tab,

Option Dedicated Linux VM Pool must be checked.

Configure rest of the Advance configurations as per requirement

Check the configurations in Summary and save the desktop pool.

Now user with valid credentials can access the configured Linux desktop VM from HyWorks endpoints.

Create a Provisioned Desktop Pool using a Source Image
Provisioned Desktop pools are created when a VM is used as template or source to deploy multiple virtual machines. Here the source VM is Linux VDI server prepared appropriately using details provided above.

Follow the below given steps to create a provisioned desktops pool using prepared Linux VDI server as source VM:

From HyWorks Controller Management Console, go to VDI > Pools and open Add New Pool

In Add Desktop Pool wizard, General tab

Provide appropriate pool name and description

Select Entitlement Type as Device based, or User based

Select Desktop Pool Type as Persistent Virtual Desktop

Select Session Provider as the one which is hosting the target Linux VM

Keep Provisioning as Dynamic

Select Assignment Life Span as Personal Desktop or Floating Desktop

Select Connection Profile, if any specific connection profile is required or keep as None for no specific connection profile for the pool

Set Remote Desktop Connection Port as being used by Linux VMs (Default is 3389).

Keep the Active flag as checked and Maintenance Mode as unchecked for pool to be available for end-users.

Go to Deployment tab

Browse and add the Linux VM as Source VM that is prepared using appropriate process.

Set Source VM OS as Linux.

Provide appropriate entries for remaining mandatory fields e.g. VM-Name prefix, Number of VMs to be deployed etc.

From the Customization enable the customization of new VMs as per input provided. Provide appropriate entries for mandatory fields, e,g. Computer-Name prefix, if cloned VM to be joined to domain, then domain details and user having privileges to join the machine to domain etc.

For AD based deployments, select option Join Domain

For LDAP/Workgroups, select option Workgroup

From Clients (Devices/ Users) tab, add users or end-points to be given access of the VMs from this pool.

Configure Classification Rules for restricting pool usage to classified client groups

In Advance tab, configure the Advance configurations as per requirement

Check the configurations in Summary and save the desktop pool.

New desktops are provisioned as per the provided configurations. It might take 10 seconds to 15 seconds to launch the first user session.

Now user with valid credentials can access the configured Linux desktop VM from HyWorks endpoints.



Publish and Deliver Linux Desktops from Linux SHD Servers in HyWorks
To create a Linux shared hosted desktops pools:

Go to VDI > Pools > click Add New Pool

In Add New Pool wizard, General screen:

Give appropriate Name, Display Name and Description for the pool

Select Entitlement Type as User-based or Device-based

Select Desktop Pool Type as Shared Hosted Desktop

Select Server Team as server team, where Linux Shared Session Hosts are added

Select appropriate connection profile

Set Remote Desktop Connection Port as being used by Linux VMs (Default is 3389).

Keep the Active flag as checked and Maintenance Mode as unchecked for pool to be available for end-users.

In Users/Devices, add clients if required

Configure Classification Rules for restricting pool usage to classified client groups.

In Advanced tab, configure other details as required.

Virtual IP Address tab: Configure if needed (for quick start this can be kept unchanged).

Finish the Add New Pool wizard

Users or devices will now be able to access the published Linux Shared Hosted desktop pool.



Publish and Deliver Linux Applications from Linux SHD Servers in HyWorks
Following are configurations in HyWorks that will enable virtual shared hosted desktops and applications delivery.

Linux applications can be published via HyWorks Management Console using following steps.

Go to Apps > Virtual Apps > Add

In Add Application wizard > In Application Information tab > Select Application Platform as Linux

Note

Linux SHD Servers does not support file system browsing to select and fetch applications details and thus application path must be provided manually.

In Application Information tab > Application Information section

Enter the application display name and application path for the application to be published.

Application path examples:

/usr/bin/gedit

/usr/bin/google-chrome

Refer section Identifying Application Path on Linux SHD Server for identifying the application path.

Go to Additional Settings

Folder Settings: Configure this to show apps in specific folder structure on end-points.

Launch Settings: Configure to specify any application launch configurations

Access Settings: Use controls provided in this section to configure, how users can access published virtual app.

Move to Select Servers and Teams, select the Linux Session Teams or Linux Session Servers, which will be used to publish this virtual app.

Virtual IP Address: If published virtual app should have virtual IP address assignments, configure settings here, else keep it unchanged.

Entitlements: Add user, group or OU based entitlements as per requirement. Entitlements can be added later from Policies > Entitlements section.

Classification Rules: Configure Classification Rules for restricting app usage to classified client groups, else keep it unchanged.

Save the changes to published Linux based virtual app.

Now users can simply login from their respective end-points and connect to virtual app published from Linux server.


Pooled Sessions Limitations
Limitations for Linux Desktops/App Delivery
Linux SHD Server supports only single remote session of a user so it is recommended to publish only one application from each Linux SHD server

Multiple application sessions from a single server for a user are not supported

Shared hosted desktop session with any other application session from same server are not supported.

The very first user session of shared desktop/application from Linux client might take 15 seconds to 20 seconds to launch.

Single Instance per user is limited as single server single application is published.

Session management is controller driven and no VDI internal timeouts will work, which essentially means that if user is idle on Linux server, the agent can not track and process it accordingly.

Connection Profile for Linux App and SHD Delivery
For Linux application and SHD delivery to work properly, associated connection profile must have a few settings as follows:

Setting title	Value
Application Launch Mode	Shell Mode
Session Experience Option	Never Seamless


User Logon for Verification
Once all above configurations are done, the last step is to login from Client or User Workspace portal to verify whether all configurations are working correctly. Follow the steps specified below:

Download latest HyWorks Client from Accops Official Website Download Client.

Install HyWorks Client on Windows desktops and configure them as per the requirement

Client Mode: Desktop Client

Component Selection: Select appropriate USB Redirection Driver as per need

Launch HyWorks Client and connect to HyWorks Controller/ HySecure Server using IP address or Hostname

On successful registration, Controller icon on HyWorks Client Login screen will become green and Sign In button will be enabled

Provide appropriate Username and Password to login and click Sign In

User will be navigated to Application Tray having 3 tabs: Favorites, All Applications and Desktops -> All applications and desktops assigned to user will be displayed in respective tabs

Click any application or desktop to access

User will be logged in as per the configurations.

Similar verifications can be done using user logon and application access from HyLite portal.


Additional Configuration: Desktop Provision Customization
Provisioned Desktops -- Customization Specification
You can customize the cloned image used for provisioning new desktops using HyWorks Desktop pools. HyWorks uses Microsoft Sysprep utility or HyWorks Hyprep utility integrated in HyWork DVMTools to customize the Windows machines. Following configurations are used in Desktop tools to customize the VM:

Owner Name: Registered Owner of the Desktop

Organization Name: Registered Organization name of the Desktop

Computer Name: Computer name of the Desktop. To keep each Desktop identical HyWorks Controller will append the provided computer name with hyphen and a unique number in format Desktop Name-XXXX (Where XXXX represents numbering starting from 0001). Computer name cannot be more than 15 characters long. (* Mandatory field if customization is enabled)

Local Username: The new local user to be created on new Desktop. (Optional)

Warning

If Local Username field is left blank then make sure that at least one local admin other than Administrator user is already available on gold image. This is required as post Sysprep administrator user gets disabled and could lead to configuration with no local administrator.

Local Password: Password to be set for new local user (* Mandatory field if local username is provided)

Workgroup/ Domain Configurations:

Join a workgroup is selected by default and requires entries in Workgroup Input box

Join a Domain: To join new desktops to the exsiting Domain, configure following fields:

Domain Name: e.g. accopssystem.com (* Mandatory if Join a domain combo box is selected)

Username: User with privileges to join a machine to domain e.g. domain admin user (* Mandatory if Join a domain combo box is selected)

Password and Confirm Domain Password: Password for domain admin user (* Mandatory if Join a domain combo box is selected)

DNS Configurations:

Preferred DNS: Preferred DNS to be configured in network settings (Optional)

Alternate DNS: Alternate DNS to be configured in network settings (Optional)

AD Path: Full OU path to which this computer should be registered. The provided domain username should have adequate rights to create objects in specified OU. (Optional)

AD Group: Comma separate values for active directory groups. The machine will be made member of these group after the deployment.

Select Locale: For configuring local language of new Desktop

OS Product Key: Provided product key will be applied on new Desktop however if creating multiple Desktops then this should be mass activation key or should be left blank for activating the OS later manually.



Additional Configuration: Clients
How to add a custom logo on HyWorks Client
HyWorks clients can be configured to use a custom logo as per organization's requirements. To change the default logo, follow the below given steps:

Login into HyWorks Management Console with super administrator privileges

Go to Workspace > Organization

Select the organization and click Edit

In Edit Organization wizard, go to Portal Settings tab

Select checkbox Use Custom Logo to enable the option Upload Custom Logo

Click Upload Image and browse to select the image (Recommended Size: 200x49) 

Select appropriate area of image and click Save Banner Image



Finish Edit Organization wizard to save the settings

Exit the client, if already running and re-launch.

New logo will be in used on the next logon.


HyWorks Installation Overview
Objective
Installation section describes the installation process for different modules of Accops HyWorks product suite, which includes required softwares. detailed installation steps and troubleshooting.

Installers
Install following services independently or together on a Windows Server using HyWorks Controller setup:

HyWorks Controller Service

HyWorks Licensing Service

HyWorks Upgrade Service

HyWorks Monitoring Services

HyWorks Controller Management Console

Management Console for Administrator

User Portal for desktops and applications access

RMS Portal for reservation management

HyWorks Reservation Management Service

Important for Upgrade
Important

Accops HyWorks Controller v3.4 cannot be upgraded with any previous skyControl versions or HyWorks v2.5 with embedded database
Installation Flow
When installing the Accops HyWorks Controller Software, administrators are encouraged to follow the order specified below:

System requirements

Installation steps

Troubleshooting, if any


Hardware Requirements
Minimum configuration for Windows server to be configured as Accops HyWorks Controller:

Minimum 4GB RAM

4 vCPUs

10 GB free space on installation disk for installation, dependencies and post installation management files

Note

This is minimum requirement for configuring HyWorks Controller on Windows server but appropriate server sizing should be done as per expected load and roles configurations.



Software Requirements
Supported Operating Systems
The HyWorks Controller can be installed on the following Windows Server Operating systems:


-   Windows Server 2022

-   Windows Server 2019

-   Windows Server 2016

-   Windows Server 2012 R2

-   Windows Server 2008 R2 - SP1

-   Windows 10 (Supported but not recommended)
Note

The installer can be run on other Windows platforms that fulfills the system configuration and software requirements. However, it is recommended to install the software only on the mentioned server class machines for the better performance.

Other Software Requirements
To configure the Windows Server with the HyWorks Controller, the following software must be installed and configured on the system:

Dot Net 4.7.2 (Refer to the Installing .Net 4.7.2 section for details)

Microsoft SQL Server (Standard or Express Edition) (Refer to the Preparing Microsoft SQL Server for HyWorks Deployment section for details)

Microsoft Sync Framework v2.1 (Required for HyWorks Controller Clustering)

Microsoft SQL Server Compact Edition v4.0 SP1: Prerequisite for installing the HyWorks Controller or the Session Host Server.

If not installed, the setup should prompt for download using the internet. However, it can also be installed prior to invoking the setup.

Download link: https://www.microsoft.com/en-in/download/details.aspx?id=30709

Install Dotnet 4.7.2
The HyWorks Controller v3.2-GA (v8493) or later will require .Net 4.7.2 and should be installed on the Windows Servers prior to the installation of the HyWorks Controller.

Refer Microsoft article for .Net version compatibility with different Windows server versions: https://docs.microsoft.com/en-us/dotnet/framework/get-started/system-requirements

On Windows Server 2019 or above


Windows 2019 or later Windows servers comes preinstalled with .Net 4.7.2 or greater hence does not require explicait installation. In case .Net 4.7.2 is not found, then standard Microsoft recommended processes should be followed to install .Net 4.7.2.
On Windows Server 2016

The Windows Server 2016 comes preinstalled with .Net v4.6. Download and install the required .Net installer from the Microsoft website - https://support.microsoft.com/en-us/help/4054530/microsoft-net-framework-4-7-2-offline-installer-for-windows.

Follow the on-screen steps to install the default options. Once installed, configure other prerequisites for the installation of the HyWorks Controller.

On the Windows Server 2012 R2
The Windows Server 2012 R2 requires the following Windows updates installed on the system prior to the installation of .Net 4.7.2. Installation should be done in following sequence:


1. Install update **[kb2919442](https://www.microsoft.com/en-us/download/details.aspx?id=42153)**, that is the prerequisite for the update **[kb2919355](https://www.microsoft.com/en-in/download/details.aspx?id=42334)**

2. Install update **[kb2919355](https://www.microsoft.com/en-in/download/details.aspx?id=42334)**

3.  Install **[Dot Net 4.7.2](https://support.microsoft.com/en-us/help/4054530/microsoft-net-framework-4-7-2-offline-installer-for-windows)**
!!! Important


The HyWorks Controller deployment does not work on Windows 2012 or 2012-SP1.
On Windows Server 2008 R2
The minimum version of the Windows Server supported by .Net 4.7.2, is Windows Server 2008 R2-SP1. Any existing Windows Server 2008 R2 must be upgraded to SP1 before installing .Net 4.7.2.

Follow the steps given below to install and register .Net with IIS:


- Install the SP1 update of the Windows Server 2008 R2 (if required)

- Install **[Dot Net 4.7.2](https://support.microsoft.com/en-us/help/4054530/microsoft-net-framework-4-7-2-offline-installer-for-windows)**

- Once the installation process for Microsoft .Net 4.7.2 is complete, open the **Command** prompt with Administrator privileges and execute the following command:

> "C:\\Windows\\Microsoft.Net\\Framework\\v4.0.30319\\aspnet_regiis.exe -iru"
Register ASP.Net 4.0 post Web Server Role Addition
The Accops HyWorks Controller Management Console requires an appropriate application .Net pool to be added in the IIS.

In some instances, the successful installation and configuration of the Web Server role in Windows 2008 R2-SP1, .Net 4.0 pool does not register in the IIS.

Follow the steps given below to verify and configure appropriate .Net Pools.

Verify .Net Pool
Go to Start > Administrative Tools > Internet Information Services (IIS) Manager

Click Application Pools displayed on the inventory list given on the left-hand side. It should display all the application pools added on the servers.

Verify if the ASP.Net 4.0 pool is listed (Refer to the screenshot below)



If the ASP.Net 4.0 pool is not on the list, follow the steps given in the Configure ASP.Net 4.0 Pools section in the IIS.

Configure ASP.Net 4.0 Pools in IIS
Open the Command prompt with Administrator privileges and execute the following command:

"C:\Windows\Microsoft.Net\Framework\v4.0.30319\aspnet_regiis.exe -iru"

If the command is executed successfully, it should display a success status shown in the screenshot below:



Repeat the steps given in the Verify the .Net Pools section to verify pools.

Prepare Microsoft SQL Server for HyWorks Deployment
Configure the SQL Server as follows to support the HyWorks Controller and clustering:

Enable remote connections on the SQL Server instance

Configure the SQL server to listen on the static port

Turn on the SQL Server Browser service

Assumption: The SQL Server is already installed (with Windows authentication or mixed mode) and ready for configurations.

Enable Remote connections on the SQL Server Instance
Follow the steps given below to configure the SQL Server to allow remote connections:

Open the SQL Management Studio and connect to the SQL Server that is to be configured as the database server for the HyWorks Controller

Right click server name in the left pane and select Properties



Select Connections

Under the Remote server connections section, select the Allow remote connections to This server



Configure the SQL server to communicate on the static port
The HyWorks Controller supports communication with the SQL server over static port. Using the dynamic port may result in database connectivity problems.

VERIFY WHETHER THE SQL SERVER IS USING A STATIC TCP PORT
Open the SQL Server Configuration Manager

Click the SQL Server Services



Note down the process ID of the SQL Server instance as displayed in the right pane, for example, 116 being displayed in the above image

Open the command prompt and execute the following command:

Code

netstat -ano | find /i \<PID of SQL Server>

e.g. netstat -ano | find /i "116"



The command will not show any output if the SQL Server is not using a static TCP port and should be configured to use one, as shown in the above screenshot.

ENABLE THE SQL SERVER TO COMMUNICATE ON A STATIC PORT
Go to the SQL Server Configuration Manager

Click SQL Server Network Configuration

Right click TCP/IP protocol and select Enable



Restart the SQL Server service and identify the process ID assigned to the SQL service.



To verify whether the SQL services are listening on a TCP port or not, execute the following command in the command prompt:

netstat -ano | find /i \<PID of SQL Server>



To configure a specific port

In the SQL Server Configuration Manager

Click SQL Server Network Configuration

Right click TCP/IP protocol

Select Properties

Go to IP Address > IPAll

Remove the value configured in the TCP Dynamic Ports section. Make sure not to configure 0 (zero).

Configure 1433 or any other port as per the requirement for TCP Port



Restart the SQL Server service. Identify the new process ID assigned to the SQL service and in the command prompt, execute the following command to verify whether the SQL Service is now listening on the configured TCP Port i.e. 1433.

netstat -ano | find /i "PID of SQL Server";



SQL Express should now be configured to listen on the standard port 1433. Check the SQL Server port reachability from the Controller Installer server.

Start the SQL Server Browser service
Open the SQL Server Configuration Manager
Click on SQL Server Services
Right-click SQL Server Browser service and select Properties.



Go to Service and select the Automatic for Start Mode.



Click Apply

Click Start to start the SQL Browser service



Confirm whether the SQL Server Browser service is up and running.



Database Configuration References
For details on enabling remote connections in the SQL Server 2008k2R2 and 2012KR2, refer:

http://blogs.msdn.com/b/walzenbach/archive/2010/04/14/how-to-enable-remote-connections-in-sql-server-2008.aspx

http://blog.citrix24.com/configure-sql-express-to-accept-remote-connections/

Microsoft Sync Framework v2.1 (KB2703853)
The Microsoft Sync Framework is required only for HyWorks Controller clustering.

The Microsoft Sync Framework is required to synchronization data between the primary server and the secondary HyWorks Controller servers in a cluster. The following synchronization tools must be installed on both the HyWorks Controller servers. Download Synchronization tools from:

English: Integrated in Controller setup and does not require explicit installation.
Japanese: MS Sync Framework - Japanese
Important

Latest HyWorks Controller by default installs MS Sync Framework 2.1-KB2703853 and thus need not to be installed again after fresh installation or upgrade.
Installation of HyWorks Controller on Japanese Windows server will require explicit installation of MS Sync Framework 2.1-KB2703853.
Server Compatibility and Synchronization Tools:

The setup of the Synchronization tools must be chosen as per the server OS. This means that if the HyWorks Controller is being installed on the 64bit Windows Server 2012 R2, then the Synchronization tools x64 should be used, whereas if the Controller is being installed on the 32-bit Windows Server 2008 R2, then the Synchronization tools x86 should be installed.

To install the Microsoft Sync framework download the setup from the URL specified above and follow the Installation wizard. Detailed steps are provided in the section below "Prerequisite-Install Microsoft Sync Framework 2.1(KB2703853).

Install Microsoft Sync Framework 2.1
Download the Microsoft Sync Framework v2.1 Setup from https://www.microsoft.com/en-us/download/details.aspx?id=19502

Double click the setup file or right click and select the Open/Run as Administrator option

In the Synchronization-v2.1-x64-ENU section, click Next



On the License Agreement screen, select the I Agree option and click Next



Click Next on the Confirm Installation screen



Wait for the installation process to complete



Click Close to close the Setup wizard once the installation is successful.

Important

Installation of the Microsoft Synchronization Framework is required on both the HyWorks Controller Servers.

The Synchronization Framework must be installed before configuring the controllers in a cluster but can be installed before or after the HyWorks Controller.

Install the Microsoft SQL Server Compact 4.0 SP1
The SQL Server Compact 4.0 SP1 is required to install the HyWorks Controller. SSCE is used by HyWorks session host agent and monitoring services for storing some data temporarily.

To install the SQL Server Compact 4.0 tools, follow the steps given below:

Download the Microsoft SQL Server Compact 4.0 Setup from https://www.microsoft.com/en-US/Download/confirmation.aspx?id=30709

Double click or right click the setup file (SSCERuntime_x64-ENU.exe) and select the option to Open/Run as Administrator



In the Microsoft SQL Server Compact section, click Next



On the License Agreement screen, select the I accept option and click Next



Click Install on the Confirm Installation screen



Wait for the installation process to finish

Click Close to close the Setup wizard after the installation is successful.



Server Configuration
For some specific deployment types, below given configurations may be required.

Provide User Logon as a Service Rights on Windows Server
For deployments, where SQL database configuration needs to be done with Windows Authentication, HyWorks Controller service must be configured to run with the specific user account. The provided user account must have logon as a service privileges on the system otherwise HyWorks Controller service may fail to start after the installation.

Follow the steps given below to configure users accounts with logon as a service privilege:

Click Start > Run, type mmc, and click OK.

On the File menu, click Add/Remove Snap-in > Add, double click Group Policy Object Editor.

In Group Policy Object, click Browse, browse to the Group Policy object (GPO) that you want to modify, click OK followed by Finish.

Click Close followed by OK.

In the console tree, click User Rights Assignment, the option is available at following location: > GroupPolicyObject\ [\Computer Name] Policy >> Computer Configuration >> Windows Settings >> Security Settings >> Local Policies >> User Rights Assignment

In the details pane, double click Log on as a service.

If the security setting has not been defined yet, select the Define these policy settings.

Click Add User or Group. Add the appropriate account to the list of accounts that possess the Log on as a service right.

Open command prompt as administrator, and execute below command to push the changes to take effect:


   -    gpupdate /force
Added user account can now be used to run HyWorks Controller service.



Database Requirements
HyWorks Controller supports following versions of Microsoft SQL Server:

Microsoft SQL Server 2019

Microsoft SQL Server 2017

Microsoft SQL Server 2016

Microsoft SQL Server 2014

Microsoft SQL Server 2012

Please refer section Preparing Microsoft SQL Server for HyWorks Deployment for detailed instructions on SQL Server configurations for HyWorks installation.


Installation Modes
HyWorks can be installed in two different modes:

Standalone mode
Cluster mode
For each mode, two types of installation is supported:

First time Installation

Maintenance

a. Add New Components

b. Repair

c. Upgrade

d. Uninstall



Controller
Follow the process provided in below sections to install HyWorks Controller version v3.3-R3 or later including latest v3.4.

Note

Running HyWorks setup from from UNC path is not supported and will result in setup failure. It is needed to copy HyWorks setups locally on target servers instead of running them from UNC path.
Running HyWorks setup may also fail during file extraction, if logged-in user is having roaming profile. In this case, login with local administrator user will be required.
Important Options in HyWorks Controller Installation Wizard
Components to Install During installation, the following components of HyWorks management layer can be installed:

HyWorks Controller Service: Select this option, if server is to be configured as HyWorks Controller node.
HyWorks Controller Management Console: Select this option, if server is to be used for hosting Management Console web application as well. Management Console should not be installed on servers functioning in broker role.
Accops HyWorks Reservation Management Service: Option will be enabled only when management console is installed on the same server. HyLabs or Reservation Management Services should only be installed, if deployment is intended to have HyLabs as well.
Deployment Modes HyWorks Controller can be installed in the following modes:

Two-node Active-Passive Cluster: HyWorks controller nodes can be installed on two identical Windows servers and can be joined to form a cluster with one HyWorks controller acting as master or primary node. This deployment mode can be used to serve up to 2500 concurrent user sessions. This mode should be used for deploying standalone HyWorks Controller, which can be used for some quick verification or evaluation.

Multi-node Active-Active Cluster: Multiple HyWorks Controller nodes are installed with appropriate roles (node type) to form a multi-node cluster. Two HyWorks nodes functions as management nodes to manage complete HyWorks infrastructure, where as one or more HyWorks nodes can be installed as broker nodes to handle client and session host server requests. Multi-node setup requires external load balancer to distribute traffic among broker (session) nodes. This deployment mode should be used for larger deployments, going to have more than 2500 concurrent user sessions.

Database High-availability Configuration Database high-availability can be achieved using following mechanisms:

SQL Server Managed Database High Availability: In this mechanism, HyWorks requires clustered SQL servers behind a single access point. Database availability will be managed by SQL Servers and HyWorks will simply access it on address provided.

HyWorks Managed Database High Availability: In this mechanism, HyWorks manages database high availability. HyWorks initiates syncing of databases every minute using Microsoft Sync Framework.

Roles (Node) Types HyWorks Controllers can have following roles:

Management Node: responsible for communication with session providers and managing HyWorks deployments. But will not participate in endpoint requests handling (Login, connections etc.) or session updates by session host servers.

Broker (Session) Node: responsible to perform all the brokering tasks i.e. taking endpoint requests and getting session updates. Broker nodes will not participate in management activities.

SQL Server Authentication Mechanism HyWorks Controller supports following authentication mechanism:

SQL Server Authentication: Uses username and password to connect to SQL Server for database creation and management by HyWorks Controller service.

Windows Authentication: Requires HyWorks Controller service to run with user credentials. The configured user must have rights to logon as service on server and must have access to SQL server for database creation and management.

If either of the databases (Service database or Log database) is configured to use Windows authentication, HyWorks Controller service must be configured to run with user account having logon as a service rights on server.

While installing broker node, if HyWorks Controller management nodes are installed with Windows authentication, broker node will also use Windows authentication and will require to run with user account having logon as a service rights on server.

High-level Workflow for Cluster Deployments (Combinations)
Using HyWorks Controller installation wizard administrator will be able to configure Windows server to perform specific role in HyWorks management. This section provides steps to deploy HyWorks Controller in specific role.

Two-node Active-Passive Cluster
Note

Two node active-passive cluster requires MS Sync Framework v2.1 to be installed on HyWorks Controller servers
MS Sync Framework - English is already included in HyWorks Controller Setup
MS Sync Framework - Japanese requires installation separately. It can be downloaded from here
High Level Steps:



Install HyWorks Controller# 1: Using instructions as provided below
Welcome screen: Proceed with default option
License and Agreement screen: Proceed by agreeing to terms and conditions
Installation Path screen: Configure as per requirements
Component Selection Screen: Select following components
HyWorks Controller Service
HyWorks Controller Management Console
Deployment Type: Select as Two-node Active-Passive Cluster
Service Database Configuration Screen: SQL Server address with instance name, database and authentication configuration (Windows authentication or SQL Server Authentication), as per requirement.
Log Database Configuration Screen: SQL Server address with instance name, database and authentication configuration (Windows authentication or SQL Server Authentication), as per requirement. We recommend to have a different instance of SQL server for log database and not to use same instance on which HyWorks service database is configured.
Restore Database: Don't select anything and proceed.
HyWorks Controller Administrators: As per requirement and setup
Service Logon Credentials: As per requirement and setup
Port Settings: Use default (38866 for Controller service and 443 for management console) or as per requirement
Finish the setup and one management node of HyWorks controller will be ready for two-node active-passive cluster deployment.
Install HyWorks Controller# 2: Follow same steps as used for HyWorks Controller# 1 installation:
A different Windows Server with identical configuration should be used
Service Database Configuration and Log Database Configuration should use a different instance of SQL server, than HyWorks Controller# 1 and authentication mechanism should be same.
Installation will get completed and second node of HyWorks controller will be ready for two-node active-passive cluster deployment.
Join to Cluster: The two HyWorks controllers can be joined into Cluster from Management Console of either of them to form a two-node active-passive cluster.
Multi-node Active-Active Cluster with HyWorks Managed Database High Availability
Note

Two node active-passive cluster requires MS Sync Framework v2.1 to be installed on HyWorks Controller Management nodes
MS Sync Framework - English is already included in HyWorks Controller Setup
MS Sync Framework - Japanese requires installation separately. It can be downloaded from here
High Level Steps:



Install HyWorks Controller Management Node# 1: Using instructions as provided below
Welcome screen: Proceed with default option
License and Agreement screen: Proceed by agreeing to terms and conditions
Installation Path screen: Configure as per requirements
Component Selection Screen: Select following components
HyWorks Controller Service
HyWorks Controller Management Console
Deployment Type: Select as Multi-node Active-Active Cluster
Cluster Configuration:
Roles to install: Set as Management Node
Database High Availability: Select as **HyWorks Managed Database High Availability)
Service Database Configuration Screen: SQL Server address with instance name, database and authentication configuration (Windows authentication or SQL Server Authentication), as per requirement.
Log Database Configuration Screen: SQL Server address with instance name, database and authentication configuration (Windows authentication or SQL Server Authentication), as per requirement. It is recommended to have a different instance of SQL server for log database and not to use same instance on which HyWorks service database is configured.
Restore Database: Don't select anything and proceed.
HyWorks Controller Administrators: As per requirement and setup
Service Logon Credentials: As per requirement and setup
Port Settings: Use default (38866 for Controller service and 443 for management console) or as per requirement
Finish the setup and one node of HyWorks controller will be ready for two-node active-passive cluster deployment.
Install HyWorks Controller Management Node# 2: Follow exactly same steps as used for HyWorks Controller Management Node# 1 installation:
A different Windows Server with identical configuration should be used
Service Database Configuration and Log Database Configuration should use a different instance of SQL server, than HyWorks Controller# 1 and authentication mechanism should be same.
Installation will get completed and second node of HyWorks controller will be ready for two-node active-passive cluster deployment.
Join to Cluster: The two HyWorks controllers can be joined into Cluster from Management Console of either controller server. Broker nodes will be added in to the cluster later.
Install HyWorks Controller Broker Nodes: Follow below steps to install one or more broker nodes and configure into this multi-node active-active HyWorks managed database high availability cluster
Welcome screen: Proceed with default option
License and Agreement screen: Proceed by agreeing to terms and conditions
Installation Path screen: Configure as per requirements
Component Selection Screen: Select only HyWorks Controller Service. Do not install management console on broker node.
Deployment Type: Select as Multi-node Active-Active Cluster
Cluster Configuration:
Roles to install*: Set as Broker Node**
*Broker Node Configuration: Set as HyWorks Controller Management Node# 1 and HyWorks Controller Management Node# 2 as installed and configured in step# 1/2.
Log Database Configuration Screen: SQL Server address with instance name, database and authentication configuration same as used for log-database configuration of Management node# 1 log-database. Broker node will push logs to currently primary management node.
Service Logon Credentials: Same as management nodes.
Port Settings: Use default (38866 for Controller service) or as per requirement
Finish the setup and one node of HyWorks controller broker node will be installed and become member of multi-node cluster deployment with HyWorks managed database availability.
Repeat these steps to add more broker nodes in the deployment.
Multi-node Active-Active Cluster with SQL Managed Database High Availability
High Level Steps:



Install HyWorks Controller Management Node# 1: Using instructions as provided below
Welcome screen: Proceed with default option
License and Agreement screen: Proceed by agreeing to terms and conditions
Installation Path screen: Configure as per requirements
Component Selection Screen: Select following components - HyWorks Controller Service - HyWorks Controller Management Console
Deployment Type: Select as Multi-node Active-Active Cluster
Cluster Configuration: 1. Roles to install: Set as Management Node 2. Database High Availability: Select as SQL Server Managed Database High Availability)
Service Database Configuration Screen: *SQL Server cluster address with instance name, database and authentication configuration (Windows authentication or SQL Server Authentication), as per requirement.
Log Database Configuration Screen: SQL Server address with instance name, database and authentication configuration (Windows authentication or SQL Server Authentication), as per requirement. It is recommended to have a different instance of SQL server for log database and not to use same instance on which HyWorks service database is configured.
Restore Database: Don't select anything and proceed.
HyWorks Controller Administrators: As per requirement and setup
Service Logon Credentials: As per requirement and setup
Port Settings: Use default (38866 for Controller service and 443 for management console) or as per requirement
Finish the setup and one management node of HyWorks controller will be ready for two-node active-passive cluster deployment.
Install HyWorks Controller Management Node# 2: Follow exactly same steps as used for HyWorks Controller Management Node# 1 installation:
A different Windows Server with identical configuration should be used
Service Database Configuration: Should be exactly same as configured for first management node. As both controllers will be pointing to same database instance and SQL server will manage database high availability.
During installation of second management node, it will prompt to confirm reconfiguration of database, select as No to proceed without reconfiguring database.
Log Database Configuration should use a different instance than HyWorks Controller# 1. However authentication mechanism should be same.
Installation will get completed and second management node of HyWorks controller will be ready for two-node active-passive cluster deployment.
Install HyWorks Controller Broker Nodes: Follow below steps to install one or more broker nodes and configure into this multi-node active-active HyWorks managed database high availability cluster
Welcome screen: Proceed with default option
License and Agreement screen: Proceed by agreeing to terms and conditions
Installation Path screen: Configure as per requirements
Component Selection Screen: Select only HyWorks Controller Service. Do not install management console on broker node.
Deployment Type: Select as Multi-node Active-Active Cluster
Cluster Configuration:
Roles to install*: Set as Broker Node**
*Broker Node Configuration: Set as HyWorks Controller Management Node# 1 and HyWorks Controller Management Node# 2 as installed and configured in step# 1/2.
Log Database Configuration Screen: SQL Server address with instance name, database and authentication configuration same as used for log-database configuration of Management node# 1 log-database. Broker node will push logs to currently primary management node.
Service Logon Credentials: Same as management nodes.
Port Settings: Use default (38866 for Controller service) or as per requirement
Finish the setup and one node of HyWorks controller broker node will be installed and become member of multi-node cluster deployment with HyWorks managed database availability.
Repeat these steps to add more broker nodes in the deployment.
HyWorks Controller Installation Wizard Flow
This section provides details of HyWorks Controller installation for different types of deployments.

Log in to Windows Server as a local administrator.

Copy the Accops HyWorks Controller installer to Windows Server having all the prerequisites configured. Refer Software Requirements to check the Software Requirements for Accops HyWorks Controller.

Important

HyWorks Controller v3.3-R3 or later setup is having integrated Microsoft Sync framework and thus it is not required to be installed separately.
Right click the installer to launch the Installation wizard and select option Run as Administrator



Click Next on the welcome Screen to proceed with the installation.



Accept license agreement and click Next to proceed.



Change the installation directory, if required and click Next to proceed. The default installation folder is "C:\Program Files (x86)\Accops".



Select the following HyWorks Components to be installed

Accops HyWorks Controller Service: Must be selected

Accops HyWorks Management Console: Should be selected. Usually in two-node deployments, management console is installed with HyWorks controller service.

Accops HyWorks Reservation Management Service: Not to be selected. It should be selected only if same HyWorks server to be used for HyLabs deployment and usage.



Deployment Type: Select deployment type as per your requirement and click Next. Installer wizard flow will be decided from deployment type selected at this step.

Two-node Active-Passive Cluster: Select this to deploy two-node cluster with one node working as active at a time. Choosing this option will not require cluster configuration screen, jump to step# 10 for two node deployment.
Multi-node Active-Active Cluster: Select this mode to deploy multiple HyWorks Controllers and configure with appropriate roles (management/ Broker node). Choosing this option will require administrator to set cluster configuration options.


Cluster Configuration: Choosing Deployment Type as Multi-node Active-Active Cluster Deployment, will require administrator to select Roles to install. In multi-node deployment, HyWorks Controller will be installed to function as management node or broker node and will perform role specific tasks.

Management Node: Select Roles to install as Management Node, to configure server as HyWorks Controller Management node for multi-node deployment. Management node installation will require configuring database high availability. HyWorks supports following two mechanisms:

SQL Server Managed Database High Availability: HyWorks will be configured with SQL cluster, available on single access point. Database high availability will be taken care by SQL cluster. Both HyWorks Management nodes will be pointing to same database.

HyWorks Managed Database High Availability: HyWorks will be managing database availability by syncing databases between primary and secondary HyWorks management nodes. Both management nodes will be having their own databases.

Database High Availability

Broker Node: If this server should be installed as HyWorks Controller broker node. While configuring this server as broker node, administrator will be needed to provide host address of both of the management nodes.

Broker Node Configuration: Provide information of host-address and port-number of both management nodes, e.g. mgmtsrv1:38866 or 192.168.1.1:38866. On providing management node address, broker node will automatically get database configurations and will not require database configurations. Jump to step# 11 for broker node installation.
Broker Node Configuration

Click Next and proceed to configure Service database. (Not applicable for broker nodes, jump to step# 11 for broker node installation). Configure service database appropriately using following configurations and click on next button to proceed:

Database Information: Database Server address, static TCP port to connect to SQL Server, database name.
Database Address in the format - <Server IP or FQDN>\\<SQL Instance Name>. e.g. if SQL Express is installed on the same instance then Database address could be localhost\SQLExpress for Microsoft SQL Server standard and Enterprise: localhost\MSSQLSERVER (for named instance)
Port: Provide the static port of Microsoft SQL Server e.g. 1433 (Default TCP Port for SQL Server)

Database Name: Provide the name of the database to be created. Default name is EDCDB.
Authentication mechanism: HyWorks supports following two authentication mechanism:

SQL Server Authentication. It will require SQL Server User and Password.
Windows Authentication. Use user credentials to connect to SQL Server. User credentials will be taken in next screen and will be used to run HyWorks Controller service.
Service Database Configurations as per Deployment and Node Type: Here we will try to list out database configurations to be followed for different types of deployments and node types:
Management Nodes for Two-node cluster or Multi-node cluster with HyWorks Managed Database High Availability
Both management nodes should point to different SQL servers to be configured for database.
Management Nodes for Multi-node cluster with SQL Server Managed Database High Availability
Both the management nodes must use same SQL server cluster address, port number and database name.


Important

During installation of 2nd management node for multi-node deployment with SQL server managed database, on providing service database information same as first management node, prompt will be shown to confirm action:

Recommended to click on No button, to avoid re-configuration of database as it is already configured during installation of first management node and 2nd management node is pointing to same database.

Re-configure existing database: Click on Yes button to proceed with re-configuring database, which was already configured during installation of first management node. The action is not recommended during installation of 2nd management node in SQL server managed database high availability case.



In cases, where lower version of database exists and change prompt comes up or administrator is not knowing if database configurations are done previously or not, then administrator can opt to click on Yes button and re-configure database.
Click Next to proceed to configure Log server. Log database configuration should be done as specified below:

Database Information: Database Server address, static TCP port to connect to SQL Server, database name.
Database Address in the format - <Server IP or FQDN>\\<SQL Instance Name>. e.g. if SQL Express is installed on the same instance then Database address could be localhost\SQLExpress for Microsoft SQL Server standard and Enterprise: localhost\MSSQLSERVER (for named instance)
Port: Provide the static port of Microsoft SQL Server e.g. 1433 (Default TCP Port for SQL Server)
Log Database Name: Provide the name of the database to be created. Default name is HyLog.
Select appropriate Authentication mechanism:
SQL Server Authentication. It will require SQL Server User and Password.
Windows Authentication. Use user credentials to connect to SQL Server. User credentials will be taken in next screen and will be used to run HyWorks Controller service. 
Log Database Configurations as per Deployment and Node Type:
Management Nodes for Two-node cluster or Multi-node cluster with HyWorks or SQL Managed Database High Availability
Both management nodes should point to different instance of SQL server to be configured as log database.
Broker Nodes
Broker nodes should use log-database configurations, same as primary management node. This will help administrator to check any failures occurring on broker nodes from management console of primary management node itself.
Broker nodes also fetch log database information of secondary management node and in case of switching between management nodes, broker nodes also switch log-database.
During broker node log-database configuration and pointing to log-database of primary management node, prompt will be shown, stating 'Database already exists', click on Yes button to proceed.
Click Next to configure the Service Logon Credentials for HyWorks Controller Service. You can either set Local System Account or use current account to log on.

Local System Account: HyWorks controller service will run using Local System Account as service logon credentials.. The option will be used when HyWorks Controller service database configuration uses SQL Server Authentication.
This Account: Configuring SQL Server with Windows Credentials require logon credentials to run the HyWorks Controller service. When HyWorks Controller database connection is made using Windows Authentication, option to run service with specific user credentials in shown. When service runs with specific user credentials, the same user is used to connect to SQL server.
Refer section Logon as a service for detailed instructions on how to provide logon as a service rights to user. 
Click Next to move to Restore database screen. For first time installation, click on Next button to move to next screen.

Select Restore database option Only in cases, where HyWorks node should be restored from backed-up database to use existing data.


Refer HyWorks Backup and Restore for detailed instructions on database back and restoration.
Click Next to configure communication ports.

Default port for Accops HyWorks Controller Service is 38866. Change if required.

Default port for Accops HyWorks Management Console is 443. Change if required.



Click Next to configure HyWorks Controller administrators. You can either set Domain User Group or Local User as administrator:

Domain Group Configuration: Domain User Group configured as super-administrator. To configure Domain User group, make sure:

System is in domain

User is logged in with domain credentials and having administrative privileges on server.

Local User Configuration: Local HyWorks user created and designated as Super-administrator. To create a local user administrator, provide the username (default is HyWorksAdmin) and password.



Click Next. Verify information displayed on Confirmation screen and click Install to start the installation.



This will start installation and appropriate roles and feature will be installed. Screen will display status and updates of installation progress as:

Component being installed
Installation status of the component
Progress bar and related information of the changes being made to the system


Once the installation is complete, screen displays:

Installation status of individual components
URL of Accops HyWorks Management Console (if Installed)


Installation Verification
Administrator can verify the successful installation by checking the installation logs and services running as given below:

Setup Status Prompt

Setup Status is displayed on the last screen of installation. It displays details about all the installed components and their respective status.

Access and log in to Accops HyWorks Management Console

After the successful installation, open Supported browser (IE11, Firefox or Google Chrome) and type the URL: https://\<IP of HyWorks Controller>:\<port number> e.g.,

Provide appropriate credentials to log in.

Installation Logs
For troubleshooting or verification purpose, HyWorks installation logs can be used. Installation logs are created at the following location:

%appdata%\HyWorksController\Logs

Session Host
HyWorks Session Host server Installation on a Windows server
The HyWorks Session Host Server components are required on the Windows RDS Servers to deliver Applications and Shared desktops to end-users using HyWorks.

The HyWorks Session Host server can be installed using session host installer setup.

Note

Copy the HyWorks setup locally on the the target server. Running the HyWorks setup from the UNC path is not supported and will result in a failure.
Running the HyWorks setup may also fail during the file extraction process, if the logged in user has a roaming profile. Hence it is recommended to log in with local administrator user credentials.
The HyWorks Session Host server comprises of the following components:

Accops HyWorks Session Host

Accops HyWorks Monitoring Service

Accops Session Server Extension

Accops Session Recording

Accops HyWorks DVMTool-Lite

Accops User Experience Manager (AUEM)

Refer to the Accops HyWorks Session Host Server section for details.

Prerequisites
.Net 4.7.2(or later): Refer to the Software Requirements section.

Microsoft SQL Server Compact Edition v4.0-SP1: Prerequisite for installing the HyWorks Controller or the Session Host Server. SSCE is used by HyWorks session host agent and monitoring services for storing some data temporarily.

If not installed, the setup should prompt to download using the internet. However, it is also possible to install prior to invoking the setup.

Direct download link: https://www.microsoft.com/en-in/download/details.aspx?id=30709

Installation Steps
Log in to the Windows Server with user credentials that have administrative privileges with permission to install certificates.

Copy the HyWorks Session Host server setup on the Windows server, which is to be configured with the HyWorks Session Host server role.

Launch the Installation wizard by clicking the installer.



Click Next to proceed with installation.



Accept the terms and click Next to proceed.



Change the Installation Directory, if required, and click Next to proceed. The default installation folder is C:\Program Files (x86)\Accops"]



Click the Install to start the installation process for the HyWorks Session Host.



This will start installation and automatically enable all the required roles, features as well as the following components:

Microsoft Remote Desktop Services: On selecting the HyWorks Session Host Server role during installation, the remote desktop server role will get installed automatically with the port number 3389.
Accops HyWorks Session Host service: Required for delivering the application, the Shared Hosted desktops from the Session Host server and for management. The port number for the Session Host service is 38871.
Accops HyWorks Monitoring Service: Required for monitoring the system performance. The port number for Monitoring Service is 38870.
Accops Sessions Extensions: Required for HyPrint and sending messages to logged-in users.
Session Recording: Required for recording users sessions.
Accops HyWorks DVMTool-Lite: Required to enable the VM customization and VM Scale Booster to work.
Accops User Experience Manager: Required for providing system performance information to Accops Reporting Server, Session Recording, Session Management and displaying messages to end-users.
The current state of installation will be displayed on the screen.



Once the installation process is complete, the system should reboot to allow Windows to make the necessary changes to the system. Click Yes to restart the computer.

\



The Windows server should now be ready with the Accops HyWorks Session Host server role configured.

Installation Logs
HyWorks installation logs can be used for troubleshooting and verification purposes. Installation logs are created at the following location:

C:\ProgramData\HyWorksSessionHost\Logs


HyWorks DVM Tools Installation
This section provides information of the HyWorks DVM Tools installation process on Windows desktop VMs.

Note

Copy the HyWorks setup locally on the the target server. Running the HyWorks setup from the UNC path is not supported and will result in a failure.
Running the HyWorks setup may fail during the file extraction process, if the logged in user has a roaming profile. Hence it is recommended to log in with local administrator user credentials.
Overview
Accops HyWorks DVM Tools is an integrated software package, installed on the desktop virtual machines residing on hypervisors like VMware ESXi, Microsoft Hyper-V or Nutanix AHV. HyWorks DVM Tools facilitates trouble-free access of the desktop to end-users.

The DVM Tools package comprises of the following components:

HyWorks Desktop Agent

HyWorks USB Cleaner (USB Disconnection/Remover Utility)

HyWorks USB Redirection Module [Built-In USB Redirection Driver (Server-side) module]

Accops Session Server Extensions

Accops Session Recording

AUEM (Accops User Experience Manager)

Refer to the Accops HyWorks DVM Tools section for details.

Download Links for Latest Packages
Check and download the latest HyWorks DVM Tools from the Accops Support portal or website.

The download link is also available from the HyWorks Controller Management Console > Help page.

Prerequisites
HyWorks DVM Tools for Windows requires Dot NET 4.7.2. Refer to the Software Requirements section for details.

Silent mode Installation steps (optional)
Use below given command to install the HyWorks DVM Tools for Windows silently:

HyWorksDVMTools.exe /S /desktopagent=1 /hyprint=1 /usbcleaner=1 /usbredirection=1 /EnableShdMode=0

Note

To skip installation of any module, pass flag as 0 instead of 1.
By default, EnableShdMode is disabled. This flag is useful to support SHD Push feature.
Installation steps
Log in using user credentials with local administrator privileges on the dedicated desktop.

Download HyWorksDVMTools.exe. Verify the MD5 sum of the downloaded file.

Double click and launch the Installer. Click Next to proceed.



Accept the License Agreement by clicking I Agree.



Select the modules to be installed and click Next.



Choose the destination folder and click Install to start the installation process.



Once the installation is complete, click Finish. In case of an upgrade, you will be a prompted to reboot the desktop VM. The installation will be complete after the machine is rebooted.

Installation Logs
HyWorks installation logs can be used for troubleshooting and verification purposes. Installation logs are created at the following location:

<DVM Tools Installation Directory>\HyWorks Desktop Agent\Logs, e.g.
C:\Program Files (x86)\Accops\HyWorks Desktop Agent\Logs



VM Scale Booster
The HyWorks VM Scale Booster is used by the HyWorks Desktop Agent to send status updates and events. The latest releases of the HyWorks VM Scale Booster also supports pushing the HyWorks Session Host Server and the Monitoring Service status/system load information. This helps in getting faster updates and reduces polling overhead on the controller.

Installation of the HyWorks VM Scale Booster
Prerequisites
The HyWorks VM Scale Booster can be installed either on the controller server or any other Windows machine that fulfills below mentioned prerequisites:

.NET Framework 4.7.2

Erlang (otp_win64_22.0.exe)

RabbitMQ

.Net Framework 4.7.2 Installation
Dot net 4.7.2 comes pre-installed in the latest Windows servers, but for the older versions of Windows servers, it needs to be downloaded through the Microsoft website and installed.

Erlang (OTP) Installation
Download Erlang (OTP) v22.0 from http://erlang.org/download/
Note

Exact version of Erlang (OTP) is required.
Connect to the server that needs to be configured as the VM Scale Booster with user credentials that have local administrator privileges, double click otp_win64_22.0.exe and proceed with the the installation process with all the default options.







Once the installation process is complete, click on Finish to close the Installation wizard of Erlang.

Reboot, if required, to complete the Erlang installation process.

RabbitMQ (v3.7.17) Installation
Note

Exact version of RabbitMQ is required.
Download the Rabbit MQ server module v3.7.17 from https://github.com/rabbitmq/rabbitmq-server/releases/tag/v3.7.17

Connect to the server that needs to be configured as the VM Scale Booster with user credentials that has local administrator privileges, double click on rabbitmq-server-3.7.17.exe.





Once the installation process is complete, confirm whether the RabbitMQ service is installed and running.

HyWorks VM Scale Booster Installation
Download the latest HyWorks VM Scale Booster for Windows and follow the steps listed below to install:

Double click on the HyWorks VM Scale Booster Installer [HyWorksVMScaleBooster_Net472.exe].

In the Accops HyWorks VM Scale Booster wizard, click Next to proceed.



Select the components to be installed and click Next.

Installing for the first time: Select both the components - Accops HyWorks VM Scale Booster and Configure RabbitMQ

Upgrade: Select the Accops HyWorks VM Scale Booster



Accept the License Agreement by clicking I Agree option to proceed.



This will start the installation process. Once complete, click Finish to close the Installation wizard



Check the services section to verify whether the Accops HyWorks VM Scale Booster Service is installed and running.

HyWorks VM Scale Booster Configuration
After a successful installation, the following configurations should be done to enable communication between the HyWorks VM Scale Booster and the HyWorks Controller:

Locate the appsettings.json file in the Directory where the HyWorks VM Scale Booster is installed - C:\Program Files (x86)\Accops\HyWorks VM Scale Booster\appsettings.json.

Update the following tags (refer to the screenshot)

Servers

IP1: IP address of the Primary HyWorks Controller

IP2: IP address of the Secondary HyWorks Controller

RabbitMQ

Host: IP address of the RabbitMQ server

Port: If the RabbitMQ is running on a different port other than the default 5672 port

Syslog

Host IP address of the syslog server


Save appsettings.json

Restart the Accops HyWorks VM Scale Booster service

Enable VM Scale Booster on the Controller
Configuration on the HyWorks Controller
Once the HyWorks VM Scale Booster is configured and the services are running, follow the steps given below to enable the VM Scale Booster from the HyWorks Controller:

Open the HyWorks Management Console > System > Advance config

Search for the tag DVM push and make the following changes:

DVM Agent Queue Username: accopsmqadmin

Desktop Poll Mode: 2

DVM Agent Queue Hostname: IP of the RabbitMQ (in case of HA, VIP of RabbitMQ)



Save the configurations and click Update to push the changes

Configuration on the SHD
Install the latest Session Host Installer setup that has the in-built DVM Tools-Lite. The Session Host Server and the Monitoring Services will use the DVM Tools to push the service and the load status.

On the Session Host Server, verify that the registry entry EnableShdMode flag is set as true at HKLM\Software\Accops\DesktopAgent.

Limitations of the VM Scale Booster
The VM Scale Booster feature works only for Managed SHD Pools.

The VM Scale Booster feature works only for Windows Managed SHDs. Linux SHD does not support the SHD push Feature.

The HyWorks VM Scale Booster [v3.3.0.20] requires 3.3 GA or above Controller & SHD and vice versa.

Important (VM Scale Booster)
During the installation of this new Session Host, it installs a DVMTools-Lite automatically and sets the EnableShdMode registry of the Desktop Agent as True. So, if the manual is set as false, then the SHD Push will not work.

The manual installation arguments for the SHD Mode enabled DVMTools with regular release:

Argument: HyWorksDVMTools.exe /S /desktopagent=1 /hyprint=0 /usbcleaner=0 /usbredirection=0 /EnableShdMode=1
DVM push agent refresh timeout: After this timeout, only the controller-driven manual poll will be executed to each of the SessionHosts/MonitoringServers/DVMAgents.

Azure-specific configurations on the Controller
Add the following inbound firewall rules for ports:

5672: RabbitMQ Message Queue [Must]

15672: RabbitMQ Management Console [Optional]

Troubleshooting
In case of Azure, the rule needs to be added on the Network Interface via the Azure portal for port number 5672 and 15672

Check the IP address of the Controllers in appsetting.json file

Check the Username and Hostname for the RabbitMq in the Advance config section on the Management Console

Appendix
Change the default port of RabbitMQ
Controller: Update the port into MMC > Advance Config with Key[DVM Agent Queue Port]

HyWorks VM Scale Booster: Update the port[key: RabbitMQ-> Port] in the config file at

Filename: appsettings.json

Path: C:\Program Files (x86)\Accops\HyWorks VM Scale Booster

Update the RabbitMQ port at the config file:

Path: C:\Users\Administrator\AppData\Roaming\RabbitMQ

File name: rabbitmq.config.example

Changes:

Existing string: %% {tcp_listeners, [5672]},

Updated string: {tcp_listeners, [5673]}

Please note that the comma is removed from the end

Save the file and rename it to rabbitmq.config

RabbitMQ Service reinstall steps:

cd C:\Program Files\RabbitMQ Server\rabbitmq_server-3.7.17\sbin

rabbitmqctl.bat stop

rabbitmq-service.bat remove

rabbitmq-service.bat install

rabbitmq-service.bat start

VM Scale Booster HA Configuration
In enterprize environments, VM Scale booster must be configured to run in high availability mode. Accops does not provide any built-in load balancing or high availability of VM Scale Booster and thus the same can be achieved via 3rd party load balancer and high availability applications. One such solution is Microsoft Failover cluster manager. The below method can be used to configure MS failover cluster manager:

Note

Though the scripts/methods are provided but eventually the configurations/load balancing and failover handling is outside the scope of Accops.
After a successful installation of the Accops HyWorks VM Scale Booster, log in to both the VMs with AD Admin (both VMs should be joined to the same domain)

Copy the PowerShell script FC_Configure.ps1 locally to both the VMs

Update the configurations into the scripts [viz. Failover Cluster old/new names, hostnames & VIPs]

Run the PowerShell ISE with Admin privilege

Execute set-executionpolicy remotesigned to enable the PowerShell script execution



Open or load the script FC_Configure.ps1

Update the following tags (refer to the screenshot)

: new_FC_Name: Name of the Failover Cluster

: new_FC_RabbitMq_Name: Name of the Failover Cluster role for RabbitMq

: new_FC_DVMConsumer_Name: Name of the Failover Cluster role for the HyWorks VM Scale Booster

: HostName_1: Hostname of the first VM of the HA configuration

: HostName_1: Hostname of the Second VM of the HA configuration

: VIP_FC: Provide an available IP address for the Failover Cluster

: VIP_FCRabbitMq: Provide an available IP address for the RabbitMq role in the Failover Cluster

: VIP_FC_DVMConsumer: Provide an available IP address for the HyWorks VM Scale Booster role in the Failover Cluster



Note

The name given to the Failover cluster and roles should not be greater than 15 characters

This will enable the Failover Clustering Feature for the machine and will prompt for the Failover clustering configuration

On one VM, click No for a clean-up, if any previous Cluster Group or Role has been added

On another VM, click Yes to configure the Failover cluster [it will first cleanup the local Failover cluster, followed by configuration of the the new one]

The Failover cluster should now be configured and ready to use. Confirm that the configured Roles are visible and are running.

Update the VIP used for FC_RabbitMq in the appsettings.json file on both the machines and restart the Accops HyWorks VM Scale Booster service.

In the Failover Cluster Manager, right click FC_AccopsDvmConsumer role > Move > Select Node > (Select another node) Ok

For the FC_RabbitMq role, the same steps as the ones mentioned above should be executed.

The system should now be ready to use, and will automatically switch the VIP in case of service failure, allowing the DVMs to push to only one RabbitMQ server using the VIP.


HyWorks Scheduler and Action Processor
Accops HyWorks Scheduler and Action Processor are used for on-demand provisioning and automatic power management of session host servers. In this section, detailed steps to install scheduler and action processor will be provided.

Scheduler Installation and Configuration
Scheduler component manages schedules (Create/update/delete) as per capacity plan creation, modification or deletion. It also sends the input to queue with details of capacity plan and session team, which will be picked by Action processor to process as per requirement. Scheduler component is installed on HyWorks controller server itself.

Installation
To install scheduler, follow below steps:

Prerequisites: Following prerequisites must be installed before installing scheduler on same server hosting HyWorks Controller:

Erlang OTP 22.0 (Prerequisite for RabbitMQ) Installation
Official Download Location
Rabbit MQ Server 3.7.17 Installation
Official Download Location
ASP.NET Core Hosting Bundle 3.1 Installation
Official Download Location
.NET Desktop Runtime 3.1 Installation
Official x64 Download Location
Official x86 Download Location
Installation Steps:

Once all above prerequisites are installed, copy Scheduler setup on Controller server
Run setup with user having local administrator privileges on the server
Click on Next button on Welcome screen



In *Choose Components screen

Select option Configure RabbitMQ
Select component Scheduler
Click on Next button to proceed


On License and Agreement screen, click on I agree button to proceed



Required components will start installing:



RabbitMQ will be configured as per scheduler requirements


During installation, scheduler will require controller database details.

Authentication mechanism and user should have full rights on controller database. For simplicity database details can be provided exactly same as used to configure HyWorks Controller
Database configuration is compulsory to proceed and can not be cancelled or closed. Provide:
Database Server Address
Static port (default: 1433)
Authentication mechanism (Windows/ SQL Server)
For SQL Server Authentication - Username/ Password
Click on Test Connection button to check database reachability
Click on Next button to proceed


Next screen will require service logon credentials.

If database is configured with SQL Server authentication, scheduler service will be configured and run with local system account privileges.
If database is configured with Windows Authentication, scheduler service will require user credentials (having logon as a service rights and access to controller database)



Provide appropriate details and click on Save button to save settings.

Installation and configuration will be finished. Click on Finish button to dismiss the scheduler installer wizard.



Enable Controller to manage scheduler service
Login into management console with user having super-admin privileges
Go to Host management -> System -> Advance config
Apply filter 'Capacity Plan' in tags
Set Manage Scheduler Service setting as True and click on Update to apply the changes
If this setting is true, then Scheduler service will run only on the primary node of the controller, on secondary HyWorks controller the service will be stopped.
If this setting is set as false, HyWorks Controller will not manage it and it will start and stop with system
Installation and Configuration in Controller Cluster
If HyWorks Controllers are installed in cluster mode (2 or more controllers are configured for high availability), then

Scheduler should be installed on both management nodes, with configurations done same as specified above
Action Processor Installation and Configuration
Action Processor is the brain of capacity planning, it takes inputs from the controller and decides the current capacity, and then takes actions accordingly. It processes the two types of messages pushed by the scheduler

Plan Implementation: Simply saving capacity recommendations in controller
Team Scale: Triggering power-on, power-off, cloning jobs as per schedule or scaling requirements
Installation
To install Action Processor, follow below steps:

Prerequisites: Prerequisites are same as of scheduler, so if scheduler is already installed, the same prerequisites need not to be installed. But if Action processor is installed first, following prerequisites must be installed:

Erlang OTP 22.0 (Prerequisite for RabbitMQ) Installation
Official Download Location
Rabbit MQ Server 3.7.17 Installation
Official Download Location
ASP.NET Core Hosting Bundle 3.1 Installation
Official Download Location
.NET Desktop Runtime 3.1 Installation
Official x64 Download Location
Official x86 Download Location
Installation Steps:

Once all above prerequisites are installed, copy Action Processor setup on Controller server
Run setup with user having local administrator privileges on the server
Click on Next button on Welcome screen



In *Choose Components screen,

Select option Configure RabbitMQ
Select component Action Processor
Click on Next button to proceed


On License and Agreement screen, click on I agree button to proceed



Required components will be installed and RabbitMQ will be configured as per Action Processor requirements.



During installation it will prompt for service logon credentials

Service logon credentials can be configured same as HyWorks Controller/ Scheduler.


Once installation is completed, click on Finish button to dismiss, Action processor installation wizard.



Installation and Configuration in Controller Cluster
If HyWorks Controllers are installed in cluster mode (2 or more controllers are configured for high availability), then

Action processor should be installed on both management nodes, with configurations done same as specified above
Prerequisites Installation
Erlang OTP Installation
Note

Exact version of Erlang (OTP) is required.
Copy setup file of downloaded Erlang (OTP) v22.0

Connect to server with user credentials having local administrator privileges, double click on otp_win64_22.0.exe and proceed with the installation with all the default options.







Once the installation is complete, click on Finish to close the installation wizard of Erlang.

Reboot if required to complete Erlang installation process.

RabbitMQ Installation
Note

Exact version of RabbitMQ is required.
Copy setup file of downloaded Rabbit MQ server module v3.7.17

Connect to server with user credentials having local administrator privileges, double click on rabbitmq-server-3.7.17.exe





Confirm RabbitMQ service is installed and running, once the installation is completed.

ASP Dot NET Core Hosting Bundle Installation
Connect to server with user credentials having local administrator privileges

Copy setup files of ASP.NET Core Hosting Bundle 3.1.14

Double click on setup file dotnet-hosting-3.1.14-win.exe





Close the setup wizard, once installation is completed



Dot NET Desktop Runtime Installation
Connect to server with user credentials having local administrator privileges

Copy setup files of .Net Desktop Runtime 3.1 (both x64 and x86)

Double click on setup file windowsdesktop-runtime-3.1.14-win-x86.exe





Close the setup wizard, once installation is completed



Double click on setup file windowsdesktop-runtime-3.1.14-win-x64.exe





Close the setup wizard, once installation is completed


Hyper-V Connector
About Hyper-V Connector
Hyper-V connector is installed on Microsoft Hyper-V or SCVMM servers to enable them to be used as dedicated session providers in HyWorks deployments.

Note

Copy the HyWorks setup locally on the target server. Running the HyWorks setup from the UNC path is not supported and will result in a failure.
Running the HyWorks setup may also fail during the file extraction process, if the logged in user has a roaming profile. Hence it is recommended to log in with local administrator user credentials.
The features supported by different Microsoft Hyper-V/SCVMM Servers that are configured as dedicated session providers for HyWorks are listed here -> Accops HyWorks Hyper-V Connector -> Feature Support Matrix.

Server Support
Hyper-V Connector is a standalone installer that can be installed on the following types of servers:

Windows Hyper-V/SCVMM Server

Microsoft Hyper-V 2012 R2, 2016, 2019

Microsoft SCVMM - 2016, 2019

Installation on Hyper-V Servers
Access the Hyper-V Server with user credentials that have administrator privileges.

Download and copy the HyWorks Hyper-V Connector setup on the Windows Servers running the Hyper-V/SCVMM Service.

Double click the Installer to invoke the Installation wizard.

Click Next.



Accept the License Agreement by clicking I Agree and click Next.



Choose the Installation Directory. Change the directory, if required, and click Next.



Change port number 38864 for the Hyper-V Connector service if required and click Next.



Click Install to start the installation process.





In the Hyper-V configuration window, select an appropriate service type which requires the connector to be installed.

Note

The configuration window will detect the installed service and will display options accordingly.

Select the option Hyper-V

In the Service Log On wizard, select Logon as configuration

Recommended (Local System Account): Will install and run the Hyper-V connector service with the local system account

Use the This Account option to specify the Service Logon Credentials. Ensure the specified account has Logon as a service rights on the system. The credentials should be provided in the domain-name\username or hostname\username format.

Click Save Settings



Once the installation is complete, click Close to close installation wizard



The server should now be ready to be configured as the dedicated session provider in the HyWorks Controller.

Installation on SCVMM Servers
Standalone SCVMM Server Deployment
For installation of the Hyper-V Connector on SCVMM server, the installation process is the same as described in the Hyper-V section, except for step 10.a where the module to be selected must be the SCVMM server.



Clustered SCVMM Server Deployment
For a SCVMM Cluster environment, installation and configuration should be done under the supervision of the Accops team. For installation in a SCVMM cluster environment, the installation process will remain the same except that the Cluster Deployment option must be selected.



Installation Logs
HyWorks installation logs can be used for troubleshooting and verification purposes. Installation logs are created at the following location:

<Hyper-V Installation Directory>\Hyper-V Connector\Logs, e.g.
C:\Program Files\Accops\HyWorks\Hyper-V Connector\Logs




Enhanced USB Redirection
SEP (Enhanced USB Redirection Driver) suite or components are used when Enhanced USB redirection driver is used in HyWorks.

SEP is recommended for a shared desktop environment as it supports isolation of the USB devices and does not share the devices in all the running session.

Note

USB redirection through enhanced driver is controlled from the SEP license server. Therefore, all the DVMs should have the SEPAPP (SEP Server Module) configured with the appropriate SEP license server.

The license server should have appropriate policies configured for USB redirection.

Enhanced USB redirection requires extra licensing cost.

SEP Versions and Installation Requirement
Client Side (Hy2000/3000/4000): v3.0 (Integrated with HyDesk)

Client Side (Windows/Hy3020): Default v3.03

For 64bit Client OS: v4.07 (uninstall default SEP Client v3.03)
Server Side: 4.07 (need to be installed and configured separately)

Operating System Support
Server side: WIN7, XP, Server 2008 R2 (32-bit, 64-bit), Server 2003 (32-bit, 64-bit);

Client side: WIN7, WES7, Linux, ARM;

License & policy servers: WIN7, WES7, XP, XPE, Server 2008 R2, Server 20012 R2,

SEP Component Installation
SEP License Server: License and Policy Management.

SEP Server: Also referred to as SEPApp, needs to be installed on the target DVM.

SEP Client: A compatible SEP Client must be installed on the HyDesk devices or the client machine.

HyDesk Hy2000, Hy3000, Hy4000 consist of the SEP Client by default and does not require any additional installation.

HyDesk Hy3020: If the Server side module is v4.07, the SEP Client v4.07 should be used and any existing default SEP Client should be removed.

Windows Client: for 64bit OSes, the SEP Client version 4.07 should be used.

SEP License Policy Server
Download the latest version of the SEP License Server on the server to be configured as the SEP License Policy server.

The server must be available at all times, otherwise USB redirection will be affected.

The IP address of the server must be of static type so that the SEPApp on DVMs can connect to the server at all times.

Windows/3rd Party firewall should be disabled to support the communication by the License Server.

Connect to the server to be configured as the SEP License and Policy Server with user credentials that have local administrator privileges, double click the SEPPolicy setup to invoke the Installation wizard.

Click Next.



Select the Installation folder. Change the default Installation Directory, if required, and click Next.



Enable the creation of desktop shortcuts and click Next.



Click Install to continue the installation process.





Click Finish once the installation process is complete and exit the Installation wizard.



The SEP License/Policy server should now be ready and can be configured as the SEP Server on DVMs or RDS server.

SEP Policy Configuration
Double click the Policy Configuration shortcut displayed on the desktop to launch the SEP Policy Configuration. Use this application to:


1.  Manage the **License** on the SEP Policy server

2.  Manage the **USB Redirection Policies** (To allow smooth redirection by default, no policies are configured,)

![](./media/image7.png)
SEPAPP or SEP Server Installation
Log in to the DVM or shared hosted desktop with user credentials that have local administrator privileges and download the latest version of the SEP Server (e.g. v4.07)

Double click SEPServer Installer to open the setup wizard.

Click Next.



Accept the License Agreement by clicking on the I accept the agreement option and click Next to continue with installation.



Select the installation location. Change the default folder - C:\Program Files (x86)\SEPServer; if required and click Next.



Select the components that need to be installed and click Next.



Though SEP supports isolation of the USB devices among the sessions, if the the printer is required to be among devices in the session, uncheck Printer isloation for usb redirection during the installation process.



Configure the Start Menu folder and click Next to continue with installation.



No changes are needed on the Additional Tasks screen. Click Next



Click Install to proceed with the installation process and wait for the process to complete





Once the process is complete, select the Yes restart the computer now option and click Finish to exit the wizard.



SEPAPP Or SEP Server Configuration
The following configurations must be done on the SEPApp to complete the setup:

License server configuration
Once installed successfully, the License server must be configured in the SEPApp:

RDS Server/DVM will need to be rebooted to allow installation of the SEP Server. A desktop shortcut SEPApp, should get created on the desktop. Double click on the shortcut to invoke the SEPApp.



The SEP Control Center app should get expanded. Click Advance Settings



Go to the License to provide the required details and click Apply



Once the configuration is successful, a message will be displayed asking the user to log out from the current session to allow the settings to come into effect.

Disable New USB device pop-ups for all users
The SEP prompts the user for every available or newly connected USB device. This includes the connected USB Keyboard and Mouse, for which redirection does not work.

To avoid these prompts, follow the steps given below:

Log in as the Administrator on the target DVM or RDS Server on which the SEP Server is installed

Download the file hidepopupforalluser.zip and extract the content

Right-click on the file hidepopupforalluser.bat and select Run as administrator



Once the operation is complete, press any key to restart the server



Disable Modules that are not required
RDS Server/DVM should reboot and get installed with the SEP Server. The desktop shortcut SEPApp should get created on the desktop. Double-click on the shortcut to invoke the SEPApp



The SEP Control Center app should get expanded, as shown in the image given below -- Click Advance Settings

SEP Client Installation
For successful redirection, an appropriate client version must be installed on the client side. When working with HyWorks, the following types of clients are available:

HyDesk 2000, Hy3000, Hy4000 devices: These HyDesk devices come integrated with the SEP client and do not require any additional installation

HyWorks Client for Ubuntu Desktop: The SEP client comes integrated with the HyWorks Client for Ubuntu and does not require any additional installation

HyDesk Hy3020/HyWorks Client on Windows Desktop: With Windows or the HyDesk Hy3020 client, the SEPClient v4.07 is provided in the HyWorks Client with Enhanced USB Redirection Driver package.

Follow the steps listed below to install the SEP Client on the Windows Desktop OS:

Download the SEP Client v4.07 on the Windows desktop that is to be used as a client.

Double click the setup to invoke the Installation wizard and click Next.



Accept the License agreement by clicking the I accept the agreement option and click Next.



Choose the installation folder and click Next.



Select the components that need to be installed and click Next.



Upon selecting the Start Menu Folder screen, click the Next.



Select the folder in which you want to create the shortcut and click the Next to proceed with installation



Click Install to proceed with the installation process





Select Yes, restart the computer now and click Finish to reboot the desktop/HyDesk Hy3020 device to complete the installation process



This should complete the installation of the SEPClient.

Note

If an older version of the SEP Client is installed on the system, it will need to first be uninstalled completely

Enable/Disable SEP, SEP Modules or Specific Devices
Configure redirection of specific devices and enable/disable specific modules from the SEP Client.

SEP Client Configurations on Windows Endpoints
The HyWorks Client on Windows uses the SEP Client as an independent entity. While the SEP is controlled externally by the HyWorks Client, the installation and functionality of the SEP remain independent.

Launch the SEPClient window by clicking on the USB Client option and make any device act as a remote or local device.

Enable/Disable SEP
Disable the SEPClient by using the toggle button displayed at the top of window.



Enable/Disable SEP Modules
Enable/disable any SEP modules by using the respective toggle buttons. For example, to disable USB redirection, simply use the toggle button displayed against it.



Enable/Disable Device
Once a module is enabled, it can be expanded to view it's settings and available devices. For example, if USB Redirection is enabled on the client side and a few USB devices are plugged in to the device, expanding the Enable USB Redirection section will display the settings along with the option to make any of the plugged in USB device as remote or local.

To redirect any specific device to a remote session, click the toggle button to change it's status from local to remote.



SEP Client Configurations on Linux Endpoints
The SEP Client gets installed with the HyWorks Client on Linux desktops or Linux-based HyDesk devices and always works as an integrated module of HyWorks.

View the USB devices from the Login screen > Settings window > USB Devices tab and select/deselect USB devices.

Select the Redirect checkbox displayed against the Device name to enable the USB device for redirection in a remote session.



Server Side Configuration
Enable/Disable SEP Modules
The toggle buttons provided against each module can be used to enable or disable modules.



Connect/Disconnect USB Devices
As shown in the image below, the toggle button displayed against each connected USB devices can be used to connect or disconnect the USB devices in a remote session.



Troubleshooting
USB Hard Disks appearing twice

When the USB Hard disk is being redirected using the SEP, it appears twice in the DVMs. The issue can be solved by following the steps given below:

Log in to the Administrator account and open the command prompt to execute the following command:

mountvol.exe /R

mountvol.exe /N

The SEP4.7.0 SEP License Policy server by default runs on port 7829. If the requirement is to configure it on another port, follow the steps listed below:

Go to directory C:\Program Files (x86)\Cinfin\CDS\runtime\conf\" file

Update the port number

MMR (Multimedia redirection) should be kept disabled on the SEP for better audio and visual performance using HyWorks.

References
USB Redirection in HyWorks

SEP User Manual



SRMS Installation
This section provides installation process for the HyWorks Session Recording Manager Server (SRMS).

Note

Copy the HyWorks setup locally on the the target server. Running the HyWorks setup from the UNC path is not supported and will result in a failure.
Running the HyWorks setup may also fail during the file extraction process, if the logged in user has a roaming profile. Hence it is recommended to log in as local administrator.
Overview
Session recording feature is integrated to monitor and record the activities done on VDI.

SRMS (Session Recording Management Server) is used to manage, upload and stream user session recordings. The sessions can be recorded and uploaded to given location (local/remote).

The recordings can be accessed from HyWorks management console by the user having appropriate privileges. One can also automatically clean-up the old records as per configured number of days.

While installing SRMS on Windows servers following modules will be installed:

SRMS Aggregator Service
SRMS Manager Service
AutoClean Task (Optional)
System Requirements
Hardware Requirements
Minimum configuration for Windows server:

Minimum 4GB RAM
4 vCPUs
10 GB free space on installation disk for installation, dependencies and post installation management files
Note

Upgrade server size as per the required recording file size and history to be maintained.

Supported Operating Systems
SRMS can be installed on any Windows operating systems having prerequisite installed, but for performance and ease of functioning should be installed on Windows Server OS.

Pre-requisites for SRMS
To configure the Windows Server with the HyWorks Controller, the following software must be installed and configured on the system:

Dot Net 4.7.2
Dot Net Hosting 3.1.14
Windows Desktop Runtime 3.1 x86/x64
Erlang otp 22.0 x86/x64
RabbitMQ 3.7.17 x86/x64
Installation Modes
SRMS can be configured with HyWorks in two different modes:

Two-Node Active-Passive/Multi-Node HyWorks Managed Database Sync
Multi-Node SQL Managed High Availability
For each mode, two types of installation is supported:

First time Installation
Maintenance

a. Upgrade

b. Uninstall (Using control panel)

Important Installation Configurations
Components: SRMS (Session Recording Management Server)
Controller Details:

Management Node 1 and Port: The IP address and port number of HyWorks controller. It can not be empty.

Management Node 2 and Port: The IP address and port number of secondary HyWorks controller. It can be empty as its optional.

The installer will check for the reachability of both the controllers and will dusplay a message box only if one of the controller isn't reachable

Unreachable controllers can also be selected.

Deployment Mode: Select deployment mode

Two-Node Active-Passive/Multi-Node HyWorks Managed Database Sync

Multi-Node SQL Managed High Availability

AccopsMQ Details:

This page contains information and credentials of AccopsMQ

This page will show up only if the user selected "Two-Node Active-Passive/Multi-Node HyWorks Managed Database Sync" as deployment mode

Reachability would be checked here for IP of AccopsMQ, message box with warning will be shown in case of failure

The configuration is required for handling Controller high availability and in cases of failover switching to the primary controller.

AutoClean Feature details:

User will have to select if AutoClean feature is required

If it is required then the following fields are required

Number of days , to delete the recordings which are older than given number of days
The valid range for number of days is 1 - 3650 days
Number of hours, the interval to run the task in a day
The valid range for number of hours is 1 - 24 hours
Installation Path: The path where SRMS needs to be installed can be changed here

Session recordings storage path: SRMS will upload the user session recordings on this given location.

Installation steps
Log in as a local administrator user on the dedicated desktop or server machine.

Download HyWorksSessionRecordingManager.exe. Verify the MD5 sum of the downloaded file.

Double click and launch the Installer. Click Next to proceed.



Accept the License Agreement by clicking I Agree.



Component to be installed will be selected by default. Click Next to proceed.



Enter controller IP on the next window. Click Next to proceed. [If controller is standalone, then the second field to add controller details is optional]



Select the HyWorks deployment type from following option. Click Next to proceed.

Two-Node Active-Passive/Multi-Node HyWorks Managed Database Sync: Select this option if controller is deployed in HA
Note

For this deployment method, RabbitMQ installation is mandatory. RabbitMQ can be installed on same machine, where SRMS is installed or any other machine.

Multi-Node SQL Managed High Availability: Select this option if your controller is deployed in Active-Active setup


Enter IP address of the host where RabbitMQ is installed. Port number, username, password and details of queue will be present by default. Click Next to proceed.

This screen will only be displayed for deployment type as Two-Node Active-Passive/Multi-Node HyWorks Managed Database Sync.

SRMS uses the configuration for handling controller failover cases and switching to primary HyWorks controller. Important to know that SRMS does not have any other mechanism of controller HA handling and thus, this is a must to have configurations for HA deployments mentioned in point# 1.

For HA handling using Accops MQ, following flag must be configured as enabled: Settings > General > Advanced Settings > HA notify control: Set as True.

If deployment is using multiple Accops MQ servers or having scale booster deployed in HA, then the VIP of Accops MQ should be provided as configuration.



Select Yes if Auto-Clean feature is required. Click Next to proceed.

Admin can configure the days and hours, after which recordings will get deleted.



Choose the destination folder and click Next to proceed.



Browse and enter session recording storage path where you want to save the recordings. Click Install to start the installation process.



Once the installation is complete, click Finish.

Note

If SRMS is to be configured in HA, then admin should follow the same installation procedure to prepare two SRMS servers and then use a third party load balancer for load balancing and failover conditions.

HyWorks Controller Installation in Maintenance Mode
Re-running the HyWorks Controller setup or invoking it from the Control Panel > Installed programs list, opens the Installer in Maintenance mode and provides the following options, based on the existing setup in use:

Add New Components

Upgrade

Repair

Uninstall

Note

Copy the HyWorks setup locally on the the target server. Running the HyWorks setup from the UNC path is not supported and will result in a failure.
Running the HyWorks setup may also fail during the file extraction process, if the logged in user has a roaming profile. Hence, it is recommended to log in as a local administrator.
Add New Components
If an Administrator has installed only one of the Accops HyWorks Controller components i.e., the Accops HyWorks Controller Service or the Accops HyWorks Management Console, then re-running the Installer will provide the option to add new components. This will allow the installation of the remaining components of the Accops HyWorks Controller. Use the steps given below to add new components to the Accops HyWorks Controller:

Log in to the Windows Server as a local administrative.

Copy the Accops HyWorks Controller installer to your machine.

Launch the Installation wizard and select the option Run as Administrator.

If the Accops HyWorks Controller installer detects an existing installation, it will open in Maintenance mode and the setup will provide the following possible options:

Add New Components

Upgrade ( enabled if running a newer installer)

Repair (Enabled if running the same installer setup)

Uninstall

Select the Add New Components and click the Next.



The screen will provide a list of installed and available components. Only those components which have not been installed previously can be selected for installation, for example:

If the Controller Service and Management Console are installed, then the option to install the Session Host Server will be displayed.

If the Accops HyWorks Controller Service was installed previously, the Add New Components wizard will enable the Accops HyWorks Management Console and Session Host Server.

If the Accops HyWorks Management Console was installed previously, the Accops HyWorks Controller and Session Host Server will be enabled in the Add New Components wizard.



Follow the on-screen instructions or refer the steps for a fresh installation.

Upgrade HyWorks Controller
Note

Upgrading over HyWorks v2.5 with the Embedded DB is not supported with HyWorks v3.3 or later versions. The later versions only support Microsoft SQL Server for database.

For upgrading any production or evaluation deployment, a thorough analysis must be done and for any assistance contact Accops support.

The upgrade flow is enabled only when the Accops HyWorks Controller is installation is initiated on a system, where an older version of HyWorks Controller already exists.

Log in to the Windows Server as local administrative.

Copy the Accops HyWorks Controller installer to your machine.

Launch the Installation wizard and select Run as Administrator.

If the Accops HyWorks Controller installer detects an existing installation, it will open in Maintenance mode and the setup will provide the following possible options:

Add New Components

Upgrade ( enabled if running a newer installer)

Repair (Enabled if running the same installer setup)

Uninstall

Select the Upgrade and click the Next.



Choose the component to be upgraded and click Next.



Note

One or more components can be selected at a time.
It is recommended to upgrade the HyWorks Management Console and HyWorks Controller Service together as a new Management Console requires an equivalent or compatible HyWorks Controller Service.
The HyWorks Session Host upgrade should be done as per the release recommendations and available releases.
Configure same Service Logon Credentials as before (recommended) and click the Next to proceed.



Skip the Restore Database screen by clicking Next as upgrading with the Database Restore feature is not supported.



During the upgrade, proceed without changing ports and click Next. It is recommeded not to change ports as it may affect the existing HA configurations and the Management Console may not be able to communicate with the HyWorks Controller Service.



Click the Upgrade to start the upgrade process.



The upgrade progress will be displayed on the screen.



Once the upgrade is complete, page displays the status of the individual components and a link to navigate to the Management Console.



Upgrade the HyWorks Controller in a Cluster environment
Upgrade flow for standlone and cluster environment is same and as per the steps provided above. However in the clustered environment, upgrade follows the specific upgrade sequence of servers for minimum downtime and avoid issues.

Two-node Active-Passive Cluster
Downtime Required: Yes, minimal for the duration of upgrade and switching.

Log in to the HyWorks Controller Management Console of the primary HyWorks Controller as a Super administrator.

Go to the Server > HyWorks Controller.

Select the server (currently in secondary mode) and click the Change mode.

Select the Maintenance option to change the mode of the second HyWorks Controller to Maintenance mode. In Maintenance mode, the HyWorks Controllers will not synchronize.

Connect to the second HyWorks Controller as a local administrator and upgrade as per the specifications in the Upgrade HyWorks Controller section.

Once the second server is upgraded and becomes accessible in the Management Console:

Go to Server > HyWorks Controller.

Click the Change mode after selecting the Primary HyWorks Controller.

Select the Maintenance option to change the mode of the the second HyWorks Controller into Maintenance mode.

Both the HyWorks Controller servers should now be in Maintenance mode.

Select the second server (which was upgraded recently) and configure it to be the Primary using the Change Mode option.

Connect to the primary HyWorks Controller with user credentials with local administrator privileges and upgrade as per the specifications in the Upgrade HyWorks Controller section.

Once the previous primary HyWorks Controller becomes accessible in the Management Console, change it's node to secondary.

Both HyWorks Controllers should now be upgraded and running.

Multi-node Cluster with HyWorks Managed Database High Availability
Downtime Required: Yes, high as all nodes to be put into maintenance

For clustered environment having multi-node HyWorks managed database high-availability, following sequence should be followed for effective upgrade:

Configure all nodes (Management as well as session nodes) in to maintenance mode from management console of any of the management servers.

Upgrade Primary HyWorks Management nodes first to latest version

Upgrade secondary HyWorks Management nodes to latest version

Upgrade all session nodes to latest version one by one

Important

The management nodes must be upgraded first and not session nodes, upgrading session node first may result in abrupt behavior by session nodes post upgrade and may corrupt the deployment.

Once two management nodes and at least one session node is upgraded, they can be removed from maintenance mode for enabling production usage.

Multi-node Cluster with SQL Managed Database High Availability
Downtime Required: Yes, high as all nodes to be put into maintenance

For clustered environment having multi-node HyWorks managed database high-availability, following sequence should be followed for effective upgrade:

Configure all nodes (Management as well as session nodes) in to maintenance mode from management console of any of the management servers.

Upgrade Primary HyWorks Management nodes first to latest version

Upgrade secondary HyWorks Management nodes to latest version

Upgrade all session nodes to latest version one by one

Important

The management nodes must be upgraded first and not session nodes, upgrading session node first may result in abrupt behavior by session nodes post upgrade and may corrupt the deployment.

Once two management nodes and at least one session node is upgraded, they can be removed from maintenance mode for enabling production usage.

Repair
The repair installation flow will only be enabled when the system has at least one of the Accops HyWorks Controller components installed and the Administrator runs the same installer setup as the installed version.

Log in to the Windows Server as a user with local administrator privileges.

Copy the Accops HyWorks Controller installer to your machine.

Launch the Installation wizard and select Run as Administrator.

If the Accops HyWorks Controller installer detects an existing installation, it will open in Maintenance mode and the setup will provide the following possible options:

Add New Components

Upgrade (Enabled, if running a newer installer)

Repair (Enabled, if running the same installer setup)

Uninstall

Select Repair and click Next.



Choose the component that are to be upgraded and click Next.



Configure the Service Logon Credentials and click Next.



Note

Service logon credential configurations must be kept the same as before (i.e the credentials should be the same ones using which the HyWorks Controller service was installed and configured)
Click Next to proceed.

If it is required to restore the database, click the Do you want to restore database option and browse to select the database backup file.

For the HyWorks Controller with SQL Server database, the file should be using the .bak extension.

Note

HyWorks creates a backup file in the compressed format. To restore, extract the backup file and move to the SQL Server -- Backup folder. The default location of the SQL Server (x64) backup folder is as follows:
C:\Program Files (x86)\Microsoft SQL Server\MSSQL11.SQLEXPRESS\MSSQL\Backup

Refer to the HyWorks Backup and Restore section for instructions on restoring the HyWorks Controller using the backed up database.

Change the ports numbers, if required, and click Next.

Warning

Changing ports will impact

All the existing session will be disconnected.

All registered devices (configured to connect to the Controller using manually provided IPs) will be required to be reconfigured to use the new port.



Configure the HyWorks Controller Administrators. The following types of Administrators can be configured:

Domain Group Configuration: For configuring a Domain User group, the following conditions must be met:

The system is in domain.

The user is logged in using the domain credentials.

The following inputs must be provided correctly:

Domain User Group name.

The credentials of one of the user accounts which belongs to the specified Domain user group.



Local User Configuration: To create a local user Administrator, provide the username (the default is HyWorksAdmin), and an appropriate password.

Warning

As described in the above step # 7, the Repair mode requires the reconfiguration of the HyWorks Administrators; this mode can be used to update the HyWorks Administrator password as well (in the event that it is lost).

Repair operation resets the existing configuration files as well. If any configuration changes have been done in the HyWorks Controller using the configuration files, then all the modifications will be lost after the repair/upgrade operation and they will need to be re-configured (restarting the service will be required to bring these changes into effect).

Click Next to proceed with configured user group.

Click Repair to confirm the operation and wait for the Repair operation to complete.





Once the Repair operation is complete, the Administrator will be navigated to a screen displaying information related to the repaired components, the status of the Repair operation and a link to access the Accops HyWorks Management Console. Click Close to exit from Installation wizard.



Uninstall
The Uninstall flow will be enabled when the system already has an existing installation of Accops HyWorks Controller and the Administrator re-runs the same or a newer installation. To uninstall one or more components, follow the steps listed below:

Log in to the Windows Server as a user with local administrator privileges.

Copy the Accops HyWorks Controller installer to your machine.

Launch the Installation wizard and select Run as Administrator.

If the Accops HyWorks Controller installer detects an existing installation, it will open in Maintenance mode and the setup will provide the following possible options:

Add New Components

Upgrade (Disabled if running the same installer setup, enabled if running a newer installer)

Repair (Enabled if running the same installer setup, disabled if running a newer installer)

Uninstall

Select Uninstall and click Next.



Select the components that need to be uninstalled and click Next.

The Remove Service Database option enables the Administrator to remove the database which was created during the installation of the HyWorks Controller.

The Remove Log Database will remove the logs database from the specific instance of the SQL Server. To keep the logs, uncheck this option.

Note

If the Remove Database is not checked, the re-installation process for the HyWorks Controller with the same database server will use the existing database file.



Click Uninstall to confirm the operation.





Once the process completes, screen will display the information of the uninstalled component and their respective status.

Click Close to exit the Installation wizard.



Limitations:

Upon the removal of the HyWorks Controller, the following Windows roles and features will not be uninstalled to avoid affecting the users that are currently logged on:

Web Server (IIS): In case the HyWorks Controller Management Console is uninstalled

Remote Desktop Session Host: In case the HyWorks Session Host Server is uninstalled

Installation Logs
HyWorks installation logs can be used for troubleshooting and verification purposes. Installation logs are created at the following location:

%appdata%\HyWorksController\Logs



Session Host
This section describes the options to upgrade, repair or uninstall the Session Host server from the system.

Note

Copy the HyWorks setup locally on the the target server. Running the HyWorks setup from the UNC path is not supported and will result in a failure.
Running the HyWorks setup may also fail during the file extraction process, if the logged in user has a roaming profile. Hence it is recommended to log in with local administrator user credentials.
Upgrade HyWorks Session Host Server
Note

As the Session Host Server setup installs RDP extensions, upgrade might fail if active remote desktop sessions are running.

The Session Host server can be upgraded before or after upgrading the HyWorks Controller. But it is recommended to understand the compatibility between the HyWorks Controller and Session Host Server before upgrading.

Having Incompatible versions on the system will result in session/functionality failures.
Log in to the Windows Server with user credentials that have local administrator privileges.

Copy the Accops HyWorks Controller installation setup or the independent HyWorks Session Host Server setup on the Windows server.

Launch the Installation wizard.



Select the Upgrade and click Next.



Confirmation screen displays the components that are being upgraded.



Click Upgrade to proceed



All the HyWorks Session Host Server components should now be upgraded, and a success screen should be displayed, click the Close to exit the setup.



Repair HyWorks Session Host Server
Go to the Control Panel > Programs and Features

Click HyWorks Session Host Server Module > Uninstall/Change to open the HyWorks Session Host Server Installation wizard in Maintenance mode.



Click Repair and click Next to proceed.

All the Session Host Server components that will be repaired should be listed. Click Repair to continue.



Wait for the repair process to be completed. Once complete, click Close.





Click Yes, if prompted to reboot the Session Host server



This should complete the repair process for the Session Host server.

Uninstall HyWorks Session Host Server
Go to the Control Panel > Programs and Features

Select the HyWorks Session Host Server Module > Click Uninstall

HyWorks Session Host Server Installation wizard should open in Maintenance mode



Click the Uninstall button and click Next to proceed. It should list all the components that will be uninstalled



Click Uninstall to continue. This should remove all HyWorks Session Host Server modules from the system.



Note

The un-installation of the HyWorks Session Host Server does not remove the installed remote desktop server role from the system

If the same server has the Controller Service component installed, the HyWorks Monitoring Service will not be uninstalled, as the same component is also used by the HyWorks Controller for collecting details regarding resource consumption.

Installation Logs
HyWorks installation logs can be used for troubleshooting and verification purposes. Installation logs are created at the following location:

C:\ProgramData\HyWorksSessionHost\Logs



DVM Tools Installation in Maintenance Mode
Upgrade HyWorks DVM Tools
DVM Tools can be upgraded from the HyWorks Controller through:

Desktop Pool

Desktop VM Page

Prerequisite
Before upgrading the HyWorks DVM Tools:

Download the latest version of HyWorks DVM Tools.

Copy the HyWorksDVMTools.exe file and replace it at the following location on the HyWorks Controller:

C:\Program Files (x86)\Accops\HyWorks\HyWorksUpgradeService\Updates\Windows\

Restart the Accops HyWorks Upgrade service to refresh the latest DVM tools information. If you do not restart, information will be refreshed automatically after 15 minutes.

Access the HyWorks Management Console and navigate to the Desktop VMs to check for which VMs the DVM Tools are not upgrade.



Upgrade through Desktop Pool
Access the HyWorks Management Console and go to the Workspace > Desktop Pools and edit the desktop pool.

Go to the Advanced and enable the Auto Upgrade Desktop Agent, select the modules that need to be upgraded and save the pool.



The HyWorks Controller will start pushing updates to the desktops VMs.

The HyWorks DVM Tools for the desktops that are associated with the desktop pool will be upgraded.

Upgrade through Desktop VM page
Access the HyWorks Management Console and go to the Desktop VMs page. Select the desktop VM for which the HyWorks DVM tools is required to be upgraded.

Click the Upgrade agent.



Select the modules to upgrade and click Upgrade.



The HyWorks DVM Tools will get upgraded for that Desktop VM.

Uninstall HyWorks DVM Tools
Go to the Control Panel > Programs and Features.

Select the HyWorks DVM Tools Module > Click Uninstall.



Click Yes continue.



The HyWorks DVM Tools Uninstall wizard will be displayed.



Select all the components that need to be uninstalled and click Uninstall to start the process.

Wait for the uninstallation process to finish. Follow the onscreen instructions, if prompted.

The wizard will prompt to reboot the machine:

Select Reboot now to reboot the system and finish the un-installation [recommended]

Select the I want to manually reboot later option to reboot the system later.

Installation Logs
HyWorks installation logs can be used for troubleshooting and verification purposes. Installation logs are created at the following location:

<DVM Tools Installation Directory>\HyWorks Desktop Agent\Logs,for example,
C:\Program Files (x86)\Accops\HyWorks Desktop Agent\Logs



Hyper-V Connector in Maintenance Mode
The Hyper-V Connector in Maintenance mode allows:

Uninstallation
Upgrade & Repair
Note

Copy the HyWorks setup locally on the the target server. Running the HyWorks setup from the UNC path is not supported and will result in a failure.
Running the HyWorks setup may also fail during the file extraction process, if the logged in user has a roaming profile. Hence it is recommended to log in with local administrator user credentials.
Uninstallation
The sections given below describes the uninstallation process for the following servers:

Windows Hyper-V Servers

Servers with GUI
Windows Server 2012 R2
Windows Server 2016
SCVMM Servers

Windows Server 2012 R2
Windows Server 2016
Uninstallation on Hyper-V 2012 R2 / 2016
To uninstall the Hyper-V Connector from the Hyper-V server, follow the steps given below:

Connect to the Hyper-V server with user credentials that have local administrator privileges, go to the Control Panel > Programs and Features.

Select the Accops HyWorks Hyper-V Connector from the installed programs list and click Uninstall.

On the Warning prompt, click Continue and on the Program and Features dialog, confirm the Un-installation by clicking Yes.

Uninstaller will be initialized.

Select Uninstall in the Maintenance window and click Next to uninstall Hyper-V connector.



Click Uninstall to confirm.



The uninstallation process will start and the progress bar will be displayed.



Once the process is complete, click Close to exit the Installation wizard.



Uninstallation on SCVMM 2012R2/ SCVMM2016
Uninstallation process on the SCVMM server is the same as the one described in the Hyper-V 2012R2/ 2016 with GUI section.

Upgrade and Repair
It is recommended to uninstall the existing setup from the Hyper-V/SCVMM server and before installing the updated version for the connector.

As the connector does not have any local preserved data, no data will be lost due to un-installation.

Installation Logs
HyWorks installation logs can be used for troubleshooting and verification purposes. Installation logs are created at the following location:

<Hyper-V Installation Directory>\Hyper-V Connector\Logs, e.g.
C:\Program Files\Accops\HyWorks\Hyper-V Connector\Logs


Troubleshooting
Installation Wizard should not be left unattended
HyPrint Installation Confirmation
During installation for the first time, setup may display confirmation dialog for the installation of HyPrint module and the setup will not proceed until it is being confirmed by user.

Thus, Installation wizard should not be left unattended else it may wait for user confirmation and will not proceed.

Session Host or Monitoring Service Not Getting Started During installation
Sometimes on slow servers, the services being installed with HyWorks Session Host Server i.e. (Session Host Service and HyWorks Monitoring Service) does not get started in a timely manner during installation and thus the error is displayed.

The error can be ignored, and services can be started post installation but if the setup is left unattended the setup will not proceed until the administrator acknowledges the error by clicking on OK button and thus the setup should not be left unattended.

Error 'Appropriate .Net application pool in the IIS (NOT FOUND)'
The error is displayed while installing Accops HyWorks Management Console, though .Net 4.5 has been installed and ASP.Net is enabled in Windows Server 2008 R2 machine.



During fresh installation, while selecting component 'Accops HyWorks Management Console' error is displayed.

RESOLUTION

Start -> Command Prompt

Right click on it and select \"Run as Administrator\"

'cd' to desired .Net 4.0 installation folder: Default path is:

cd Windows\Microsoft.Net\Framework64\v4.0.30319

Run the following command:

aspnet_regiis.exe -iru



It will register the .Net 4.0 in application pool

Re-run the Accops HyWorks Controller Setup and installation should be successful.

Error Service could not be started during installation
Sometimes when the server where HyWorks Controller/ Session Host servers are being installed, is not having enough resources, HyWorks services might fail to restart and during installation it will show the error and will wait for user input.

Resolution:

If error is displayed, click on OK button to proceed with installation and once installation is completed, go to Services -> Locate the HyWorks Services and start it manually if not already started.

Controller Installation on Microsoft WVD
Installation of HyWorks Controller on Microsoft WVD will require some additional configurations.

Root Cause
Windows WVD does not support the default mechanism used by HyWorks installer to configure some system roles and thus, fails.

Errors
Retrieving the COM class factory for component with CLSID failed due to the following error: 80040154
Management Console installation on WVD fails with following error:

[6/17/2020 12:30:52 PM] Setup Not completed! . Message: Retrieving the COM class factory for component with CLSID {2B72133B-3F5B-4602-8952-803546CE3344} failed due to the following error: 80040154 Class not registered (Exception from HRESULT: 0x80040154 (REGDB_E_CLASSNOTREG))., Trace at Microsoft.Web.Administration.ConfigurationManager. CreateWritableAdminManager(WebConfigurationMap webConfigMap, String configPathToEdit, Boolean isAdminConfig) at Microsoft.Web.Administration.ConfigurationManager.CreateConfiguration(WebConfigurationMap configMap, String configPathToEdit, Boolean isAdminConfig) at Microsoft.Web.Administration.ConfigurationManager.GetConfiguration(String rawConfigurationPath, String cacheKey, Boolean isAdminConfig) at Microsoft.Web.Administration.ServerManager.get_SitesSection() at Microsoft.Web.Administration.ServerManager.get_Sites() at EDCInstaller.WebInstaller.StopSite() at EDCInstaller.frmWizard.RunSetup(Object sender, DoWorkEventArgs e), InnerMessage: NA

Message Queuing has not been installed on this computer
Even if the HyWorks services are installed without error, RMS service will not be able to function and will log following errors:

Rebus.Injection.ResolutionException: Could not resolve Rebus.Bus.IBus with decorator depth 0 - registrations: Rebus.Injection.Injectionist+Handler ---> System.InvalidOperationException: Message Queuing has not been installed on this computer. at System.Messaging.Interop.SafeNativeMethods.MQPathNameToFormatName(String pathName, StringBuilder formatName, Int32& count) at System.Messaging.MessageQueue.ResolveFormatNameFromQueuePath(String queuePath, Boolean throwException) at System.Messaging.MessageQueue.Exists(String path) at Rebus.Msmq.MsmqUtil.EnsureQueueExists(String inputQueuePath, ILog log, Action`1 permissionsCallback) at Rebus.Msmq.MsmqTransport.GetInputQueue() at Rebus.Config.RebusConfigurer.<>c__DisplayClass13_0.b__28(IResolutionContext c) at Rebus.Injection.Injectionist.ResolutionContext.GetTService --- End of inner exception stack trace --- at Rebus.Injection.Injectionist.ResolutionContext.GetTService at Rebus.Injection.Injectionist.GetTService at Rebus.Config.RebusConfigurer.Start() at EDController.Service.BackgroungWorkers.RMSBackgroundWorker.InitImporter()

Steps to Mitigate Issues on WVD
To resolve this problem, MSMQ and IIS roles have to be installed explicitly prior to HyWorks installation.

Follow below steps to install roles and features on WVD required by HyWorks:

Go to Control Panel -> Programs and Features -> Turn Windows Features on or Off
Select following features:

Microsoft Message Queue (MSMQ) Server

[X] Message Queuing MSMQ


[X] Message Queuing Services                    MSMQ-Services

    [X] Message Queuing Server                  MSMQ-Server
Ignore other features available under MSMQ

Internet Information Services

[X] Web Server (IIS) Web-Server


[X] Web Server                                  Web-WebServer                  
    [X] Common HTTP Features                    Web-Common-Http                
    [X] Default Document                        Web-Default-Doc                
    [X] Directory Browsing                      Web-Dir-Browsing               
    [X] HTTP Errors                             Web-Http-Errors                
    [X] Static Content                          Web-Static-Content

[X] Health and Diagnostics                      Web-Health                     
    [X] HTTP Logging                            Web-Http-Logging               
    [X] Request Monitor                         Web-Request-Monitor            
    [X] Tracing                                 Web-Http-Tracing

[X] Performance                                 Web-Performance                
    [X] Static Content Compression              Web-Stat-Compression

[X] Security                                    Web-Security                   
    [X] Request Filtering                       Web-Filtering

[X] Application Development                     Web-App-Dev                    
    [X] .NET Extensibility 4.5                  Web-Net-Ext45                  
    [X] ASP.NET 4.5                             Web-Asp-Net45                  
    [X] ISAPI Extensions                        Web-ISAPI-Ext                  
    [X] ISAPI Filters                           Web-ISAPI-Filter

[X] Management Tools                            Web-Mgmt-Tools                 
    [X] IIS Management Console                  Web-Mgmt-Console               
    [X] IIS 6 Management Compatibility          Web-Mgmt-Compat                
    [X] IIS 6 Metabase Compatibility            Web-Metabase                   
    [X] IIS 6 Management Console                Web-Lgcy-Mgmt-Console          
    [X] IIS 6 WMI Compatibility                 Web-WMI
Ignore other features available under "Internet Information Services"

Click on OK to continue installation of the above selected features.

Once above configurations are completed, install HyWorks Controller using setup provided. It should get installed without showing any exceptions.

Resolving Dot Net Installation Issue on Windows 2008 R2-SP1
HyWorks Controller installation requires dot net 4.7.2 or later installed on Windows servers. Windows 2008R2-SP1 supports installation of .Net 4.7.2. In this section, steps to resolve a dot net installation issue on 2008 R2-SP1 will be provided.

Error: .Net Framework 4.7.2 has not been installed. A certificate chain could not be built to a trusted root authority.
While trying to install .Net Framework 4.7.2 on Windows 2008 R2-SP1, following error is shown on installer setup and dot net is not installed.

.Net Framework 4.7.2 has not been installed. A certificate chain could not be built to a trusted root authority.

Cause
This error can occur when installing the .NET Framework 4.7.2 on Windows Server 2008 R2 SP1 when an internet connection is not available.

Resolution
Download and import the latest Microsoft root certificate into Trusted Root Certification Authorities on the Local Machine using the Certificates snap-in in MMC.
























































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































